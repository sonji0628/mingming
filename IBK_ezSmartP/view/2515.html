<!doctype html>
<html version="1000">
<head>
	<meta charset="utf-8">
	<title>ezSmartAtm Builder Form 새문서</title>
	<meta http-equiv="cache-control" content="no-cache">
	<meta http-equiv="pragma" content="no-cache">
	<meta http-equiv="expires" content="0">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<meta name="author" content="[김윤섭][kkobiboy]">
	<link id="ui-style-core" rel="stylesheet" type="text/css" href="/core/app.controls.css">
	<script type="text/javascript" charset="utf-8" src="/HtaPlatform/Core/Form.JsApi"></script>
	<script type="text/javascript" charset="utf-8" src="/core/app.jquery.js"></script>
	<script type="text/javascript" charset="utf-8" src="/core/app.controls.js"></script>
	<style id="ui-style-user" type="text/css"></style>
	<script id="ui-script-user" type="text/javascript"></script>
</head>
<body oncontextmenu="return false;" class="ui-pre-load"><div class="ui-document ui-container" id="ui-document" lang="kr" ui-class="UIForm" ui-id="Form" dock="5" anchor="0b0101" ide-size="1280,1024">
<div class="ui-control ui-panel ui-container" id="ui-171be2e0c07" style="left: 0px; top: 0px; width: 1280px; height: 1024px; right: auto; bottom: auto; z-index: 0; background-color: transparent;" ui-class="UIPanel" ui-id="PN_form" dock="0" anchor="0b0101"><div class="ui-control ui-panel ui-container ui-dock ui-dock-top" id="ui-171be2e0c08" style="left: 0px; top: 0px; width: auto; height: 102px; right: 0px; bottom: auto; z-index: 1; background-color: rgb(23, 107, 200);" ui-class="UIPanel" ui-id="PN_Title" dock="1" anchor="0b0101" dock-r="left:98px;top:1px;width:200px;height:76px;right:auto;bottom:auto" dock-h="102" dock-w="200"><span class="ui-control ui-label" id="ui-171be2e0c09" style='left: 80px; top: 31px; width: 1120px; height: 40px; right: auto; bottom: auto; color: white; font-family: "IBK iDream M"; font-size: 38px; z-index: 0;' ui-class="UILabel" ui-id="LB_title" dock="0" anchor="0b0101"><span class="ui-content">계좌조회</span></span></div><div class="ui-control ui-panel ui-container ui-dock ui-dock-top" id="ui-171be2e0c0a" style="left: 0px; top: 102px; width: auto; height: 92px; right: 0px; bottom: auto; z-index: 3; background-color: whitesmoke;" ui-class="UIPanel" ui-id="PN_Subtitle" dock="1" anchor="0b0101" dock-r="left:0px;top:102px;width:1280px;height:92px;right:auto;bottom:auto" dock-h="92" dock-w="1280"><span class="ui-control ui-label" id="ui-171be2e0c0b" style='left: 82px; top: 30px; width: 1120px; height: 32px; right: auto; bottom: auto; font-family: "IBK iDream L"; font-size: 28px; z-index: 0;' ui-class="UILabel" ui-id="LB_Subtitle" dock="0" anchor="0b0101"><span class="ui-content">계좌정보</span></span></div><div class="ui-control ui-panel ui-container ui-dock ui-dock-bottom" id="ui-171be2e0c0c" style="left: 0px; top: auto; width: auto; height: 140px; right: 0px; bottom: 0px; z-index: 0;" ui-class="UIPanel" ui-id="PN_btn" dock="2" anchor="0b0101" dock-r="left:0px;top:884px;width:1280px;height:140px;right:auto;bottom:auto" dock-h="140" dock-w="1280"><span class="ui-control ui-button theme-orange" id="ui-171aae89da9" style='left: 36px; top: 31px; width: 258px; height: 80px; right: auto; bottom: auto; font-family: "IBK iDream M"; font-size: 32px; z-index: 0;' ui-class="UIButton" ui-id="BT_left" dock="0" anchor="0b0101" xonclick="BT_left_OnClick" theme="orange"><span class="ui-content">닫기</span></span></div><div class="ui-control ui-panel ui-container" id="ui-171be2e0c0e" style="left: 0px; top: 194px; width: 1280px; height: 690px; right: auto; bottom: auto; z-index: 2;" ui-class="UIPanel" ui-id="PN_contents" dock="0" anchor="0b0101"><div class="ui-control ui-panel ui-container" id="ui-1732d01d5b8" style="left: 91px; top: 47px; width: 1109px; height: 611px; right: auto; bottom: auto; z-index: 0;" ui-class="UIPanel" ui-id="PN_exchangeInfo" dock="0" anchor="0b0101"><span class="ui-control ui-label" id="ui-1732d01d5ba" style='left: 0px; top: 0px; width: 1120px; height: 30px; right: auto; bottom: auto; color: rgb(0, 104, 196); font-family: "IBK iDream M"; font-size: 24px; z-index: 0;' ui-class="UILabel" ui-id="LB_productName" dock="0" anchor="0b0101"><span class="ui-content"></span></span><span class="ui-control ui-label" id="ui-1732d01d5bb" style="left: 0px; top: 48px; width: 120px; height: 32px; right: auto; bottom: auto; font-size: 18px; z-index: 1;" ui-class="UILabel" ui-id="LB_label16" dock="0" anchor="0b0101"><span class="ui-content" style="align-items: flex-start;">기본정보</span></span><div class="ui-control ui-table" id="ui-1732d01d5bc" style="border-width: 2px; border-color: rgb(194, 194, 194); left: 0px; top: 77px; width: 1076px; height: 165px; right: auto; bottom: auto; z-index: 2;" ui-class="UITable" ui-id="TL_exchange1_1" dock="0" anchor="0b0101"><table border="0" cellspacing="0" cellpadding="0"><thead><tr><td width="210" type="1" align-v="align-middle" align-h="align-left"></td><td type="1" align-v="align-middle" align-h="align-left"></td></tr></thead><tbody><tr height="33%"><td><div class="ui-table-cell align-left align-middle ui-container" id="ui-173bc974352" style="padding: 0px 0px 0px 20px; font-size: 21px; background-color: rgb(242, 242, 242);"><span class="cell-control-label">카드번호</span></div></td><td><div class="ui-table-cell align-left align-middle ui-container" id="ui-173bc974353" style="padding: 0px 0px 0px 20px; color: rgb(29, 29, 29); font-size: 21px;"></div></td></tr><tr height="33%"><td><div class="ui-table-cell align-left align-middle ui-container" id="ui-173bc974354" style='padding: 0px 0px 0px 20px; font-family: "Noto sans CJK KR", "맑은 고딕", "Arial", "IBK IDream L", "IBK IDream M", "IBK IDream B", "IBK IDream EB", "IBK IDream Symbol", "IBK IWishR"; font-size: 21px; background-color: rgb(242, 242, 242);'><span class="cell-control-label">예금잔액</span></div></td><td><div class="ui-table-cell align-left align-middle ui-container" id="ui-173bc974355" style="padding: 0px 0px 0px 20px; font-size: 22px;"></div></td></tr><tr height="34%"><td><div class="ui-table-cell align-left align-middle ui-container" id="ui-173bc974357" style="padding: 0px 0px 0px 20px; font-size: 21px; background-color: rgb(242, 242, 242);"><span class="cell-control-label">통화코드</span></div></td><td><div class="ui-table-cell align-left align-middle ui-container" id="ui-173bc974358" style="padding: 0px 0px 0px 20px; font-size: 22px; justify-content: flex-start;"></div></td></tr></tbody></table></div><span class="ui-control ui-label" id="ui-1732d01d5bd" style="left: 0px; top: 290px; width: 120px; height: 32px; right: auto; bottom: auto; font-size: 18px; z-index: 3;" ui-class="UILabel" ui-id="LB_label17" dock="0" anchor="0b0101"><span class="ui-content" style="align-items: flex-start;">상세정보</span></span><div class="ui-control ui-table" id="ui-1732d01d5be" style="border-width: 2px; border-color: rgb(194, 194, 194); left: 0px; top: 319px; width: 1076px; height: 217px; right: auto; bottom: auto; z-index: 4;" ui-class="UITable" ui-id="TL_exchange1_2" dock="0" anchor="0b0101"><table border="0" cellspacing="0" cellpadding="0"><thead><tr><td width="210" type="1" align-v="align-middle" align-h="align-left"></td><td type="1" align-v="align-middle" align-h="align-left"></td></tr></thead><tbody><tr height="25%"><td style="border-color: rgb(29, 29, 29);"><div class="ui-table-cell align-left align-middle ui-container" id="ui-173bc974359" style="padding: 0px 0px 0px 20px; font-size: 21px; background-color: rgb(242, 242, 242);"><span class="cell-control-label">회차번호</span></div></td><td><div class="ui-table-cell align-left align-middle ui-container" id="ui-173bc97435a" style="padding: 0px 0px 0px 20px; font-size: 22px;"></div></td></tr><tr height="25%"><td style="border-color: rgb(29, 29, 29);"><div class="ui-table-cell align-left align-middle ui-container" id="ui-173bc97435b" style="padding: 0px 0px 0px 20px; font-size: 21px; background-color: rgb(242, 242, 242);"><span class="cell-control-label">신규일</span></div></td><td><div class="ui-table-cell align-left align-middle ui-container" id="ui-173bc97435c" style="padding: 0px 0px 0px 20px; font-size: 22px;"></div></td></tr><tr height="25%"><td style="border-color: rgb(29, 29, 29);"><div class="ui-table-cell align-left align-middle ui-container" id="ui-173bc97435d" style="padding: 0px 0px 0px 20px; font-size: 21px; background-color: rgb(242, 242, 242);"><span class="cell-control-label">만기일</span></div></td><td><div class="ui-table-cell align-left align-middle ui-container" id="ui-173bc97435e" style="padding: 0px 0px 0px 20px; font-size: 22px;"></div></td></tr><tr height="25%"><td><div class="ui-table-cell align-left align-middle ui-container" id="ui-173bc97435f" style="padding: 0px 0px 0px 20px; font-size: 21px; background-color: rgb(242, 242, 242);"><span class="cell-control-label">최종거래일</span></div></td><td><div class="ui-table-cell align-left align-middle ui-container" id="ui-173bc974360" style="padding: 0px 0px 0px 20px; font-size: 22px;"></div></td></tr></tbody></table></div></div></div></div></div><xcomponent></xcomponent><xjscript><script id='xjscript' type='text/plain'>includeJSS("LibCommon","/KRG/0301/common.js"); // LibUtil import
/*
	#2515 - 외환 계좌정보
*/
let p = parent;

// 닫기버튼
function BT_left_OnClick(e){
	// 전체 계좌조회 - 계좌조회 페이지로 이동
	p.ChangeTab("2511");
}

// 값 전달받았을 경우 실행함수 
function ReceiveTran(obj){
	SetExchangeTableCell(obj); // 외환계좌 조회
}

///////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//
//			외환 - 외화보통
//
///////////////////////////////////////////////////////////////////////////////////////////////////////////////////
function SetExchangeTableCell(obj){
	let rows = obj.list;
	
	// table init
	for(let i=0; i<3; i++){
		TL_exchange1_1.DataCell(i, 1, "text", "");
	}
	for(let i=0; i<4; i++){
		TL_exchange1_2.DataCell(i, 1, "text", "");
	}
	
	if(rows.length > 0){
		let dayArr = ['일','월','화','수','목','금','토'];
		LB_productName.setText(obj.RPRS_PDM); // 상품명
		let account = p.ReturnFormatAccount(obj.info.CUS_ACN.trim()); 		// 계좌번호
		TL_exchange1_1.DataCell(0, 1, "text", account); // 계좌번호
		TL_exchange1_2.DataCell(0, 1, "text", parseInt(obj.info.TOB_NO)); // 계좌번호
		
		let expi = p.ReturnFormatDateHyphen(obj.info.EXPI_YMD) + "(" + dayArr[p.getToDateObj(obj.info.EXPI_YMD).getDay()] + ")"
		TL_exchange1_2.DataCell(2, 1, "text", expi); // 만기일
				
		for(let i=0; i<rows.length; i++){
			let key = rows[i].OTPT_KRN_NM_200.trim();
			let value = rows[i].OTPT_KRN_NM_300.trim().replace('*','');
			console.log(key +" >> "+ value);
			
			// 아래의 컬럼 중 * 표시가 붙어있는 항목은 MMT계좌일 경우 숨김(hide) - 처리필요
			switch(key){
                case "계좌잔액" 				: TL_exchange1_1.DataCell(1, 1, "text", parseInt(value).toLocaleString());		break;  // 계좌잔액
                case "통화명" 				: TL_exchange1_1.DataCell(2, 1, "text", value);									break;	// 통화명
                case "신규일자" 				:																						// 신규일자
                	value = value.replace(/-/g,'.') + "(" + dayArr[p.getToDateObj(value).getDay()] + ")";
                   	TL_exchange1_2.DataCell(1, 1, "text", value);
                   	break;
                case "최종입출년월일" 		: 																						// 최종입출년월일
                	value = value.replace(/-/g,'.') + "(" + dayArr[p.getToDateObj(value).getDay()] + ")";
                   	TL_exchange1_2.DataCell(3, 1, "text", value);
                   	break;
                default	: break;
			}
		}
	}
}
</script></xjscript></body>
</html>
