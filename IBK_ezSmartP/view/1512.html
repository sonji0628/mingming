<!doctype html>
<html version="1000">
<head>
	<meta charset="utf-8">
	<title>ezSmartAtm Builder Form 새문서</title>
	<meta http-equiv="cache-control" content="no-cache">
	<meta http-equiv="pragma" content="no-cache">
	<meta http-equiv="expires" content="0">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<meta name="author" content="[김윤섭][kkobiboy]">
	<link id="ui-style-core" rel="stylesheet" type="text/css" href="/core/app.controls.css">
	<script type="text/javascript" charset="utf-8" src="/HtaPlatform/Core/Form.JsApi"></script>
	<script type="text/javascript" charset="utf-8" src="/core/app.jquery.js"></script>
	<script type="text/javascript" charset="utf-8" src="/core/app.controls.js"></script>
	<style id="ui-style-user" type="text/css"></style>
	<script id="ui-script-user" type="text/javascript"></script>
</head>
<body oncontextmenu="return false;" class="ui-pre-load"><div class="ui-document ui-container" id="ui-document" lang="kr" xonload="Form_OnLoad" ide-size="1451,1161" anchor="0b0101" dock="5" ui-id="Form" ui-class="UIForm">
<div class="ui-control ui-panel ui-container" id="ui-171bfe6fb30" style="left: 0px; top: 0px; width: 1280px; height: 1024px; right: auto; bottom: auto; z-index: 0; background-color: transparent;" anchor="0b0101" dock="0" ui-id="PN_form" ui-class="UIPanel"><div class="ui-control ui-panel ui-container ui-dock ui-dock-top" id="ui-171bfe6fb31" style="left: 0px; top: 0px; width: auto; height: 102px; right: 0px; bottom: auto; z-index: 2; background-color: rgb(23, 107, 200);" anchor="0b0101" dock="1" ui-id="PN_Title" ui-class="UIPanel" dock-w="200" dock-h="102" dock-r="left:98px;top:1px;width:200px;height:76px;right:auto;bottom:auto"><span class="ui-control ui-label" id="ui-171bfe6fb32" style='left: 80px; top: 31px; width: 1120px; height: 40px; right: auto; bottom: auto; color: white; font-family: "IBK iDream M"; font-size: 38px; z-index: 0;' anchor="0b0101" dock="0" ui-id="LB_title" ui-class="UILabel"><span class="ui-content">출금/이체 한도금액 설정</span></span></div><div class="ui-control ui-panel ui-container ui-dock ui-dock-top" id="ui-171bfe6fb33" style="left: 0px; top: 102px; width: auto; height: 92px; right: 0px; bottom: auto; z-index: 3; background-color: whitesmoke;" anchor="0b0101" dock="1" ui-id="PN_Subtitle" ui-class="UIPanel" dock-w="1280" dock-h="92" dock-r="left:0px;top:102px;width:1280px;height:92px;right:auto;bottom:auto"><span class="ui-control ui-label" id="ui-171bfe6fb34" style='left: 82px; top: 30px; width: 1120px; height: 32px; right: auto; bottom: auto; font-family: "IBK iDream L"; font-size: 28px; z-index: 0;' anchor="0b0101" dock="0" ui-id="LB_Subtitle" ui-class="UILabel"><span class="ui-content">무매체 거래 시 출금/이체 한도금액을 설정하여 주십시오.</span></span></div><div class="ui-control ui-panel ui-container ui-dock ui-dock-bottom" id="ui-171bfe6fb35" style="left: 0px; top: auto; width: auto; height: 140px; right: 0px; bottom: 0px; z-index: 1;" anchor="0b0101" dock="2" ui-id="PN_btn" ui-class="UIPanel" dock-w="1280" dock-h="140" dock-r="left:0px;top:884px;width:1280px;height:140px;right:auto;bottom:auto"><span class="ui-control ui-button theme-orange" id="ui-171bfe6fb36" style='left: 36px; top: 31px; width: 258px; height: 80px; right: auto; bottom: auto; font-family: "IBK iDream M"; font-size: 32px; z-index: 0;' anchor="0b0101" dock="0" ui-id="BT_left" ui-class="UIButton" theme="orange" xonclick="BT_left_OnClick"><span class="ui-content">취소</span></span><span disabled="disabled" class="ui-control ui-button theme-blue ui-disabled" id="ui-171bff71c97" style='left: auto; top: 31px; width: 258px; height: 80px; right: 36px; bottom: auto; font-family: "IBK iDream M"; font-size: 32px; z-index: 1;' anchor="0b1001" dock="0" ui-id="BT_right" ui-class="UIButton" theme="blue" xonclick="BT_right_OnClick"><span class="ui-content">확인</span></span></div><div class="ui-control ui-panel ui-container ui-dock ui-dock-fill" id="ui-174046c86ed" style="left: 0px; top: 0px; width: auto; height: auto; right: 0px; bottom: 0px; z-index: 0;" anchor="0b0101" dock="5" ui-id="PN_contents" ui-class="UIPanel" dock-w="200" dock-h="100" dock-r="left:242.63px;top:269.83px;width:200px;height:100px;right:auto;bottom:auto"><span class="ui-control ui-label" id="ui-171bfe6fb39" style="left: 134px; top: 332px; width: 331px; height: 32px; right: auto; bottom: auto; color: rgb(2, 111, 206); font-size: 28px; z-index: 2;" anchor="0b0101" dock="0" ui-id="LB_label25" ui-class="UILabel"><span class="ui-content">1회 출금한도 금액설정</span></span><span class="ui-control ui-textbox" id="ui-171bfe6fb37" style='left: 133px; top: 379px; width: 475px; height: 100px; right: auto; bottom: auto; font-family: "IBK IDream M"; font-size: 48px; z-index: 0;' anchor="0b0101" dock="0" ui-id="TB_withdraw" ui-class="UITextBox" xonclick="TB_withdraw_OnClick"><span><input class="ui-input" style="text-align: right;" type="text" maxlength="3" value=""></span></span><span class="ui-control ui-label" id="ui-171bfe7c2a0" style='left: 537px; top: 414px; width: 34px; height: 40px; right: auto; bottom: auto; font-family: "IBK IDream M"; font-size: 36px; z-index: 7;' anchor="0b0101" dock="0" ui-id="LB_label27" ui-class="UILabel"><span class="ui-content">원</span></span><span class="ui-control ui-label" id="ui-171bff58114" style="left: 134px; top: 528px; width: 331px; height: 32px; right: auto; bottom: auto; color: rgb(2, 111, 206); font-size: 28px; z-index: 3;" anchor="0b0101" dock="0" ui-id="LB_label34" ui-class="UILabel"><span class="ui-content">1회 이체한도 금액설정</span></span><span class="ui-control ui-textbox" id="ui-171bff5813a" style='left: 134px; top: 575px; width: 475px; height: 100px; right: auto; bottom: auto; font-family: "IBK IDream M"; font-size: 48px; z-index: 4;' anchor="0b0101" dock="0" ui-id="TB_transfer" ui-class="UITextBox" xonclick="TB_transfer_OnClick"><span><input class="ui-input" style="text-align: right;" type="text" maxlength="3" value=""></span></span><span class="ui-control ui-label" id="ui-171bff58152" style='left: 537px; top: 610px; width: 34px; height: 40px; right: auto; bottom: auto; font-family: "IBK IDream M"; font-size: 36px; z-index: 8;' anchor="0b0101" dock="0" ui-id="LB_label35" ui-class="UILabel"><span class="ui-content">원</span></span><span class="ui-control ui-label" id="ui-171bff615bc" style="left: 135px; top: 692px; width: 447px; height: 32px; right: auto; bottom: auto; color: rgb(244, 84, 8); font-size: 22px; z-index: 5;" anchor="0b0101" dock="0" ui-id="LB_label36" ui-class="UILabel"><span class="ui-content">* 1일 출금/이체 한도 금액 설정 : 최대 100만원</span></span><span class="ui-control ui-label" id="ui-1734ab4329c" style="left: 135px; top: 720px; width: 447px; height: 32px; right: auto; bottom: auto; color: rgb(244, 84, 8); font-size: 22px; z-index: 6;" anchor="0b0101" dock="0" ui-id="LB_label1" ui-class="UILabel"><span class="ui-content">* 1일 출금/이체 한도액을 초과했습니다.</span></span><div class="ui-control ui-numberpad fixed" id="ui-171bfe6fb38" style="left: 714px; top: 318px; width: 352px; height: 487px; right: auto; bottom: auto; z-index: 1;" anchor="0b0101" dock="0" ui-id="NP_numberpad1" ui-class="UINumberPad" xonkeyclick="NP_numberpad1_OnKeyClick"><table class="fixed" border="0" cellspacing="0" cellpadding="0"><tbody><tr><td key="1"><div>1</div></td><td key="2"><div>2</div></td><td key="3"><div>3</div></td></tr><tr><td key="4"><div>4</div></td><td key="5"><div>5</div></td><td key="6"><div>6</div></td></tr><tr><td key="7"><div>7</div></td><td key="8"><div>8</div></td><td key="9"><div>9</div></td></tr><tr><td class="fix backspace" key=""><div></div></td><td key="0"><div>0</div></td><td class="fix clear" key="정정"><div>정정</div></td></tr></tbody></table><table class="shuffle" border="0" cellspacing="0" cellpadding="0"><tbody><tr><td key="1"><div>1</div></td><td key="5"><div>5</div></td><td key="0"><div>0</div></td><td key="6"><div>6</div></td></tr><tr><td class="key-empty" key=""><div></div></td><td key="9"><div>9</div></td><td key="2"><div>2</div></td><td key="3"><div>3</div></td></tr><tr><td key="4"><div>4</div></td><td key="7"><div>7</div></td><td key="8"><div>8</div></td><td class="key-empty" key=""><div></div></td></tr><tr><td class="fix shuffle" colspan="2"><div>재배열</div></td><td class="fix backspace" key="backspace"><div></div></td><td class="fix clear" key="clear"><div>정정</div></td></tr></tbody></table></div><span class="ui-control ui-label" id="ui-17567e785cb" style='left: 501px; top: 414px; width: 34px; height: 40px; right: auto; bottom: auto; font-family: "IBK IDream M"; font-size: 36px; z-index: 9;' anchor="0b0101" dock="0" ui-id="LB_label3" ui-class="UILabel"><span class="ui-content">만</span></span><span class="ui-control ui-label" id="ui-17567e85d41" style='left: 501px; top: 610px; width: 34px; height: 40px; right: auto; bottom: auto; font-family: "IBK IDream M"; font-size: 36px; z-index: 10;' anchor="0b0101" dock="0" ui-id="LB_label4" ui-class="UILabel"><span class="ui-content">만</span></span></div></div></div><xcomponent></xcomponent><xjscript><script id='xjscript' type='text/plain'>includeJSS("common","/KRG/0301/common.js");
var moneyBox = TB_withdraw;
let p = parent;

function Form_OnLoad(e){
	
	TB_withdraw.$.find('>span >.ui-input').attr("disabled","disabled");
	TB_transfer.$.find('>span >.ui-input').attr("disabled","disabled");
	
	NP_numberpad1.$.find(".backspace").attr("key","backspace");
	com.numberpad.btnDisabled(NP_numberpad1);
	LB_label1.$.css("display","none");
	
	TB_withdraw.$.find('span').focus();
	TB_withdraw.$.find('span > .ui-input').css({'padding-right':'25%'});
	TB_withdraw.$.find('span > .ui-input').attr('placeholder','입 력 해 주 세 요');
	TB_transfer.$.find('span > .ui-input').css({'padding-right':'25%'});
	TB_transfer.$.find('span > .ui-input').attr('placeholder','입 력 해 주 세 요');
	//PN_panel8.$.find('input').css({'padding-right':'80px','font-family':'"IBK IDream B"'});
	
	moneyBox.$.css("border","3px solid #046fd9"); 
}

function resetAmountText() {
	TB_withdraw.Text = "";
	TB_transfer.Text = "";
	com.numberpad.btnDisabled(NP_numberpad1);
}
function NP_numberpad1_OnKeyClick(e){
	
	if(e.key == "정정"){
		e.key='';
		moneyBox.Text = moneyBox.Text.replace(moneyBox.Text,"");
	}
	else if( e.key == "backspace"){
		e.key='';
		moneyBox.Text = NP_numberpad1.autoComma(moneyBox.Text.substring ( 0, moneyBox.Text.length -1));	
	} else {
		if(moneyBox.Text == '0') {
			if(e.key == '0') {
				moneyBox.Text = '0';
			} else {
				moneyBox.Text += e.key;
				moneyBox.Text = NP_numberpad1.autoComma(moneyBox.Text);
			}
		} else {
			moneyBox.Text += e.key;
			moneyBox.Text = NP_numberpad1.autoComma(moneyBox.Text);
		}
	}
	
	//글자수 제한
	if(moneyBox.Text.length == 0){
		LB_label1.$.css("display","none");
		com.numberpad.notMaxLength(NP_numberpad1);
		com.numberpad.btnDisabled(NP_numberpad1);
	} else if(moneyBox.Text.length > 0 && moneyBox.Text.length < 3){
		com.numberpad.notMaxLength(NP_numberpad1);
	} else if(moneyBox.Text.length == 3) {
		if(moneyBox.Text.substring (0,1) == 0) {
			moneyBox.Text = moneyBox.Text.substring ( 2, moneyBox.Text.length);
			
		} else {
			com.numberpad.maxLength(NP_numberpad1);
		}
	}
	
	if(parseInt(removeComma(TB_withdraw.Text)) > 100 || parseInt(removeComma(TB_transfer.Text)) > 100) {
		LB_label1.$.css("display","");
		BT_right.Enabled = false;
	} else {
		if(com.util.isNull(TB_withdraw.Text) === false && com.util.isNull(TB_transfer.Text)  === false){
			BT_right.Enabled = true;
			LB_label1.$.css("display","none");
		} else {
			BT_right.Enabled = false;
		}
	}
} 

function BT_right_OnClick(e){
	p.allParamData.NOMD_ATM_DWLM_AMT = parseInt(removeComma(TB_withdraw.Text))*10000;	// 1일 출금한도
	p.allParamData.NOMD_ATM_TRLM_AMT = parseInt(removeComma(TB_transfer.Text))*10000;	// 1일 이체한도
	
	SCREEN.WriteJnl("**1일 출금한도: " + p.allParamData.NOMD_ATM_DWLM_AMT);
	SCREEN.WriteJnl("**1일 이체한도: " + p.allParamData.NOMD_ATM_TRLM_AMT);
	SCREEN.WriteJnl("[한도금액 설정] 정상");
	
	// 바이오인증으로 가야함
	p.ChangeTab("9041");
	
	//	테스트 용
	/*p.ChangeTab("9059")
	if(p.allParamData.tranFlag == "1") {		// 무매체 등록
		p.sendRequest("send1Info");	
	} else if(p.allParamData.tranFlag == "3") {	// 무매체 한도변경
		p.sendRequest("send3Info");	
	}*/
	//
	
}

function TB_withdraw_OnClick(e){
	TB_transfer.$.css("border","2px solid #9e9e9e");
	moneyBox = TB_withdraw;
	moneyBox.$.css("border","3px solid #046fd9");
	if(moneyBox.Text.length == 0) {
		com.numberpad.notMaxLength(NP_numberpad1);
		com.numberpad.btnDisabled(NP_numberpad1);
	} else if(moneyBox.Text.length > 0 && moneyBox.Text.length < 9) {
		com.numberpad.notMaxLength(NP_numberpad1);
	} else if(moneyBox.Text.length == 9) {
		com.numberpad.maxLength(NP_numberpad1);
	}
}

function TB_transfer_OnClick(e){	
	TB_withdraw.$.css("border","2px solid #9e9e9e");
	moneyBox = TB_transfer;
	moneyBox.$.css("border","3px solid #046fd9");
	if(moneyBox.Text.length == 0) {
		com.numberpad.notMaxLength(NP_numberpad1);
		com.numberpad.btnDisabled(NP_numberpad1);
	} else if(moneyBox.Text.length > 0 && moneyBox.Text.length < 9) {
		com.numberpad.notMaxLength(NP_numberpad1);
	} else if(moneyBox.Text.length == 9) {
		com.numberpad.maxLength(NP_numberpad1);
	}
}



function removeComma(str)
{
	n = parseInt(str.replace(/,/g,""));
	return n;
}

// 거래종료_S
function BT_left_OnClick(e){
	SCREEN.WriteJnl("[한도금액 설정] 취소");
	
	ATMCOMM.BusinessEnd(ATMCOMM.RET_CAN);	//	고객이 취소
}
// 거래종료_E</script></xjscript></body>
</html>
