<!doctype html>
<html version="1000">
<head>
	<meta charset="utf-8">
	<title>ezSmartAtm Builder Form 새문서</title>
	<meta http-equiv="cache-control" content="no-cache">
	<meta http-equiv="pragma" content="no-cache">
	<meta http-equiv="expires" content="0">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<meta name="author" content="[김윤섭][kkobiboy]">
	<link id="ui-style-core" rel="stylesheet" type="text/css" href="/core/app.controls.css">
	<script type="text/javascript" charset="utf-8" src="/HtaPlatform/Core/Form.JsApi"></script>
	<script type="text/javascript" charset="utf-8" src="/core/app.jquery.js"></script>
	<script type="text/javascript" charset="utf-8" src="/core/app.controls.js"></script>
	<style id="ui-style-user" type="text/css"></style>
	<script id="ui-script-user" type="text/javascript"></script>
</head>
<body oncontextmenu="return false;" class="ui-pre-load"><div class="ui-document ui-container" id="ui-document" lang="kr" ui-class="UIForm" ui-id="Form" dock="5" anchor="0b0101" ide-size="1389,1120" xonload="Form_OnLoad">
<div class="ui-control ui-panel ui-container" id="ui-171be2e0c07" style="left: 0px; top: 0px; width: 1280px; height: 1024px; right: auto; bottom: auto; z-index: 0; background-color: transparent;" ui-class="UIPanel" ui-id="PN_form" dock="0" anchor="0b0101"><div class="ui-control ui-panel ui-container ui-dock ui-dock-top" id="ui-171be2e0c08" style="left: 0px; top: 0px; width: auto; height: 102px; right: 0px; bottom: auto; z-index: 0; background-color: rgb(23, 107, 200);" ui-class="UIPanel" ui-id="PN_Title" dock="1" anchor="0b0101" dock-w="200" dock-h="102" dock-r="left:98px;top:1px;width:200px;height:76px;right:auto;bottom:auto"><span class="ui-control ui-label" id="ui-171be2e0c09" style='left: 80px; top: 31px; width: 1120px; height: 40px; right: auto; bottom: auto; color: white; font-family: "IBK iDream M"; font-size: 38px; z-index: 0;' ui-class="UILabel" ui-id="LB_title" dock="0" anchor="0b0101"><span class="ui-content">포인트조회/사용신청</span></span></div><div class="ui-control ui-panel ui-container ui-dock ui-dock-top" id="ui-171be2e0c0a" style="left: 0px; top: 102px; width: auto; height: 92px; right: 0px; bottom: auto; z-index: 1; background-color: rgb(239, 240, 242);" ui-class="UIPanel" ui-id="PN_Subtitle" dock="1" anchor="0b0101" dock-w="1280" dock-h="92" dock-r="left:0px;top:102px;width:1280px;height:92px;right:auto;bottom:auto"><span class="ui-control ui-label" id="ui-171be2e0c0b" style='left: 82px; top: 30px; width: 573px; height: 43px; right: auto; bottom: auto; font-family: "IBK iDream L"; font-size: 32px; z-index: 0;' ui-class="UILabel" ui-id="LB_Subtitle" dock="0" anchor="0b0101"><span class="ui-content">대한항공 마일리지 전환</span></span></div><div class="ui-control ui-panel ui-container ui-dock ui-dock-bottom" id="ui-172729dbaaf" style="left: 0px; top: auto; width: auto; height: 140px; right: 0px; bottom: 0px; z-index: 2;" ui-class="UIPanel" ui-id="PN_btn" dock="2" anchor="0b0101" dock-w="1280" dock-h="140" dock-r="left:0px;top:884px;width:1280px;height:140px;right:auto;bottom:auto"><span class="ui-control ui-button theme-orange" id="ui-172729e45a9" style='left: 36px; top: 31px; width: 258px; height: 80px; right: auto; bottom: auto; font-family: "IBK iDream M"; font-size: 32px; z-index: 0;' ui-class="UIButton" ui-id="BT_left" dock="0" anchor="0b0101" xonclick="BT_left_OnClick" theme="orange"><span class="ui-content">취소</span></span><span class="ui-control ui-button theme-blue" id="ui-172729ea59d" style='left: auto; top: 31px; width: 258px; height: 80px; right: 36px; bottom: auto; font-family: "IBK iDream M"; font-size: 32px; z-index: 1;' ui-class="UIButton" ui-id="BT_right" dock="0" anchor="0b1001" xonclick="BT_right_OnClick" theme="blue"><span class="ui-content">확인</span></span></div><div class="ui-control ui-panel ui-container ui-dock ui-dock-fill" id="ui-172729f3b0f" style="left: 0px; top: 194px; width: auto; height: auto; right: 0px; bottom: 140px; z-index: 3;" ui-class="UIPanel" ui-id="PN_contents" dock="5" anchor="0b0101" dock-w="1280" dock-h="100" dock-r="left:0px;top:194px;width:1280px;height:100px;right:auto;bottom:auto"><div class="ui-control ui-panel ui-container" id="ui-171a4b083d4" style="left: 81px; top: 270px; width: 1121px; height: 1px; right: auto; bottom: auto; z-index: 0; background-color: rgb(178, 178, 178);" ui-class="UIPanel" ui-id="PN_panel25" dock="0" anchor="0b0101"></div><span class="ui-control ui-label" id="ui-172c00c6687" style='left: 83px; top: 302px; width: 441px; height: 29px; right: auto; bottom: auto; color: rgb(23, 107, 200); font-family: "IBK iDream M"; font-size: 24px; z-index: 1;' ui-class="UILabel" ui-id="LB_label1" dock="0" anchor="0b0101"><span class="ui-content">포인트 보유현황</span></span><div class="ui-control ui-table" id="ui-172c12f7fc6" style="border-width: 2px; border-color: rgb(194, 194, 194); left: 83px; top: 338px; width: 1121px; height: 180px; right: auto; bottom: auto; z-index: 2;" ui-class="UITable" ui-id="TL_table_pt_use" dock="0" anchor="0b0101"><table border="0" cellspacing="0" cellpadding="0"><thead><tr><td width="270" type="1" align-h="align-left" align-v="align-middle"></td><td type="1" align-h="align-left" align-v="align-middle"></td></tr></thead><tbody><tr height="33%"><td><div class="ui-table-cell align-left align-middle ui-container" id="ui-172c12f7fc8" style="padding: 0px 0px 0px 20px; font-size: 21px; background-color: rgb(242, 242, 242);"><span class="cell-control-label">전환 가능 포인트</span></div></td><td><div class="ui-table-cell align-left align-middle ui-container" id="ui-172c12f7fc9" style="padding: 0px 20px; font-size: 22px; justify-content: flex-start;"><span class="cell-control-label">0</span></div></td></tr><tr height="33%"><td><div class="ui-table-cell align-left align-middle ui-container" id="ui-172c12f7fca" style="padding: 0px 0px 0px 20px; font-size: 21px; background-color: rgb(242, 242, 242);"><span class="cell-control-label">전환 신청 포인트</span></div></td><td><div class="ui-table-cell align-left align-middle ui-container" id="ui-172c12f7fcb" style="padding: 0px 20px; font-size: 22px; justify-content: flex-start;"><span class="ui-control ui-textbox" id="ui-172c13403e9" style="left: 7px; top: 4px; width: 820px; height: 48px; right: auto; bottom: auto; font-size: 18px; z-index: 0;" ui-class="UITextBox" ui-id="TB_textbox_point" dock="0" anchor="0b0101" xonclick="TB_textbox_point_OnClick"><span><input class="ui-input" style="text-align: left;" type="text" maxlength="32767" value=""></span></span></div></td></tr><tr height="34%"><td><div class="ui-table-cell align-left align-middle ui-container" id="ui-172c12f7fcc" style="padding: 0px 0px 0px 20px; font-size: 21px; background-color: rgb(242, 242, 242);"><span class="cell-control-label">잔여 포인트</span></div></td><td><div class="ui-table-cell align-left align-middle ui-container" id="ui-172c12f7fcd" style="padding: 0px 20px; font-size: 22px; justify-content: flex-start;"><span class="cell-control-label">0</span></div></td></tr></tbody></table></div><span class="ui-control ui-label" id="ui-171770ca3a5" style='left: 81px; top: 38px; width: 1121px; height: 38px; right: auto; bottom: auto; font-family: "Noto sans CJK KR", "맑은 고딕", "Arial", "IBK IDream L", "IBK IDream M", "IBK IDream B", "IBK IDream EB", "IBK IDream Symbol", "IBK IWishR"; font-size: 18px; z-index: 3;' ui-class="UILabel" ui-id="LB_text" dock="0" anchor="0b0101"><span class="ui-content" style="left: 45px; top: 0px; right: 0px; bottom: 0px;">대한항공 마일리지 전환 신청은 최소 30,000포인트 이상 보유 시 신청 가능합니다.</span><span class="ui-icon-image" style='background-position: left; background-image: url("/KRG/media/ic_note.png");'></span></span><span class="ui-control ui-label" id="ui-172bfd08218" style='left: 81px; top: 74px; width: 1121px; height: 34px; right: auto; bottom: auto; font-family: "Noto sans CJK KR", "맑은 고딕", "Arial", "IBK IDream L", "IBK IDream M", "IBK IDream B", "IBK IDream EB", "IBK IDream Symbol", "IBK IWishR"; font-size: 18px; z-index: 4;' ui-class="UILabel" ui-id="LB_label3" dock="0" anchor="0b0101"><span class="ui-content" style="left: 45px; top: 0px; right: 0px; bottom: 0px;">단,TOP포인트 충전 또는 타사 전환으로 적립한 포인트는 대한항공 마일리지 전환이 불가합니다.</span></span><span class="ui-control ui-label" id="ui-172c00a16b6" style='left: 81px; top: 110px; width: 1121px; height: 48px; right: auto; bottom: auto; font-family: "Noto sans CJK KR", "맑은 고딕", "Arial", "IBK IDream L", "IBK IDream M", "IBK IDream B", "IBK IDream EB", "IBK IDream Symbol", "IBK IWishR"; font-size: 18px; z-index: 5;' ui-class="UILabel" ui-id="LB_label4" dock="0" anchor="0b0101"><span class="ui-content" style="left: 45px; top: 0px; right: 0px; bottom: 0px;">대한항공 마일리지는 TOP포인트 20포인트당 1마일로 전환되며, 최저 사용포인트는 30,000포인트(1,500마일리지)부터<br>2,000포인트 단위로 신청 가능합니다.</span></span><span class="ui-control ui-label" id="ui-172c5cd3609" style='left: 81px; top: 160px; width: 1121px; height: 34px; right: auto; bottom: auto; font-family: "Noto sans CJK KR", "맑은 고딕", "Arial", "IBK IDream L", "IBK IDream M", "IBK IDream B", "IBK IDream EB", "IBK IDream Symbol", "IBK IWishR"; font-size: 18px; z-index: 6;' ui-class="UILabel" ui-id="LB_label5" dock="0" anchor="0b0101"><span class="ui-content" style="left: 45px; top: 0px; right: 0px; bottom: 0px;">대한항공 마일리지는 연간 최대 1만 마일리지까지 전환 가능합니다.</span></span><span class="ui-control ui-label" id="ui-172c5ce1da8" style='left: 81px; top: 196px; width: 1121px; height: 34px; right: auto; bottom: auto; font-family: "Noto sans CJK KR", "맑은 고딕", "Arial", "IBK IDream L", "IBK IDream M", "IBK IDream B", "IBK IDream EB", "IBK IDream Symbol", "IBK IWishR"; font-size: 18px; z-index: 7;' ui-class="UILabel" ui-id="LB_label6" dock="0" anchor="0b0101"><span class="ui-content" style="left: 45px; top: 0px; right: 0px; bottom: 0px;">대한항공 마일리지 전환 시 익월 10일 전후로 적용됩니다.</span></span></div></div></div><xcomponent></xcomponent><xjscript><script id='xjscript' type='text/plain'>// common.js import
importJSS("common", "common.js");

var p = parent;

function Form_OnLoad(e){
LB_label4.$.css('line-height','22px')
}


// 대한항공 마일리지 전환 가능 포인트 정보 셋팅
function airPointInfo()
{
	const cardInfoAvailablePoint = p.G_cardInfoAvailablePointTopStep3;
   	const cardInfoSelectPoint    = p.G_cardInfoSelectPointStep4_2;    

   	console.log("cardInfoAvailablePoint >>>> " + cardInfoAvailablePoint ); 	     
   	console.log("cardInfoSelectPoint >>>> " + cardInfoSelectPoint ); 	     
   	console.log("G_searchInfoTopStep4 >>>> " + p.G_searchInfoTopStep4 ); 
      
   	if(p.G_searchInfoTopStep4 == true) // 처음 화면 진입이 아닐 경우
   	{
   		// 전환 가능 포인트 셋팅
	  	TL_table_pt_use.DataCell(0,1,"text",com.util.fnGetFormatMoney(cardInfoAvailablePoint));
   	      
	  	if(!com.util.isNull(cardInfoSelectPoint)) // 사용할(입력한) 포인트가 있으면....
	  	{  	   	 
	  		let $table_pt_use = $("div[ui-id='TL_table_pt_use']");
		 	$table_pt_use.find("> table > tbody > tr:eq(1)").find("> td:eq(1) > div > span[ui-id='TB_textbox_point'] > span > input[type=text]")
													     	.attr("placeholder","최소30,000부터 신청가능. 2,000단위로 추가")
													     	.css('font-size','22px')
													     	.val(com.util.fnGetFormatMoney(cardInfoSelectPoint));
		}
		else // 사용할(입력한) 포인트가 없으면.... 
		{ 
			let $table_pt_use = $("div[ui-id='TL_table_pt_use']");
		 	$table_pt_use.find("> table > tbody > tr:eq(1)").find("> td:eq(1) > div > span[ui-id='TB_textbox_point'] > span > input[type=text]")
		 												 	.attr("placeholder","최소30,000부터 신청가능. 2,000단위로 추가")
		 												 	.css('font-size','22px')
													     	.val("");
	  	}
	  
      	// 30000이 최소 사용포인트이므로, 아래일 경우 버튼 비활성화
      	if( parseInt(cardInfoSelectPoint) < 30000 )
      	{
      		BT_right.Enabled = false;
      	} 
      	else 
      	{
      		BT_right.Enabled = true;
      	}
		
	  	// 사용하고 남을 포인트 계산(잔여포인트 셋팅)
	 	if(!com.util.isNull(cardInfoSelectPoint))
	 	{  
			// 잔여 포인트	
			TL_table_pt_use.DataCell(2,1,"text",com.util.fnGetFormatMoney(parseInt(cardInfoAvailablePoint) - parseInt(cardInfoSelectPoint)));			
	 	} 
	 	else
	 	{
			// 잔여 포인트	
	    	TL_table_pt_use.DataCell(2,1,"text",com.util.fnGetFormatMoney(cardInfoAvailablePoint));			
	 	}
	 } 
	 else 
	 { // 처음 화면 진입시     
   
	 	// 포인트 사용신청 - 현금캐시백(대한항공 마일리지) 화면 진입 전역변수 true 셋팅
     	p.G_searchInfoTopStep4 = true;            
      
     	// 전환 가능 포인트 셋팅
	 	TL_table_pt_use.DataCell(0,1,"text",com.util.fnGetFormatMoney(cardInfoAvailablePoint));
	
	 	// 잔여 포인트 셋팅
	 	TL_table_pt_use.DataCell(2,1,"text",com.util.fnGetFormatMoney(cardInfoAvailablePoint));
	  
	 	// 전환 신청 포인트
	 	let $table_pt_use = $("div[ui-id='TL_table_pt_use']");
	 	$table_pt_use.find("> table > tbody > tr:eq(1)").find("> td:eq(1) > div > span[ui-id='TB_textbox_point'] > span > input[type=text]")
												     	.attr("placeholder","최소30,000부터 신청가능. 2,000단위로 추가")
												     	.css('font-size','22px')
												     	.val("");
	
	 	BT_right.Enabled = false;
	  
   	} // end if - G_searchInfoTopStep4
}


function TB_textbox_point_OnClick(e){
   	// 포인트 사용신청 - 포인트 입력패드 화면 조회
   	p.sendRequest("step4_2_point_com_numpad");   
}

function BT_left_OnClick(e){
	SCREEN.WriteJnl("[대한항공 마일리지 전환] 취소");
   	ATMCOMM.BusinessEnd(ATMCOMM.RET_CAN);
}

function BT_right_OnClick(e){
   // 포인트 사용신청 - 현금캐시백 사용(대한항공 마일리지 전환) 신청 진행 안내 화면 조회
   	SCREEN.WriteJnl("[카드 포인트 상세조회] 선택");
   	p.sendRequest("step5_point_guide");   
}</script></xjscript></body>
</html>
