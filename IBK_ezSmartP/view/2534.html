<!doctype html>
<html version="1000">
<head>
	<meta charset="utf-8">
	<title>ezSmartAtm Builder Form 새문서</title>
	<meta http-equiv="cache-control" content="no-cache">
	<meta http-equiv="pragma" content="no-cache">
	<meta http-equiv="expires" content="0">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<meta name="author" content="[김윤섭][kkobiboy]">
	<link id="ui-style-core" rel="stylesheet" type="text/css" href="/core/app.controls.css">
	<script type="text/javascript" charset="utf-8" src="/HtaPlatform/Core/Form.JsApi"></script>
	<script type="text/javascript" charset="utf-8" src="/core/app.jquery.js"></script>
	<script type="text/javascript" charset="utf-8" src="/core/app.controls.js"></script>
	<style id="ui-style-user" type="text/css"></style>
	<script id="ui-script-user" type="text/javascript"></script>
</head>
<body oncontextmenu="return false;" class="ui-pre-load"><div class="ui-document ui-container" id="ui-document" lang="kr" xonload="Form_OnLoad" ui-class="UIForm" ui-id="Form" dock="5" anchor="0b0101" ide-size="1394,1057">
<div class="ui-control ui-panel ui-container" id="ui-171a52210e0" style="left: 0px; top: 0px; width: 1280px; height: 1024px; right: auto; bottom: auto; z-index: 0; background-color: transparent;" ui-class="UIPanel" ui-id="PN_form" dock="0" anchor="0b0101"><div class="ui-control ui-panel ui-container ui-dock ui-dock-top" id="ui-171a52210e2" style="left: 0px; top: 0px; width: auto; height: 102px; right: 0px; bottom: auto; z-index: 1; background-color: rgb(23, 107, 200);" ui-class="UIPanel" ui-id="PN_Title" dock="1" anchor="0b0101" dock-w="200" dock-h="102" dock-r="left:98px;top:1px;width:200px;height:76px;right:auto;bottom:auto"><span class="ui-control ui-label" id="ui-171a52210e3" style='left: 80px; top: 31px; width: 1134px; height: 45px; right: auto; bottom: auto; color: white; font-family: "IBK iDream M"; font-size: 38px; z-index: 0;' ui-class="UILabel" ui-id="LB_title" dock="0" anchor="0b0101"><span class="ui-content">금액 입력</span></span></div><div class="ui-control ui-panel ui-container ui-dock ui-dock-top" id="ui-171a52210e4" style="left: 0px; top: 102px; width: auto; height: 112px; right: 0px; bottom: auto; z-index: 5; background-color: whitesmoke;" ui-class="UIPanel" ui-id="PN_Subtitle" dock="1" anchor="0b0101" dock-w="1280" dock-h="112" dock-r="left:0px;top:102px;width:1280px;height:92px;right:auto;bottom:auto"><span class="ui-control ui-label" id="ui-171a52210e5" style='left: 82px; top: 22px; width: 1139px; height: 34px; right: auto; bottom: auto; font-family: "IBK iDream L"; font-size: 28px; z-index: 0;' ui-class="UILabel" ui-id="LB_Subtitle" dock="0" anchor="0b0101"><span class="ui-content" style="align-items: center;">설정하실 통지 금액을 입력해주십시오.</span></span></div><div class="ui-control ui-panel ui-container ui-dock ui-dock-bottom" id="ui-171a52210e8" style="left: 0px; top: auto; width: auto; height: 140px; right: 0px; bottom: 0px; z-index: 0;" ui-class="UIPanel" ui-id="PN_btn" dock="2" anchor="0b0101" dock-w="1280" dock-h="140" dock-r="left:0px;top:884px;width:1280px;height:140px;right:auto;bottom:auto"><span disabled="disabled" class="ui-control ui-button theme-blue ui-disabled" id="ui-171a52210e9" style='left: auto; top: 31px; width: 258px; height: 80px; right: 36px; bottom: auto; font-family: "IBK iDream M"; font-size: 32px; z-index: 0;' ui-class="UIButton" ui-id="BT_right" dock="0" anchor="0b1001" theme="blue" xonclick="BT_right_OnClick"><span class="ui-content">확인</span></span><span class="ui-control ui-button theme-orange" id="ui-171a52210ea" style='left: 36px; top: 31px; width: 258px; height: 80px; right: auto; bottom: auto; font-family: "IBK iDream M"; font-size: 32px; z-index: 1;' ui-class="UIButton" ui-id="BT_left" dock="0" anchor="0b0101" theme="orange" xonclick="BT_left_OnClick"><span class="ui-content">닫기</span></span></div><span class="ui-control ui-textbox" id="ui-171a52210eb" style='left: 134px; top: 496px; width: 475px; height: 100px; right: auto; bottom: auto; font-family: "IBK IDream M"; font-size: 48px; z-index: 2;' ui-class="UITextBox" ui-id="TB_amount" dock="0" anchor="0b0101"><span><input class="ui-input" style="text-align: right;" type="text" maxlength="6" value=""></span></span><div class="ui-control ui-numberpad fixed" id="ui-171a5226656" style="left: 714px; top: 318px; width: 352px; height: 487px; right: auto; bottom: auto; z-index: 3;" ui-class="UINumberPad" ui-id="NP_numberpad1" dock="0" anchor="0b0101" xonkeyclick="NP_numberpad1_OnKeyClick"><table class="fixed" border="0" cellspacing="0" cellpadding="0"><tbody><tr><td key="1"><div>1</div></td><td key="2"><div>2</div></td><td key="3"><div>3</div></td></tr><tr><td key="4"><div>4</div></td><td key="5"><div>5</div></td><td key="6"><div>6</div></td></tr><tr><td key="7"><div>7</div></td><td key="8"><div>8</div></td><td key="9"><div>9</div></td></tr><tr><td class="fix backspace" key=""><div></div></td><td key="0"><div>0</div></td><td class="fix clear" key="정정"><div>정정</div></td></tr></tbody></table><table class="shuffle" border="0" cellspacing="0" cellpadding="0"><tbody><tr><td><div></div></td><td><div></div></td><td><div></div></td><td><div></div></td></tr><tr><td><div></div></td><td><div></div></td><td><div></div></td><td><div></div></td></tr><tr><td><div></div></td><td><div></div></td><td><div></div></td><td><div></div></td></tr><tr><td class="fix shuffle" colspan="2"><div>재배열</div></td><td class="fix backspace" key="backspace"><div></div></td><td class="fix clear" key="clear"><div>정정</div></td></tr></tbody></table></div><span class="ui-control ui-label" id="ui-171a5245d17" style="left: 134px; top: 448px; width: 134px; height: 32px; right: auto; bottom: auto; color: rgb(2, 111, 206); font-size: 28px; z-index: 4;" ui-class="UILabel" ui-id="LB_contentTitle" dock="0" anchor="0b0101"><span class="ui-content">금액</span></span><span class="ui-control ui-label" id="ui-173e54f74eb" style="left: 134px; top: 618px; width: 169px; height: 25px; right: auto; bottom: auto; color: black; font-size: 22px; z-index: 6;" ui-class="UILabel" ui-id="LB_workableLimitLabel" dock="0" anchor="0b0101"><span class="ui-content" style="align-items: flex-start;">* 변경 가능 한도액</span></span><span class="ui-control ui-label" id="ui-173e691f285" style="left: 237px; top: 450px; width: 372px; height: 29px; right: auto; bottom: auto; color: rgb(255, 113, 69); font-size: 22px; z-index: 7;" ui-class="UILabel" ui-id="LB_nowLimit" dock="0" anchor="0b0101"><span class="ui-content" style="justify-content: flex-end; align-items: center;">현재한도 2,000,000</span></span><span class="ui-control ui-label" id="ui-173e6930e85" style="left: 134px; top: 668px; width: 473px; height: 25px; right: auto; bottom: auto; color: rgb(255, 113, 69); font-size: 22px; z-index: 8;" ui-class="UILabel" ui-id="LB_notice" dock="0" anchor="0b0101"><span class="ui-content" style="align-items: flex-start;"></span></span><span class="ui-control ui-label" id="ui-173ff7a059a" style="left: 328px; top: 618px; width: 169px; height: 25px; right: auto; bottom: auto; color: rgb(255, 113, 69); font-size: 22px; z-index: 9;" ui-class="UILabel" ui-id="LB_workableLimit" dock="0" anchor="0b0101"><span class="ui-content" style="align-items: flex-start;"></span></span><span class="ui-control ui-label" id="ui-171bfe7c2a0" style='left: 538px; top: 526px; width: 69px; height: 40px; right: auto; bottom: auto; font-family: "IBK IDream M"; font-size: 36px; z-index: 10;' ui-class="UILabel" ui-id="LB_monetaryUnit" dock="0" anchor="0b0101"><span class="ui-content">원</span></span></div></div><xcomponent></xcomponent><xjscript><script id='xjscript' type='text/plain'>/* include */
includeJSS("LibCommon","/KRG/0301/common.js");

let httpQuerys = parseLocationQueryString();
var numBox = TB_amount;
var setMoney;
var maxPayment;
var p = parent;
function Form_OnLoad(e){

	NP_numberpad1.$.find(".backspace").attr("key","backspace");
	
	//정정 , '<-' 버튼 disabled
    com.numberpad.btnDisabled(NP_numberpad1);
	
	TB_amount.$.find("> span > input")
		.attr("placeholder","입력해주세요")
		.attr("disabled","true")
		.css({"padding-right":"15%","padding-left":"45px"});
	PN_Subtitle.$.css("height","112px");
	LB_Subtitle.$.css('top','22px')
	LB_Subtitle.$.find('> span.ui-content').html('변경하실 한도를 입력해주십시오. 변동 가능 한도 내에서만 변경 가능합니다. <br> 입력내용이 맞으면 <span class="chk">확인</span>을 눌러주십시오.');
	LB_Subtitle.$.find('> span.ui-content').css({'display': 'inline','line-height':'36px'})
	LB_Subtitle.$.find('> span.ui-content > span').css({'border-radius':'5px','margin':'0 10px','padding':'0px 15px','font-size':'26px','font-weight':'bold','color':'#fff','background-color':'#176bc8',});
}

function NP_numberpad1_OnKeyClick(e){
	if(e.key == "정정" || e.key == "clear"){
		e.key='';
		numBox.Text = numBox.Text.replace(numBox.Text,"");
	}
	else if( e.key == "backspace"){
		e.key='';
		numBox.Text = numBox.Text.substring ( 0, numBox.Text.length -1);	
	}
	//숫자 클릭
	else{
		//첫숫자가 0일때
		if(numBox.Text == '0'){
			//0뒤에 0이면 그냥 0 고정
			if(e.key == '0'){
				numBox.Text = '0';
			}
			//다른숫자들어오면 초기화 후 클릭한 숫자찍기
			else{
				numBox.Text = '';
				numBox.Text += e.key;
			}
		}
		//첫 숫자가 0이 아니면
		else{
			numBox.Text += e.key;
			numBox.Text = com.util.Comma(numBox.Text);
		}		
	}
	
	//글자수 체크
	numLengthChk();
	
	//금액에서 콤마 제거 후 계산
	var payment = parseInt(numBox.Text.replace(/,/g, ""));
	
	if(p.iwin5.popupFrom == "overseasLimit"){
	console.log("###############maxPayment : " +maxPayment);
		console.log(p.iwin5.popupFrom);
		if((payment < 100) && (payment >0)){
			LB_notice.Text = "* 100단위 이상 입력하실 수 있습니다.";
			BT_right.Enabled = false;
		}else if (payment % 100 !== 0) {
        	LB_notice.Text = "* 100단위로 입력해 주세요.";
        	BT_right.Enabled = false;
        }else{
        
			if(maxPayment < payment){
				LB_notice.Text = "* 변경가능 한도액을 초과했습니다.";
				BT_right.Enabled = false;
				return;
			}
			LB_notice.Text = "";
			BT_right.Enabled = true;
		}
	} else if(p.iwin5.popupFrom != "overseasLimit"){
		console.log(p.iwin5.popupFrom);
		if((payment < 100000) && (payment >0)){
			LB_notice.Text = "* 10만원 이상 입력하실 수 있습니다.";
			BT_right.Enabled = false;
		}else if (payment % 100000 !== 0) {
        	LB_notice.Text = "* 10만원 단위로 입력해 주세요.";
        	BT_right.Enabled = false;
        }else{
			if(maxPayment < payment && p.popupFrom != "reqeustLimit"){
			console.log("###############maxPayment : " +maxPayment);
				LB_notice.Text = "* 변경가능 한도액을 초과했습니다.";
				BT_right.Enabled = false;
				return;
			}
			LB_notice.Text = "";
			BT_right.Enabled = true;
		}
	}
}

///////////////////////////////////////////////////
function numLengthChk(){
	//글자수 제한
	if(numBox.Text.length == 0){
		com.numberpad.notMaxLength(NP_numberpad1);		
		com.numberpad.btnDisabled(NP_numberpad1);
	}	
	else if(p.iwin5.popupFrom != "reqeustLimit" && numBox.Text.length == LB_workableLimit.Text.length){
		com.numberpad.maxLength(NP_numberpad1);
	}
	else if(numBox.Text.length > 0 && numBox.Text.length < 13){
		com.numberpad.notMaxLength(NP_numberpad1);
		numBox.Text = NP_numberpad1.autoComma(numBox.Text);
	}
	else if(numBox.Text.length == 13){
		com.numberpad.maxLength(NP_numberpad1);
	}
}
///////////////////////////////////////////////////


function BT_right_OnClick(e){
	setMoney = numBox.Text;
	console.log("setMoney : "+setMoney);
	p = parent;
	p.iwin5.numpopupBtn_Click();
	p.ChangeTab("2532");
	
}


function BT_left_OnClick(e){
	console.log(p.LIIN_SLCS_YN);
	p.ChangeTab("2532");
}</script></xjscript></body>
</html>
