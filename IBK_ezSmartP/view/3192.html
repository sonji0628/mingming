<!doctype html>
<html version="1000">
<head>
	<meta charset="utf-8">
	<title>ezSmartAtm Builder Form 새문서</title>
	<meta http-equiv="cache-control" content="no-cache">
	<meta http-equiv="pragma" content="no-cache">
	<meta http-equiv="expires" content="0">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<meta name="author" content="[김윤섭][kkobiboy]">
	<link id="ui-style-core" rel="stylesheet" type="text/css" href="/core/app.controls.css">
	<script type="text/javascript" charset="utf-8" src="/HtaPlatform/Core/Form.JsApi"></script>
	<script type="text/javascript" charset="utf-8" src="/core/app.jquery.js"></script>
	<script type="text/javascript" charset="utf-8" src="/core/app.controls.js"></script>
	<style id="ui-style-user" type="text/css"></style>
	<script id="ui-script-user" type="text/javascript"></script>
</head>
<body oncontextmenu="return false;" class="ui-pre-load"><div class="ui-document ui-container" id="ui-document" lang="kr" ui-class="UIForm" ui-id="Form" dock="5" anchor="0b0101" ide-size="1389,1120" xonload="Form_OnLoad">
<div class="ui-control ui-panel ui-container" id="ui-171be2e0c07" style="left: 0px; top: 0px; width: 1280px; height: 1024px; right: auto; bottom: auto; z-index: 0; background-color: transparent;" ui-class="UIPanel" ui-id="PN_form" dock="0" anchor="0b0101"><div class="ui-control ui-panel ui-container ui-dock ui-dock-top" id="ui-171be2e0c08" style="left: 0px; top: 0px; width: auto; height: 102px; right: 0px; bottom: auto; z-index: 0; background-color: rgb(23, 107, 200);" ui-class="UIPanel" ui-id="PN_Title" dock="1" anchor="0b0101" dock-w="200" dock-h="102" dock-r="left:98px;top:1px;width:200px;height:76px;right:auto;bottom:auto"><span class="ui-control ui-label" id="ui-171be2e0c09" style='left: 80px; top: 31px; width: 1120px; height: 40px; right: auto; bottom: auto; color: white; font-family: "IBK iDream M"; font-size: 38px; z-index: 0;' ui-class="UILabel" ui-id="LB_title" dock="0" anchor="0b0101"><span class="ui-content">선결제</span></span></div><div class="ui-control ui-panel ui-container ui-dock ui-dock-top" id="ui-171be2e0c0a" style="left: 0px; top: 102px; width: auto; height: 92px; right: 0px; bottom: auto; z-index: 1; background-color: rgb(239, 240, 242);" ui-class="UIPanel" ui-id="PN_Subtitle" dock="1" anchor="0b0101" dock-w="1280" dock-h="92" dock-r="left:0px;top:102px;width:1280px;height:92px;right:auto;bottom:auto"><div class="ui-control ui-panel ui-container" id="ui-17355fb3e22" style="left: 80px; top: 12px; width: 1150px; height: 68px; right: auto; bottom: auto; z-index: 0; background-color: rgb(239, 240, 242);" ui-class="UIPanel" ui-id="PN_Subtitle_wrap" dock="0" anchor="0b0101"><span class="ui-control ui-label" id="ui-172bff56e8d" style='left: 240px; top: 19px; width: 780px; height: 30px; right: auto; bottom: auto; font-family: "IBK iDream L"; font-size: 20px; z-index: 2;' ui-class="UILabel" ui-id="LB_Subtitle_guide" dock="0" anchor="0b0101"><span class="ui-content">청구금액/미청구금액의 전체결제를 신청하시겠습니까?</span></span><span class="ui-control ui-label" id="ui-172bfef05a8" style='left: 208px; top: 19px; width: 13px; height: 34px; right: auto; bottom: auto; font-family: "IBK iDream L"; font-size: 20px; z-index: 1;' ui-class="UILabel" ui-id="LB_label10" dock="0" anchor="0b0101" icon-image-align="left,middle"><span class="ui-content" style="justify-content: center;"> | </span></span><span class="ui-control ui-label" id="ui-171be2e0c0b" style='left: 4px; top: 13px; width: 180px; height: 43px; right: auto; bottom: auto; font-family: "IBK iDream L"; font-size: 32px; z-index: 0;' ui-class="UILabel" ui-id="LB_Subtitle" dock="0" anchor="0b0101"><span class="ui-content">선결제 신청</span></span></div></div><div class="ui-control ui-panel ui-container ui-dock ui-dock-bottom" id="ui-172729dbaaf" style="left: 0px; top: auto; width: auto; height: 140px; right: 0px; bottom: 0px; z-index: 2;" ui-class="UIPanel" ui-id="PN_btn" dock="2" anchor="0b0101" dock-w="1280" dock-h="140" dock-r="left:0px;top:884px;width:1280px;height:140px;right:auto;bottom:auto"><span class="ui-control ui-button theme-orange" id="ui-172729e45a9" style='left: 36px; top: 31px; width: 258px; height: 80px; right: auto; bottom: auto; font-family: "IBK iDream M"; font-size: 32px; z-index: 0;' ui-class="UIButton" ui-id="BT_left" dock="0" anchor="0b0101" xonclick="BT_left_OnClick" theme="orange"><span class="ui-content">취소</span></span><span disabled="disabled" class="ui-control ui-button theme-blue ui-disabled" id="ui-172729ea59d" style='left: auto; top: 31px; width: 258px; height: 80px; right: 36px; bottom: auto; font-family: "IBK iDream M"; font-size: 32px; z-index: 1;' ui-class="UIButton" ui-id="BT_right" dock="0" anchor="0b1001" xonclick="BT_right_OnClick" theme="blue"><span class="ui-content">확인</span></span></div><div class="ui-control ui-panel ui-container ui-dock ui-dock-fill" id="ui-172729f3b0f" style="left: 0px; top: 194px; width: auto; height: auto; right: 0px; bottom: 140px; z-index: 3;" ui-class="UIPanel" ui-id="PN_contents" dock="5" anchor="0b0101" dock-w="1280" dock-h="100" dock-r="left:0px;top:194px;width:1280px;height:100px;right:auto;bottom:auto"><div class="ui-control ui-panel ui-container" id="ui-172ea605b36" style="left: 83px; top: 20px; width: 1100px; height: 660px; right: auto; bottom: auto; z-index: 0;" ui-class="UIPanel" ui-id="PN_wrap" dock="0" anchor="0b0101"><span class="ui-control ui-label" id="ui-172ea60f7fe" style='left: 16px; top: 16px; width: 441px; height: 32px; right: auto; bottom: auto; color: rgb(23, 107, 200); font-family: "IBK IDream M"; font-size: 24px; z-index: 0;' ui-class="UILabel" ui-id="LB_label2" dock="0" anchor="0b0101"><span class="ui-content" style="align-items: flex-start;">결제계좌정보</span></span><span class="ui-control ui-label" id="ui-172ea60f829" style="left: 734px; top: 20px; width: 119px; height: 24px; right: auto; bottom: auto; font-size: 21px; z-index: 1;" ui-class="UILabel" ui-id="LB_label3" dock="0" anchor="0b0101"><span class="ui-content">조회기준일시</span></span><span class="ui-control ui-label" id="ui-172ea60f855" style="left: 861px; top: 20px; width: 210px; height: 24px; right: auto; bottom: auto; font-size: 21px; z-index: 2;" ui-class="UILabel" ui-id="LB_label_date" dock="0" anchor="0b0101"><span class="ui-content"></span></span><div class="ui-control ui-panel ui-container" id="ui-172ea6174b0" style="left: 16px; top: 55px; width: 1050px; height: 194px; right: auto; bottom: auto; z-index: 3;" ui-class="UIPanel" ui-id="PN_account" dock="0" anchor="0b0101"></div><span class="ui-control ui-label" id="ui-172ea623a68" style='left: 16px; top: 266px; width: 441px; height: 32px; right: auto; bottom: auto; color: rgb(23, 107, 200); font-family: "IBK IDream M"; font-size: 24px; z-index: 4;' ui-class="UILabel" ui-id="LB_label5" dock="0" anchor="0b0101"><span class="ui-content" style="align-items: flex-start;">청구금액</span></span><div class="ui-control ui-table" id="ui-172c12f7fc6" style="border-width: 2px; border-color: rgb(194, 194, 194); left: 16px; top: 303px; width: 1050px; height: 180px; right: auto; bottom: auto; z-index: 5;" ui-class="UITable" ui-id="TL_table_payinfo" dock="0" anchor="0b0101"><table border="0" cellspacing="0" cellpadding="0"><thead><tr><td width="270" type="1" align-h="align-left" align-v="align-middle"></td><td type="1" align-h="align-left" align-v="align-middle"></td></tr></thead><tbody><tr height="33%"><td><div class="ui-table-cell align-left align-middle ui-container" id="ui-173bd05a9d2" style="padding: 0px 0px 0px 20px; font-size: 21px; background-color: rgb(242, 242, 242);"><span class="cell-control-label">합계총액(A+B)</span></div></td><td><div class="ui-table-cell align-left align-middle ui-container" id="ui-173bd05a9d3" style="padding: 0px 20px; font-size: 22px; justify-content: flex-start;"></div></td></tr><tr height="33%"><td><div class="ui-table-cell align-left align-middle ui-container" id="ui-173bd05a9d4" style="padding: 0px 0px 0px 20px; font-size: 21px; background-color: rgb(242, 242, 242);"><span class="cell-control-label">당월 청구금액(A)</span></div></td><td><div class="ui-table-cell align-left align-middle ui-container" id="ui-173bd05a9d5" style="padding: 0px 20px; font-size: 22px; justify-content: flex-start;"></div></td></tr><tr height="34%"><td><div class="ui-table-cell align-left align-middle ui-container" id="ui-173bd05a9d6" style="padding: 0px 0px 0px 20px; font-size: 21px; background-color: rgb(242, 242, 242);"><span class="cell-control-label">미청구금액(B)</span></div></td><td><div class="ui-table-cell align-left align-middle ui-container" id="ui-173bd05a9d7" style="padding: 0px 20px; font-size: 22px; justify-content: flex-start;"></div></td></tr></tbody></table></div><div class="ui-control ui-table" id="ui-173bd07a207" style="border-width: 2px; border-color: rgb(194, 194, 194); left: 16px; top: 547px; width: 1050px; height: 96px; right: auto; bottom: auto; z-index: 6;" ui-class="UITable" ui-id="TL_table_payrdo" dock="0" anchor="0b0101"><table border="0" cellspacing="0" cellpadding="0"><thead><tr><td width="270" type="1" align-h="align-left" align-v="align-middle"></td><td type="1" align-h="align-left" align-v="align-middle"></td></tr></thead><tbody><tr height="50%"><td><div class="ui-table-cell align-left align-middle ui-container" id="ui-173bd07a208" style="padding: 0px 0px 0px 20px; font-size: 21px; background-color: rgb(242, 242, 242);"><span class="cell-control-label">미결제총금액(A+B)</span></div></td><td><div class="ui-table-cell align-left align-middle ui-container" id="ui-173bd07a209" style="padding: 0px 20px; font-size: 22px; justify-content: flex-start;"><span class="ui-control ui-radiobox round" id="ui-172a64a0186" style="left: 8px; top: 2px; width: 200px; height: 38px; right: auto; bottom: auto; font-size: 18px; z-index: 0;" ui-class="UIRadioBox" ui-id="RB_radiobox_amt1" dock="0" anchor="0b0101" x-style="round" group-name="payrdo" value="Y" xonchecked="RB_radiobox_amt1_OnChecked"><span class="ui-icon-image"><span></span></span><span class="ui-content">금액</span></span></div></td></tr><tr height="50%"><td><div class="ui-table-cell align-left align-middle ui-container" id="ui-173bd07a20a" style="padding: 0px 0px 0px 20px; font-size: 21px; background-color: rgb(242, 242, 242);"><span class="cell-control-label">당월 청구금액(A)</span></div></td><td><div class="ui-table-cell align-left align-middle ui-container" id="ui-173bd07a20b" style="padding: 0px 20px; font-size: 22px; justify-content: flex-start;"><span class="ui-control ui-radiobox round" id="ui-172a64a14aa" style="left: 8px; top: 2px; width: 200px; height: 38px; right: auto; bottom: auto; font-size: 18px; z-index: 0;" ui-class="UIRadioBox" ui-id="RB_radiobox_amt2" dock="0" anchor="0b0101" x-style="round" group-name="payrdo" value="N" xonchecked="RB_radiobox_amt2_OnChecked"><span class="ui-icon-image"><span></span></span><span class="ui-content">금액2</span></span></div></td></tr></tbody></table></div><span class="ui-control ui-label" id="ui-173bd07a24f" style='left: 16px; top: 510px; width: 441px; height: 32px; right: auto; bottom: auto; color: rgb(23, 107, 200); font-family: "IBK IDream M"; font-size: 24px; z-index: 7;' ui-class="UILabel" ui-id="LB_label1" dock="0" anchor="0b0101"><span class="ui-content" style="align-items: flex-start;">선결제신청</span></span></div><span class="ui-control ui-scrollbar" id="ui-172980bda14" style="left: 1220px; top: 20px; width: 32px; height: 660px; right: auto; bottom: auto; z-index: 1;" ui-class="UIScrollBar" ui-id="SB_scrollbar_wrap" dock="0" anchor="0b0101" scroll-control-id="PN_wrap"><span class="track"></span><span class="trackbutton" style="top: 467px;"></span></span></div></div></div><xcomponent></xcomponent><xjscript><script id='xjscript' type='text/plain'>// 3180.css import
importCSS("3180"     ,"3180.css");

// common.js import
//importJSS("common", "common.js");
includeJSS("common","/KRG/0301/common.js");

var p = parent;

function Form_OnLoad(e){
//  fnCreatePaymentInfo_TEST();
}


/* 결제계좌정보 출력 */
function fnSetAcnInfo( ){

  let ATLM_ACN = "", ACNT_BAL = 0, STLM_ACN = "", SUBJ_NM = "";

  // 결제계좌번호 가져오기    
  if(p.G_CRDRCP301021Step3 != null){
     STLM_ACN = p.G_CRDRCP301021Step3.STLM_ACN;
  }


  // 결제계좌정보 가져오기
  if(p.G_CBKARR108D10Step3 != null){
  
	  const records = p.G_CBKARR108D10Step3.Grid1;	
	  
	  for(let i = 0, Len = records.length; i < Len; i++){
	      let record = records[i];
	      
          if(STLM_ACN == record.CUS_ACN) {
             ATLM_ACN = record.CUS_ACN;
             ACNT_BAL = record.ACNT_BAL; 
             SUBJ_NM  = record.SUBJ_NM;
                        
             p.G_CRDRCP301021Step3.STLM_BNCD = "003";
             p.G_CRDRCP301021Step3.STLM_ACN = ATLM_ACN;
             p.G_CRDRCP301021Step3.ACNT_BAL = ACNT_BAL;
             break;
          }     
	  }  // end for - records
	  	  
	  
	// 계좌번호 셋팅
	if(p.G_isOthers){
	   // 타행인경우 계좌번호 패턴 X
	} else {
	   STLM_ACN = p.com.acct.fnGetAccountPattern(p.G_CRDRCP301021Step3.STLM_ACN);
	}
	  
	// 은행명 셋팅
	if(p.G_isOthers){
	   SUBJ_NM = p.com.acct.convertBankName(p.G_CRDRCP301021Step3.STLM_BNCD);
	} else {
	   // 당행은 별도 처리 없음
	}
	
	const LASTBILGYMD =  p.com.date.fnGetFormatDate(p.G_CRDRCP301021Step3.LAST_BILG_YMD);

    let tag = [];
	tag.push(""
		+'<div class="list_info_pay" onclick="acctSelectPop();">'
        +'	<div class="text_area">'
        +'    <div class="main_text posLT"><strong>'+STLM_ACN+'</strong></div>'
        +'    <div class="sub_text posLB">'+SUBJ_NM+'</div>'
        +'    <div class="posRT">출금가능금액</div>'
        +'    <div class="posRB">'
        +		'<strong>'+p.com.util.fnGetFormatMoney(ACNT_BAL)+'</strong>'
        +		'<span>원</span>'
        +'	  </div>'
        +'	</div>'
        +'  <div class="next_img"></div>'
        +'  <div class="text_area_bottom"><span>최종 청구일</span> <div class="divider">|</div> <span>'+LASTBILGYMD+'</span> </div>'
        +'</div>'	
	);

	let $PN_account = $("div[ui-id='PN_account']");
	$PN_account.html(""
		+'<div class="list-panel">'
		+tag.join("")
		+'</div>'
	);
	
	// mousedown 이벤트 삭제					   
    $PN_account.find("> div.list-panel > div.list_info_pay").unbind("mousedown");
    // mousedown 이벤트 생성
	$PN_account.find("> div.list-panel > div.list_info_pay").each(function(i){
		let $this = $(this);
		$this.css({'border': '1px solid #9c9c9c'});
		$this.mousedown(function(){
		    comSelectAnimate.call(this,$("div[ui-id='PN_account'] > div.list-panel > div.list_info_pay"));
		});
	});
	$PN_account.find("> div.list-panel > div.list_info_pay").css("visibility","visible");	
	  
  }  // end if - G_CBKARR108D10Step3
	
}


function acctSelectPop(){
   // 출금계좌 리스트 팝업 실행화면
   com.ss.setItem("pop_accountAll_act","3192");
   
   // 전체계좌 팝업 조회
   p.sendRequest("pop_accountAll");     
}


/*
    당월청구 항목 =======================================================================================
    TMNB_ANF_AMT    당월청구연회비금액              TMNB_LSP_PRNC_AMT   당월청구일시불원금금액 
    TMNB_LSP_FEE    당월청구일시불수수료            TMNB_INSL_PRNC_AMT  당월청구할부원금금액 
    TMNB_INSL_FEE   당월청구할부수수료              TMNB_CSRV_PRNC_AMT  당월청구현금서비스원금금액          
    TMNB_CSRV_FEE   당월청구현금서비스수수료        TMNB_RVLM_PRNC_AMT  당월청구리볼빙일시불원금금액 
    TMNB_RVLM_FEE   당월청구리볼빙일시불수수료      TMNB_RVCS_PRNC_AMT  당월청구리볼빙현금서비스원금금액    
    TMNB_RVCS_FEE   당월청구리볼빙현금서비스수수료  TMNB_CRLN_PRNC_AMT  당월청구카드론원금금액 
    TMNB_CRLN_FEE   당월청구카드론수수료
    
    미 청구 항목 =========================================================================================
    UDEM_ANF_AMT    미청구연회비금액                UDEM_LSP_PRNC_AMT   미청구일시불원금금액            
    UDEM_LSP_FEE    미청구일시불수수료                  UDEM_INSL_PRNC_AMT  미청구할부원금금액              
    UDEM_INSL_FEE   미청구할부수수료                    UDEM_CSRV_PRNC_AMT  미청구현금서비스원금금액        
    UDEM_CSRV_FEE   미청구현금서비스수수료              UDEM_RVLM_PRNC_AMT  미청구리볼빙일시불원금금액      
    UDEM_RVLM_FEE   미청구리볼빙일시불수수료            UDEM_RVCS_PRNC_AMT  미청구리볼빙현금서비스원금금액  
    UDEM_RVCS_FEE   미청구리볼빙현금서비스수수료        UDEM_CRLN_PRNC_AMT  미청구카드론원금금액            
    UDEM_CRLN_FEE   미청구카드론수수료
*/
var UDEMLIST = ["UDEM_LSP_PRNC_AMT",  "UDEM_LSP_FEE",  "UDEM_INSL_PRNC_AMT", "UDEM_INSL_FEE",
    "UDEM_CSRV_PRNC_AMT", "UDEM_CSRV_FEE", "UDEM_RVLM_PRNC_AMT", "UDEM_RVLM_FEE",
    "UDEM_RVCS_PRNC_AMT", "UDEM_RVCS_FEE", "UDEM_CRLN_PRNC_AMT", "UDEM_CRLN_FEE",
    "UDEM_ANF_AMT"];
    
var TMNBLIST = ["TMNB_ANF_AMT", "TMNB_LSP_PRNC_AMT", "TMNB_LSP_FEE", "TMNB_INSL_PRNC_AMT", "TMNB_INSL_FEE",
    "TMNB_CSRV_PRNC_AMT", "TMNB_CSRV_FEE", "TMNB_RVLM_PRNC_AMT", "TMNB_RVLM_FEE", "TMNB_RVCS_PRNC_AMT", "TMNB_RVCS_FEE", 
    "TMNB_CRLN_PRNC_AMT", "TMNB_CRLN_FEE" ];            

var UDEM_TTAL_AMT = 0;

function fnCreatePaymentInfo(){

	// 테이블셀 초기화
    TL_table_payinfo.DataCell(0,1,"text","");
	TL_table_payinfo.DataCell(1,1,"text","");
	TL_table_payinfo.DataCell(2,1,"text","");
	
	UDEM_TTAL_AMT = 0;
	
	RB_radiobox_amt1.Checked = false;
	RB_radiobox_amt2.Checked = false;
	
   for(var i = 0, leng = UDEMLIST.length; i < leng; i++) {
       var key = UDEMLIST[i],
           TEMPAMT = p.G_CRDRCP301021Step3[key] !== "" ? parseInt(p.G_CRDRCP301021Step3[key], 10) : 0;
            
	   // console.log(" key >>>> " + key );
	   // console.log(" p.G_CRDRCP301021Step3[key] >>>> " + p.G_CRDRCP301021Step3[key] );
            
       UDEM_TTAL_AMT+=TEMPAMT;
   }
	   
    // 미결제금액(A+B)( OTST_TTAL_AMT )
    const OTST_TTAL_AMT = com.util.fnGetFormatMoney(p.G_CRDRCP301021Step3.OTST_TTAL_AMT);
    TL_table_payinfo.DataCell(0,1,"text",OTST_TTAL_AMT);
    
    // 당월청구금액 (CRD_TMNB_AMT )
    console.log(" p.G_CRDRCP301021Step3.CRD_TMNB_AMT >>>> " + p.G_CRDRCP301021Step3.CRD_TMNB_AMT );
    const CRD_TMNB_AMT = com.util.fnGetFormatMoney(p.G_CRDRCP301021Step3.CRD_TMNB_AMT);
	TL_table_payinfo.DataCell(1,1,"text",CRD_TMNB_AMT);
	
	
    // 미청구금액(미청구 전체)
    UDEM_TTAL_AMT = com.util.fnGetFormatMoney(UDEM_TTAL_AMT);
	TL_table_payinfo.DataCell(2,1,"text",UDEM_TTAL_AMT);

	const $payinfo_tbody = TL_table_payinfo.$.find("> table > tbody");
	$payinfo_tbody.find("> tr:eq(0) > td:eq(1) > div.ui-table-cell > span.cell-control-label").append('<span class="table-won"> 원</span>');
	$payinfo_tbody.find("> tr:eq(1) > td:eq(1) > div.ui-table-cell > span.cell-control-label").append('<span class="table-won"> 원</span>');
	$payinfo_tbody.find("> tr:eq(2) > td:eq(1) > div.ui-table-cell > span.cell-control-label").append('<span class="table-won"> 원</span>');
	
	$payinfo_tbody.find("> tr:eq(1) > td:eq(1) > div.ui-table-cell").append("<div style='background: url(\"/core/image/list_ic_next.png\") no-repeat; background-size : 10px auto; width: 10px; height: 18px; position: absolute; top: 20px; left: 710px;'></div>");
	$payinfo_tbody.find("> tr:eq(2) > td:eq(1) > div.ui-table-cell").append("<div style='background: url(\"/core/image/list_ic_next.png\") no-repeat; background-size : 10px auto; width: 10px; height: 18px; position: absolute; top: 20px; left: 710px;'></div>");

	// 당월청구금액(A) 테이블셀 click 이벤트 삭제  
    $payinfo_tbody.find("> tr:eq(1) > td:eq(1)").unbind("click");
    // 당월청구금액(A) 테이블셀 click 이벤트 생성
	$payinfo_tbody.find("> tr:eq(1) > td:eq(1)").bind("click",function(obj){ 
																			console.log("obj  ====@@ " + obj );
																			fnOpenPopup("B");
																		});

	// 미청구금액(B) 테이블셀 click 이벤트 삭제  
    $payinfo_tbody.find("> tr:eq(2) > td:eq(1)").unbind("click");
    // 미청구금액(B) 테이블셀 click 이벤트 생성
	$payinfo_tbody.find("> tr:eq(2) > td:eq(1)").bind("click",function(obj){ 
																			console.log("obj  ====##### " + obj );
																			fnOpenPopup("A");
																		});


    RB_radiobox_amt1.Text  = com.util.fnGetFormatMoney(p.G_CRDRCP301021Step3.OTST_TTAL_AMT);
    RB_radiobox_amt1.Value = p.G_CRDRCP301021Step3.OTST_TTAL_AMT;
    
    RB_radiobox_amt2.Text  = com.util.fnGetFormatMoney(p.G_CRDRCP301021Step3.CRD_TMNB_AMT);
    RB_radiobox_amt2.Value = p.G_CRDRCP301021Step3.CRD_TMNB_AMT;
    
}


function fnOpenPopup(type) {

   var keys = type == "B" ? TMNBLIST :  UDEMLIST,
	   title = type == "B" ? "당월 청구금액" : "당월 미청구금액",
	   TTAL_AMT = type == "B" ? p.G_CRDRCP301021Step3.CRD_TMNB_AMT : UDEM_TTAL_AMT.replace(/,/gi, ""),
	   POPUP_PARAM = {
	        "TTAL_AMT" : TTAL_AMT,
	        "TITLE" : title
	   };

   for(var i = 0, leng = keys.length; i < leng; i++) {
       var key = keys[i], 
           tempKey = key.substr(5);
        
       POPUP_PARAM[tempKey] = p.G_CRDRCP301021Step3[key];
   }
   
   console.log(" fnOpenPopup >>> POPUP_PARAM ::: " + JSON.stringify(POPUP_PARAM));
   
   // 청구금액/미청구금액 - 전체결제 > 결제청구항목 셋팅
   com.ss.setItem("3286_popup_param",JSON.stringify(POPUP_PARAM));
   
   // 청구금액/미청구금액 - 전체결제 > 결제청구금액 팝업 조회
   p.sendRequest("m3_pop_paymentInfo_R_ALL");

}


function fnPaymentChange() {

/*****
console.log(" fnPaymentChange >>>> RB_radiobox_amt1.Checked ::: " + RB_radiobox_amt1.Checked);
console.log(" fnPaymentChange >>>> RB_radiobox_amt2.Checked ::: " + RB_radiobox_amt2.Checked);
console.log(" fnPaymentChange >>>> RB_radiobox_amt1.Style  ====@@ " + RB_radiobox_amt1.Style);			
console.log(" fnPaymentChange >>>> RB_radiobox_amt1.Checked  ====@@ " + RB_radiobox_amt1.Checked);			
console.log(" fnPaymentChange >>>> RB_radiobox_amt1.GroupName  ====@@ " + RB_radiobox_amt1.GroupName);			
console.log(" fnPaymentChange >>>> RB_radiobox_amt1.CheckedGroupText  ====@@ " + RB_radiobox_amt1.CheckedGroupText);			
console.log(" fnPaymentChange >>>> RB_radiobox_amt1.CheckedGroupValue  ====@@ " + RB_radiobox_amt1.CheckedGroupValue);			
console.log(" fnPaymentChange >>>> RB_radiobox_amt1.CheckedGroupRadioBox  ====@@ " + RB_radiobox_amt1.CheckedGroupRadioBox);				
   
console.log(" fnPaymentChange >>>> RB_radiobox_amt1.Text ::: " + RB_radiobox_amt1.Text);
console.log(" fnPaymentChange >>>> RB_radiobox_amt1.Value ::: " + RB_radiobox_amt1.Value);

console.log(" fnPaymentChange >>>> RB_radiobox_amt2.Text ::: " + RB_radiobox_amt2.Text);
console.log(" fnPaymentChange >>>> RB_radiobox_amt2.Value ::: " + RB_radiobox_amt2.Value);
*****/		
		
  // 신용카드입금총금액
  var CRD_MNRC_TTAL_AMT = RB_radiobox_amt1.CheckedGroupValue;
  
  if(RB_radiobox_amt1.Checked || RB_radiobox_amt2.Checked){
     BT_right.Enabled = true;
     if(parseInt(CRD_MNRC_TTAL_AMT, 10)  ==  0 || com.util.isNull(CRD_MNRC_TTAL_AMT)) {
   		// 청구금액/미청구금액 - 전체결제 > 에러메시지 팝업 조회
   		p.sendRequest("m3_pop_payment_error");
     }
  } else {
     BT_right.Enabled = false;
  }
  
}
        

function RB_radiobox_amt1_OnChecked(e){
   fnPaymentChange();
}

function RB_radiobox_amt2_OnChecked(e){
   fnPaymentChange();
}


function BT_left_OnClick(e){
	SCREEN.WriteJnl("[선결제 전체결제 신청] 취소");
  	ATMCOMM.BusinessEnd(ATMCOMM.RET_CAN);
}


function BT_right_OnClick(e){
  
   if(p.G_isOthers && p.comFnOthersCheck() == false) return;
    
   // 신용카드입금총금액
   var CRD_MNRC_TTAL_AMT = RB_radiobox_amt1.CheckedGroupValue;
    
   if(parseInt(CRD_MNRC_TTAL_AMT, 10)  ==  0 || com.util.isNull(CRD_MNRC_TTAL_AMT)) {
      // Error 메시지 화면 처리
      p.iwin9055.setErrorMsg("입력하신 입금총금액(이)가 유효하지 않습니다.");
    
      // 공통 메시지 화면 탭 뷰
      p.ChangeTab("9055");        
      
	  setTimeout(function(){
		  ATMCOMM.BusinessEnd(ATMCOMM.RET_NG);
	  }, 5000);       
      return;
   }
  
   // 선결제처리구분코드 재셋팅
   var AHST_PCSN_DCD = RB_radiobox_amt1.Checked ? "T" : "B";
   p.G_payInfo.AHST_PCSN_DCD = AHST_PCSN_DCD;  

   // 매출건별입금 배열 건수 재셋팅
   com.ss.setItem("3183_CSTP_MNRC_ROWCOUNT","0");

   // 신용카드입금총금액 재셋팅
   com.ss.setItem("3183_CRD_MNRC_TTAL_AMT",CRD_MNRC_TTAL_AMT);
    
   if(p.G_isOthers && p.comFnOthersCheck()){
      // 타행은 비밀번호 입력 패스 
      p.G_SkipPwdStep3 = true;
   }    
   SCREEN.WriteJnl("[선결제 전체결제 신청] 정상");
   // 선결제 - 할부 건별 신청 안내 화면 조회02
   p.sendRequest("step4_2_pay_guide");
   
}



function fnCreatePaymentInfo_TEST(){

   let UDEM_TTAL_AMT = 0;
   
    // 미결제금액(A+B)( OTST_TTAL_AMT )
    const OTST_TTAL_AMT = 464353454543;
    TL_table_payinfo.DataCell(0,1,"text",OTST_TTAL_AMT);
    
    // 당월청구금액 (CRD_TMNB_AMT )
    const CRD_TMNB_AMT = 867878868675
	TL_table_payinfo.DataCell(1,1,"text",CRD_TMNB_AMT);
	
	
    // 미청구금액(미청구 전체)
    UDEM_TTAL_AMT = com.util.fnGetFormatMoney(UDEM_TTAL_AMT);
	TL_table_payinfo.DataCell(2,1,"text",UDEM_TTAL_AMT);

	const $payinfo_tbody = TL_table_payinfo.$.find("> table > tbody");
	$payinfo_tbody.find("> tr:eq(0) > td:eq(1) > div.ui-table-cell > span.cell-control-label").append('<span class="table-won"> 원</span>');
	$payinfo_tbody.find("> tr:eq(1) > td:eq(1) > div.ui-table-cell > span.cell-control-label").append('<span class="table-won"> 원</span>');
	$payinfo_tbody.find("> tr:eq(2) > td:eq(1) > div.ui-table-cell > span.cell-control-label").append('<span class="table-won"> 원</span>');
	
	$payinfo_tbody.find("> tr:eq(1) > td:eq(1) > div.ui-table-cell").append("<div style='background: url(\"/core/image/list_ic_next.png\") no-repeat; background-size : 10px auto; width: 10px; height: 18px; position: absolute; top: 20px; left: 710px;'></div>");
	$payinfo_tbody.find("> tr:eq(2) > td:eq(1) > div.ui-table-cell").append("<div style='background: url(\"/core/image/list_ic_next.png\") no-repeat; background-size : 10px auto; width: 10px; height: 18px; position: absolute; top: 20px; left: 710px;'></div>");


	// 테이블셀 click 이벤트 삭제  
    $payinfo_tbody.find("> tr:eq(1) > td:eq(1)").unbind("click");
    // 테이블셀 click 이벤트 생성
	$payinfo_tbody.find("> tr:eq(1) > td:eq(1)").bind("click",function(obj){ 
																			console.log("obj  ====@@ " + obj);		
																			console.log( obj);
																			console.log( obj.type);
																			console.log( obj.offsetX);
																			console.log( obj.screenY);
																		});


    RB_radiobox_amt1.Text  = com.util.fnGetFormatMoney("5987654");
    RB_radiobox_amt1.Value = "5987654";
    
    RB_radiobox_amt2.Text  = com.util.fnGetFormatMoney("321123");
    RB_radiobox_amt2.Value = "321123";
    
	console.log("fnCreatePaymentInfo :::: RB_radiobox_amt1.Style  ====@@ " + RB_radiobox_amt1.Style);			
	console.log("fnCreatePaymentInfo :::: RB_radiobox_amt1.Checked  ====@@ " + RB_radiobox_amt1.Checked);			
	console.log("fnCreatePaymentInfo :::: RB_radiobox_amt1.GroupName  ====@@ " + RB_radiobox_amt1.GroupName);			
	console.log("fnCreatePaymentInfo :::: RB_radiobox_amt1.CheckedGroupText  ====@@ " + RB_radiobox_amt1.CheckedGroupText);			
	console.log("fnCreatePaymentInfo :::: RB_radiobox_amt1.CheckedGroupValue  ====@@ " + RB_radiobox_amt1.CheckedGroupValue);			
	console.log("fnCreatePaymentInfo :::: RB_radiobox_amt1.CheckedGroupRadioBox  ====@@ " + RB_radiobox_amt1.CheckedGroupRadioBox);				

}
</script></xjscript></body>
</html>
