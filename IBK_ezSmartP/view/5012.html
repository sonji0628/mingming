<!doctype html>
<html version="1000">
<head>
	<meta charset="utf-8">
	<title>ezSmartAtm Builder Form 새문서</title>
	<meta http-equiv="cache-control" content="no-cache">
	<meta http-equiv="pragma" content="no-cache">
	<meta http-equiv="expires" content="0">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<meta name="author" content="[김윤섭][kkobiboy]">
	<link id="ui-style-core" rel="stylesheet" type="text/css" href="/core/app.controls.css">
	<script type="text/javascript" charset="utf-8" src="/HtaPlatform/Core/Form.JsApi"></script>
	<script type="text/javascript" charset="utf-8" src="/core/app.jquery.js"></script>
	<script type="text/javascript" charset="utf-8" src="/core/app.controls.js"></script>
	<style id="ui-style-user" type="text/css"></style>
	<script id="ui-script-user" type="text/javascript"></script>
</head>
<body oncontextmenu="return false;" class="ui-pre-load"><div class="ui-document ui-container" id="ui-document" lang="kr" xonload="Form_OnLoad" ide-size="1407,1113" anchor="0b0101" dock="5" ui-id="Form" ui-class="UIForm">
<div class="ui-control ui-panel ui-container" id="ui-171a52210e0" style="left: 0px; top: 0px; width: 1280px; height: 1024px; right: auto; bottom: auto; z-index: 0; background-color: transparent;" anchor="0b0101" dock="0" ui-id="PN_form" ui-class="UIPanel"><div class="ui-control ui-panel ui-container ui-dock ui-dock-top" id="ui-171a52210e2" style="left: 0px; top: 0px; width: auto; height: 102px; right: 0px; bottom: auto; z-index: 2; background-color: rgb(23, 107, 200);" anchor="0b0101" dock="1" ui-id="PN_Title" ui-class="UIPanel" dock-w="200" dock-h="102" dock-r="left:98px;top:1px;width:200px;height:76px;right:auto;bottom:auto"><span class="ui-control ui-label" id="ui-171a52210e3" style='left: 80px; top: 31px; width: 1134px; height: 40px; right: auto; bottom: auto; color: white; font-family: "IBK iDream M"; font-size: 38px; z-index: 0;' anchor="0b0101" dock="0" ui-id="LB_title" ui-class="UILabel"><span class="ui-content">입력</span></span></div><div class="ui-control ui-panel ui-container ui-dock ui-dock-top" id="ui-171a52210e4" style="left: 0px; top: 102px; width: auto; height: 92px; right: 0px; bottom: auto; z-index: 3; background-color: whitesmoke;" anchor="0b0101" dock="1" ui-id="PN_Subtitle" ui-class="UIPanel" dock-w="1280" dock-h="92" dock-r="left:0px;top:102px;width:1280px;height:92px;right:auto;bottom:auto"><span class="ui-control ui-label" id="ui-171a52210e5" style='left: 82px; top: 24px; width: 1139px; height: 45px; right: auto; bottom: auto; font-family: "IBK iDream L"; font-size: 28px; z-index: 0;' anchor="0b0101" dock="0" ui-id="LB_Subtitle" ui-class="UILabel"><span class="ui-content" style="align-items: center;">입력하신 후 </span></span></div><div class="ui-control ui-panel ui-container ui-dock ui-dock-bottom" id="ui-171a52210e8" style="left: 0px; top: auto; width: auto; height: 140px; right: 0px; bottom: 0px; z-index: 1;" anchor="0b0101" dock="2" ui-id="PN_btn" ui-class="UIPanel" dock-w="1280" dock-h="140" dock-r="left:0px;top:884px;width:1280px;height:140px;right:auto;bottom:auto"><span disabled="disabled" class="ui-control ui-button theme-blue ui-disabled" id="ui-171a52210e9" style='left: 986px; top: 31px; width: 258px; height: 80px; right: auto; bottom: auto; font-family: "IBK iDream M"; font-size: 32px; z-index: 0;' anchor="0b0101" dock="0" ui-id="BT_right" ui-class="UIButton" theme="blue" xonclick="BT_right_OnClick"><span class="ui-content">확인</span></span><span class="ui-control ui-button theme-orange" id="ui-171a52210ea" style='left: 36px; top: 31px; width: 258px; height: 80px; right: auto; bottom: auto; font-family: "IBK iDream M"; font-size: 32px; z-index: 1;' anchor="0b0101" dock="0" ui-id="BT_left" ui-class="UIButton" theme="orange" xonclick="BT_left_OnClick"><span class="ui-content">취소</span></span></div><div class="ui-control ui-panel ui-container ui-dock ui-dock-fill" id="ui-1740452cf9c" style="left: 0px; top: 0px; width: auto; height: auto; right: 0px; bottom: 0px; z-index: 0;" anchor="0b0101" dock="5" ui-id="PN_contents" ui-class="UIPanel" dock-w="200" dock-h="100" dock-r="left:297.33px;top:249.76px;width:200px;height:100px;right:auto;bottom:auto"><span class="ui-control ui-label" id="ui-171a5245d17" style="left: 134px; top: 448px; width: 134px; height: 32px; right: auto; bottom: auto; color: rgb(2, 111, 206); font-size: 28px; z-index: 2;" anchor="0b0101" dock="0" ui-id="LB_label10" ui-class="UILabel"><span class="ui-content">발급기준일</span></span><span class="ui-control ui-textbox" id="ui-171a52210eb" style="left: 134px; top: 496px; width: 475px; height: 100px; right: auto; bottom: auto; font-size: 48px; z-index: 0;" anchor="0b0101" dock="0" ui-id="TB_textbox2" ui-class="UITextBox"><span><input class="ui-input" type="text" maxlength="11" value=""></span></span><div class="ui-control ui-numberpad fixed" id="ui-171a5226656" style="left: 714px; top: 318px; width: 352px; height: 487px; right: auto; bottom: auto; z-index: 1;" anchor="0b0101" dock="0" ui-id="NP_numberpad1" ui-class="UINumberPad" xonkeyclick="NP_numberpad1_OnKeyClick"><table class="fixed" border="0" cellspacing="0" cellpadding="0"><tbody><tr><td key="1"><div>1</div></td><td key="2"><div>2</div></td><td key="3"><div>3</div></td></tr><tr><td key="4"><div>4</div></td><td key="5"><div>5</div></td><td key="6"><div>6</div></td></tr><tr><td key="7"><div>7</div></td><td key="8"><div>8</div></td><td key="9"><div>9</div></td></tr><tr><td class="fix backspace" key=""><div></div></td><td key="0"><div>0</div></td><td class="fix clear" key="정정"><div>정정</div></td></tr></tbody></table><table class="shuffle" border="0" cellspacing="0" cellpadding="0"><tbody><tr><td><div></div></td><td><div></div></td><td><div></div></td><td><div></div></td></tr><tr><td><div></div></td><td><div></div></td><td><div></div></td><td><div></div></td></tr><tr><td><div></div></td><td><div></div></td><td><div></div></td><td><div></div></td></tr><tr><td class="fix shuffle" colspan="2"><div>재배열</div></td><td class="fix backspace" key="backspace"><div></div></td><td class="fix clear" key="clear"><div>정정</div></td></tr></tbody></table></div><span class="ui-control ui-label" id="ui-171aade7f36" style="left: 134px; top: 607px; width: 475px; height: 32px; right: auto; bottom: auto; color: rgb(255, 66, 0); font-size: 22px; z-index: 3;" anchor="0b0101" dock="0" ui-id="LB_label17" ui-class="UILabel"><span class="ui-content">* 당일자, 미래일자는 발급이 불가능합니다.</span></span></div></div></div><xcomponent></xcomponent><xjscript><script id='xjscript' type='text/plain'>includeJSS("common","/KRG/0301/common.js");
let httpQuerys = parseLocationQueryString();
let viewType = httpQuerys["type"]; // 0 : 휴대폰번호, 1: 등록통지 휴대폰번호

// 시간표시
var now = new Date();
var yyyy = now.getFullYear();
var mm = generateDate(now.getMonth() + 1);
var dd = generateDate(now.getDate());   
var todDt = yyyy+'-'+mm+'-'+dd;
p = parent;

 // 한자리수 숫자에 0붙여주기
function generateDate(str)
{    	    	   
    if(str < 10) str = "0" + str;	
	return str
}

function Form_OnLoad(e){
	com.numberpad.btnDisabled(NP_numberpad1);
	NP_numberpad1.$.find(".backspace").attr("key","backspace");
	
	LB_Subtitle.$.css('line-height','45px');
	
	LB_title.$.text('발급기준일 입력');
	LB_Subtitle.$.html('발급기준일을 입력하신 후 <span>확인</span> 을 눌러 주십시오.');
	LB_label17.$.html("* 당일자, 미래일자는 발급이 불가능합니다.");
	
	TB_textbox2.$.find('.ui-input').attr('placeholder','YYYY-MM-DD');
	
	LB_Subtitle.$.find('> span').css({'border-radius':'5px','padding':'4px 15px','font-size':'26px','font-weight':'bold','color':'#fff','background-color':'#176bc8',});
}


function NP_numberpad1_OnKeyClick(e){
	var numBox = TB_textbox2;
	if(e.key == "정정"){
		e.key='';
		numBox.Text = numBox.Text.replace(numBox.Text,"");
		BT_right.Enabled = false;
	}
	else if( e.key == "backspace"){
		e.key='';
		if(numBox.Text.substring ( numBox.Text.length -2, numBox.Text.length-1) == '-') {
			numBox.Text = numBox.Text.substring ( 0, numBox.Text.length -2);	
		} else {
			numBox.Text = numBox.Text.substring ( 0, numBox.Text.length -1);	
		}
		BT_right.Enabled = false;
	} else {
		//글자수 제한
		if(numBox.Text.length < 10){
			
			if( numBox.Text.length == 4 || numBox.Text.length == 7){
				numBox.Text += '-' +e.key;
			}
			else{
				numBox.Text += e.key;
			}
		}
	}
	
	//글자수 제한
	if(numBox.Text.length == 0){
		com.numberpad.notMaxLength(NP_numberpad1);
		com.numberpad.btnDisabled(NP_numberpad1);
	} else if(numBox.Text.length > 0 && numBox.Text.length < 10){
		com.numberpad.notMaxLength(NP_numberpad1);
	} else if(numBox.Text.length == 10) {
		com.numberpad.maxLength(NP_numberpad1);
		dateVali(numBox.Text);
	}	
}

// 날짜 형식 확인_S
function dateVali(tarDate) {
	var dt = tarDate.split("-");
	if(com.date.isValidYear(dt[0]) && com.date.isValidMonth(dt[1]) && com.date.isValidDay(dt[0], dt[1], dt[2]) ) {
		if( todDt <= tarDate) {
			LB_label17.$.html("* 당일자, 미래일자는 발급이 불가능합니다.");
			BT_right.Enabled = false;
		} else {
			BT_right.Enabled = true;
		}
	} else {
		LB_label17.$.html("* 날짜 유형이 틀립니다.");
		BT_right.Enabled = false;
		TB_textbox2.Text = "";
		com.numberpad.notMaxLength(NP_numberpad1);
		com.numberpad.btnDisabled(NP_numberpad1);
	}
}
// 날짜 형식 확인_E

function BT_right_OnClick(e){
	p.allParamData.tarDt = TB_textbox2.Text;
	SCREEN.WriteJnl("**발급기준일: " + p.allParamData.tarDt);
	SCREEN.WriteJnl("[발급기준일 입력] 정상");
	p.ChangeTab("9059");
	p.sendRequest("sendCustomInfo");
}

function BT_left_OnClick(e){
	SCREEN.WriteJnl("[발급기준일 입력] 취소");
	ATMCOMM.BusinessEnd(ATMCOMM.RET_CAN);	//	고객이 취소
}</script></xjscript></body>
</html>
