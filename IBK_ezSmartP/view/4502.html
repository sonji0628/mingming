<!doctype html>
<html version="1000">
<head>
	<meta charset="utf-8">
	<title>ezSmartAtm Builder Form 새문서</title>
	<meta http-equiv="cache-control" content="no-cache">
	<meta http-equiv="pragma" content="no-cache">
	<meta http-equiv="expires" content="0">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<meta name="author" content="[김윤섭][kkobiboy]">
	<link id="ui-style-core" rel="stylesheet" type="text/css" href="/core/app.controls.css">
	<script type="text/javascript" charset="utf-8" src="/HtaPlatform/Core/Form.JsApi"></script>
	<script type="text/javascript" charset="utf-8" src="/core/app.jquery.js"></script>
	<script type="text/javascript" charset="utf-8" src="/core/app.controls.js"></script>
	<style id="ui-style-user" type="text/css"></style>
	<script id="ui-script-user" type="text/javascript"></script>
</head>
<body oncontextmenu="return false;" class="ui-pre-load"><div class="ui-document ui-container" id="ui-document" lang="kr" ui-class="UIForm" ui-id="Form" dock="5" anchor="0b0101" ide-size="1280,1024">
<div class="ui-control ui-panel ui-container" id="ui-171be2e0c07" style="left: 0px; top: 0px; width: 1280px; height: 1024px; right: auto; bottom: auto; z-index: 0; background-color: transparent;" ui-class="UIPanel" ui-id="PN_form" dock="0" anchor="0b0101"><div class="ui-control ui-panel ui-container ui-dock ui-dock-top" id="ui-171be2e0c08" style="left: 0px; top: 0px; width: auto; height: 102px; right: 0px; bottom: auto; z-index: 1; background-color: rgb(23, 107, 200);" ui-class="UIPanel" ui-id="PN_Title" dock="1" anchor="0b0101" dock-r="left:98px;top:1px;width:200px;height:76px;right:auto;bottom:auto" dock-h="102" dock-w="200"><span class="ui-control ui-label" id="ui-171be2e0c09" style='left: 80px; top: 31px; width: 1120px; height: 40px; right: auto; bottom: auto; color: white; font-family: "IBK iDream M"; font-size: 38px; z-index: 0;' ui-class="UILabel" ui-id="LB_title" dock="0" anchor="0b0101"><span class="ui-content">대출</span></span></div><div class="ui-control ui-panel ui-container ui-dock ui-dock-top" id="ui-171be2e0c0a" style="left: 0px; top: 102px; width: auto; height: 92px; right: 0px; bottom: auto; z-index: 3; background-color: whitesmoke;" ui-class="UIPanel" ui-id="PN_Subtitle" dock="1" anchor="0b0101" dock-r="left:0px;top:102px;width:1280px;height:92px;right:auto;bottom:auto" dock-h="92" dock-w="1280"><span class="ui-control ui-label" id="ui-171be2e0c0b" style='left: 82px; top: 30px; width: 1120px; height: 32px; right: auto; bottom: auto; font-family: "IBK iDream L"; font-size: 28px; z-index: 0;' ui-class="UILabel" ui-id="LB_Subtitle" dock="0" anchor="0b0101"><span class="ui-content">계좌정보</span></span></div><div class="ui-control ui-panel ui-container ui-dock ui-dock-bottom" id="ui-171be2e0c0c" style="left: 0px; top: auto; width: auto; height: 140px; right: 0px; bottom: 0px; z-index: 0;" ui-class="UIPanel" ui-id="PN_btn" dock="2" anchor="0b0101" dock-r="left:0px;top:884px;width:1280px;height:140px;right:auto;bottom:auto" dock-h="140" dock-w="1280"><span class="ui-control ui-button theme-orange" id="ui-171aae89da9" style='left: 36px; top: 31px; width: 258px; height: 80px; right: auto; bottom: auto; font-family: "IBK iDream M"; font-size: 32px; z-index: 0;' ui-class="UIButton" ui-id="BT_left" dock="0" anchor="0b0101" xonclick="BT_left_OnClick" theme="orange"><span class="ui-content">닫기</span></span></div><div class="ui-control ui-panel ui-container" id="ui-171be2e0c0e" style="left: 0px; top: 194px; width: 1280px; height: 690px; right: auto; bottom: auto; z-index: 2;" ui-class="UIPanel" ui-id="PN_contents" dock="0" anchor="0b0101"><div class="ui-control ui-panel ui-container" id="ui-172dae2ff15" style="left: 91px; top: 47px; width: 1109px; height: 611px; right: auto; bottom: auto; z-index: 0;" ui-class="UIPanel" ui-id="PN_accountInfo" dock="0" anchor="0b0101"><span class="ui-control ui-label" id="ui-1721784f6b1" style='left: 0px; top: 0px; width: 535px; height: 30px; right: auto; bottom: auto; color: rgb(0, 104, 196); font-family: "IBK iDream M"; font-size: 24px; z-index: 0;' ui-class="UILabel" ui-id="LB_productName" dock="0" anchor="0b0101"><span class="ui-content"></span></span><span class="ui-control ui-label" id="ui-17217861115" style="left: 0px; top: 48px; width: 120px; height: 32px; right: auto; bottom: auto; font-size: 18px; z-index: 1;" ui-class="UILabel" ui-id="LB_label2" dock="0" anchor="0b0101"><span class="ui-content" style="align-items: flex-start;">기본정보</span></span><div class="ui-control ui-table" id="ui-171be2e0c0f" style="border-width: 2px; border-color: rgb(194, 194, 194); left: 0px; top: 77px; width: 1076px; height: 223px; right: auto; bottom: auto; z-index: 2;" ui-class="UITable" ui-id="TL_loan1_1" dock="0" anchor="0b0101"><table border="0" cellspacing="0" cellpadding="0"><thead><tr><td width="210" type="1" align-h="align-left" align-v="align-middle"></td><td type="1" align-h="align-left" align-v="align-middle"></td></tr></thead><tbody><tr height="25%"><td><div class="ui-table-cell align-left align-middle ui-container" id="ui-17394401696" style="padding: 0px 0px 0px 20px; font-size: 21px; background-color: rgb(242, 242, 242);"><span class="cell-control-label">계좌번호</span></div></td><td><div class="ui-table-cell align-left align-middle ui-container" id="ui-17394401697" style="padding: 0px 0px 0px 20px; color: rgb(29, 29, 29); font-size: 21px;"></div></td></tr><tr height="25%"><td><div class="ui-table-cell align-left align-middle ui-container" id="ui-17394401698" style='padding: 0px 0px 0px 20px; font-family: "Noto sans CJK KR", "맑은 고딕", "Arial", "IBK IDream L", "IBK IDream M", "IBK IDream B", "IBK IDream EB", "IBK IDream Symbol", "IBK IWishR"; font-size: 21px; background-color: rgb(242, 242, 242);'><span class="cell-control-label">대출이율</span></div></td><td><div class="ui-table-cell align-left align-middle ui-container" id="ui-17394401699" style="padding: 0px 0px 0px 20px; font-size: 22px;"></div></td></tr><tr height="25%"><td><div class="ui-table-cell align-left align-middle ui-container" id="ui-1739440169a" style="padding: 0px 0px 0px 20px; font-size: 21px; background-color: rgb(242, 242, 242);"><span class="cell-control-label">잔액</span></div></td><td><div class="ui-table-cell align-left align-middle ui-container" id="ui-1739440169b" style="padding: 0px 20px; font-size: 22px; justify-content: flex-start;"></div></td></tr><tr height="25%"><td><div class="ui-table-cell align-left align-middle ui-container" id="ui-1739440169c" style="padding: 0px 0px 0px 20px; font-size: 21px; background-color: rgb(242, 242, 242);"><span class="cell-control-label">대출만기일</span></div></td><td><div class="ui-table-cell align-left align-middle ui-container" id="ui-1739440169d" style="padding: 0px 0px 0px 20px; font-size: 22px; justify-content: flex-start;"></div></td></tr></tbody></table></div><span class="ui-control ui-label" id="ui-17217889a21" style="left: 0px; top: 325px; width: 120px; height: 32px; right: auto; bottom: auto; font-size: 18px; z-index: 3;" ui-class="UILabel" ui-id="LB_label3" dock="0" anchor="0b0101"><span class="ui-content" style="align-items: flex-start;">상세정보</span></span><div class="ui-control ui-table" id="ui-172178c5fee" style="border-width: 2px; border-color: rgb(194, 194, 194); left: 0px; top: 354px; width: 1076px; height: 489px; right: auto; bottom: auto; z-index: 4;" ui-class="UITable" ui-id="TL_loan1_2" dock="0" anchor="0b0101"><table border="0" cellspacing="0" cellpadding="0"><thead><tr><td width="210" type="1" align-h="align-left" align-v="align-middle"></td><td type="1" align-h="align-left" align-v="align-middle"></td></tr></thead><tbody><tr height="11%"><td><div class="ui-table-cell align-left align-middle ui-container" id="ui-1739440169e" style="padding: 0px 0px 0px 20px; font-size: 21px; background-color: rgb(242, 242, 242);"><span class="cell-control-label">계좌상태</span></div></td><td><div class="ui-table-cell align-left align-middle ui-container" id="ui-1739440169f" style="padding: 0px 0px 0px 20px; color: rgb(29, 29, 29); font-size: 21px;"></div></td></tr><tr height="11%"><td><div class="ui-table-cell align-left align-middle ui-container" id="ui-173944016a0" style='padding: 0px 0px 0px 20px; font-family: "Noto sans CJK KR", "맑은 고딕", "Arial", "IBK IDream L", "IBK IDream M", "IBK IDream B", "IBK IDream EB", "IBK IDream Symbol", "IBK IWishR"; font-size: 21px; background-color: rgb(242, 242, 242);'><span class="cell-control-label">신규일</span></div></td><td><div class="ui-table-cell align-left align-middle ui-container" id="ui-173944016a1" style="padding: 0px 0px 0px 20px; font-size: 22px;"></div></td></tr><tr height="11%"><td><div class="ui-table-cell align-left align-middle ui-container" id="ui-173944016a2" style="padding: 0px 0px 0px 20px; font-size: 21px; background-color: rgb(242, 242, 242);"><span class="cell-control-label">대출금액</span></div></td><td><div class="ui-table-cell align-left align-middle ui-container" id="ui-173944016a3" style="padding: 0px 20px; font-size: 22px; justify-content: flex-start;"></div></td></tr><tr height="11%"><td><div class="ui-table-cell align-left align-middle ui-container" id="ui-173944016a4" style="padding: 0px 0px 0px 20px; font-size: 21px; background-color: rgb(242, 242, 242);"><span class="cell-control-label">이자구분</span></div></td><td><div class="ui-table-cell align-left align-middle ui-container" id="ui-173944016a5" style="padding: 0px 0px 0px 20px; font-size: 22px; justify-content: flex-start;"></div></td></tr><tr height="11%"><td><div class="ui-table-cell align-left align-middle ui-container" id="ui-173944016a6" style="padding: 0px 0px 0px 20px; font-size: 21px; background-color: rgb(242, 242, 242);"><span class="cell-control-label">금리종류</span></div></td><td><div class="ui-table-cell align-left align-middle ui-container" id="ui-173944016a7" style="padding: 0px 0px 0px 20px; font-size: 22px; justify-content: flex-start;"></div></td></tr><tr height="11%"><td><div class="ui-table-cell align-left align-middle ui-container" id="ui-173944016a8" style="padding: 0px 0px 0px 20px; font-size: 21px; background-color: rgb(242, 242, 242);"><span class="cell-control-label">약정이율</span></div></td><td><div class="ui-table-cell align-left align-middle ui-container" id="ui-173944016a9" style="padding: 0px 0px 0px 20px; font-size: 22px; justify-content: flex-start;"></div></td></tr><tr height="11%"><td><div class="ui-table-cell align-left align-middle ui-container" id="ui-173944016aa" style="padding: 0px 0px 0px 20px; font-size: 21px; background-color: rgb(242, 242, 242);"><span class="cell-control-label">최종이자수입일</span></div></td><td><div class="ui-table-cell align-left align-middle ui-container" id="ui-173944016ab" style="padding: 0px 0px 0px 20px; font-size: 22px; justify-content: flex-start;"></div></td></tr><tr height="11%"><td><div class="ui-table-cell align-left align-middle ui-container" id="ui-173944016ac" style="padding: 0px 0px 0px 20px; font-size: 21px; background-color: rgb(242, 242, 242);"><span class="cell-control-label">다음이자납입일</span></div></td><td><div class="ui-table-cell align-left align-middle ui-container" id="ui-173944016ad" style="padding: 0px 0px 0px 20px; font-size: 22px; justify-content: flex-start;"></div></td></tr><tr height="12%"><td style="border-color: rgb(29, 29, 29);"><div class="ui-table-cell align-left align-middle ui-container" id="ui-173944016ae" style="padding: 0px 0px 0px 20px; font-size: 21px; background-color: rgb(242, 242, 242);"><span class="cell-control-label">상환방법</span></div></td><td><div class="ui-table-cell align-left align-middle ui-container" id="ui-173944016af" style="padding: 0px 0px 0px 20px; font-size: 22px;"></div></td></tr></tbody></table></div><span class="ui-control ui-button theme-blue" id="ui-172dff24f6a" style='border-radius: 27px; left: 630px; top: 11px; width: 219px; height: 54px; right: auto; bottom: auto; font-family: "IBK iDream M"; font-size: 21px; z-index: 5;' ui-class="UIButton" ui-id="BT_tranList" dock="0" anchor="0b0101" xonclick="BT_tranList_OnClick" theme="blue" back-image-pos="45px,17px"><span class="ui-content" style="left: 40px; top: 0px; right: 0px; bottom: 0px;">거래내역</span><span class="ui-back-image" style='background-position: 45px 17px; background-image: url("/KRG/media/btn_tranList.png");'></span></span><span class="ui-control ui-button theme-blue" id="ui-17394556e9b" style='border-radius: 27px; left: 855px; top: 11px; width: 219px; height: 54px; right: auto; bottom: auto; font-family: "IBK iDream M"; font-size: 21px; z-index: 6;' ui-class="UIButton" ui-id="BT_transfer" dock="0" anchor="0b0101" xonclick="BT_transfer_OnClick" theme="blue" back-image-pos="45px,13px"><span class="ui-content" style="left: 40px; top: 0px; right: 0px; bottom: 0px;">이자납입</span><span class="ui-back-image" style='background-position: 45px 13px; background-image: url("/KRG/media/btn_payment.png");'></span></span></div><span class="ui-control ui-scrollbar" id="ui-1721787f7d3" style="left: 1209px; top: 47px; width: 32px; height: 611px; right: auto; bottom: auto; z-index: 1;" ui-class="UIScrollBar" ui-id="SB_scrollbar1" dock="0" anchor="0b0101" scroll-control-id="PN_accountInfo"><span class="track"></span><span class="trackbutton" style="top: 0px;"></span></span></div></div></div><xcomponent></xcomponent><xjscript><script id='xjscript' type='text/plain'>includeJSS("LibCommon","/KRG/0301/common.js"); // LibUtil import

/*
	#4501 대출 - 계좌정보
	
	
	# Case 
	1. 계좌조회(2511) -> 대출탭 대출정보(4502)
	2. 대출이자납부 계좌조회(4501) -> 대출정보(4502)
*/
let p = parent;

// 거래내역 
function BT_tranList_OnClick(e){
	p.gData.CTNT_TRN_DCD = "0";					// 바이오토큰값 ( 임시로 0으로 셋팅)
	p.gData.ATMC_CARD_DCD = "VCC";					// 바이오토큰이 있다면 "JJM" 없으면 "VCC"
	p.gData.INPT_DCD = "2";						// 입력구분코드 1 : 최근거래일조회내역, 2 : 전체거래내역 선택 ( 초기값 :  2 )
	p.gData.INQ_NBI = 000000000000005;				// 조회건수 ( 값 고정 )
	SCREEN.WriteJnl("[거래내역] 선택");
	p.sendRequest("searchLoanTranList", {prevFlag:true});
}

// 이자납입 팝업
function BT_transfer_OnClick(e){
	console.log("대출 이자납입 팝업처리");
	SCREEN.WriteJnl("[대출이자납입] 선택");
	p.sendRequest("searchLoanInt", {prevScreen:4502});
}

// 계좌목록으로 이동
function BT_left_OnClick(e){ 
	console.log(p.MAINPAGE)	
	// 4502를 포함하고 있는 탭페이지가 2510이면 화면을 2511번(계좌조회 - 대출탭)으로 이동.
	if(p.MAINPAGE == "2510"){
		SCREEN.WriteJnl("[계좌조회 - 대출] 이동");
		p.ChangeTab("2511");
	} else if(p.MAINPAGE == "4500"){
		// 4502를 포함하고 있는 탭페이지가 4500이면 화면을 4501번(대출이자납입 - 계좌조회)으로 이동.
		SCREEN.WriteJnl("[대출이자납입 - 계좌조회] 이동");
		p.ChangeTab("4501");
	}
}

function init(){
	// 우선 이자납입 버튼 숨기고, 거래내역 버튼을 오른쪽으로 옮김
	BT_transfer.Visible = false;
	BT_tranList.setPosition({X:855, Y:11});
	
	// 바이오 토큰이 있다면 이자납입 버튼 show, 거래내역 버튼 왼쪽으로 이동
	if(p.getBioTokenIs()){
		BT_transfer.Visible = true;
		BT_tranList.setPosition({X:630, Y:11});
	}
}

// 대출 계좌정보 출력
function ReceiveTran(obj){
	console.log(JSON.stringify(obj));
	let dayArr = ['일','월','화','수','목','금','토'];
	let dataInfo = p.gData;
	
	LB_productName.setText(dataInfo.PDM);	// 상품코드명
	
	// 기본정보
	TL_loan1_1.DataCell(0, 1, "text", p.ReturnFormatAccount(obj.CUS_ACN.trim()));											// 고객계좌번호
	TL_loan1_1.DataCell(1, 1, "text", dataInfo.LARV_AGRM_IRT.substr(3, 4) + "%");											// 대출이율
	TL_loan1_1.DataCell(2, 1, "text", parseInt(dataInfo.TLBZ_BAL).toLocaleString() + " 원");										// 잔액
	
	if(!com.util.isNull2(dataInfo.EXPI_YMD.trim())){
		let EXPI_YMD = p.ReturnFormatDateHyphen(dataInfo.EXPI_YMD);
		TL_loan1_1.DataCell(3, 1, "text", EXPI_YMD + "(" + dayArr[p.getToDateObj(dataInfo.EXPI_YMD).getDay()] + ")");		// 대출만기일
	}
	
	// 상세정보
	TL_loan1_2.DataCell(0, 1, "text", obj.OVDU_YN == "N" ? "정상" : "연체");													// 계좌상태
	
	if(!com.util.isNull2(obj.LNAG_YMD.trim())){
		let LNAG_YMD = p.ReturnFormatDateHyphen(obj.LNAG_YMD);
		TL_loan1_2.DataCell(1, 1, "text", LNAG_YMD + "(" + dayArr[p.getToDateObj(obj.LNAG_YMD).getDay()] + ")"); 			// 신규일
	}
	TL_loan1_2.DataCell(2, 1, "text", parseInt(obj.ARR_AMT).toLocaleString() + " 원");												// 대출금액
	TL_loan1_2.DataCell(3, 1, "text", obj.IRCD_NM_3.trim() + "일자");														// 이자구분
	TL_loan1_2.DataCell(4, 1, "text", obj.BAIN_CD_NM);																		// 금리종류
	TL_loan1_2.DataCell(5, 1, "text", obj.AGRM_IRT.substr(3, 4) + "%");														// 약정이율
	
	if(!com.util.isNull2(obj.LAST_ITRV_YMD.trim())){
		let LAST_ITRV_YMD = p.ReturnFormatDateHyphen(obj.LAST_ITRV_YMD);
		TL_loan1_2.DataCell(6, 1, "text", LAST_ITRV_YMD + "(" + dayArr[p.getToDateObj(obj.LAST_ITRV_YMD).getDay()] + ")"); 	// 최종이자수입일
	}
	if(!com.util.isNull2(obj.NEXT_ITPM_YMD.trim())){
		let NEXT_ITPM_YMD = p.ReturnFormatDateHyphen(obj.NEXT_ITPM_YMD);
		TL_loan1_2.DataCell(7, 1, "text", NEXT_ITPM_YMD + "(" + dayArr[p.getToDateObj(obj.NEXT_ITPM_YMD).getDay()] + ")"); 	// 다음이자납입일
	}
	TL_loan1_2.DataCell(8, 1, "text", obj.PRWY_CD_NM); 																		// 상환방법
}</script></xjscript></body>
</html>
