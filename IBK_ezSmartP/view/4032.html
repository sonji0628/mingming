<!doctype html>
<html version="1000">
<head>
	<meta charset="utf-8">
	<title>ezSmartAtm Builder Form 새문서</title>
	<meta http-equiv="cache-control" content="no-cache">
	<meta http-equiv="pragma" content="no-cache">
	<meta http-equiv="expires" content="0">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<meta name="author" content="[김윤섭][kkobiboy]">
	<link id="ui-style-core" rel="stylesheet" type="text/css" href="/core/app.controls.css">
	<script type="text/javascript" charset="utf-8" src="/HtaPlatform/Core/Form.JsApi"></script>
	<script type="text/javascript" charset="utf-8" src="/core/app.jquery.js"></script>
	<script type="text/javascript" charset="utf-8" src="/core/app.controls.js"></script>
	<style id="ui-style-user" type="text/css"></style>
	<script id="ui-script-user" type="text/javascript"></script>
</head>
<body oncontextmenu="return false;" class="ui-pre-load"><div class="ui-document ui-container" id="ui-document" lang="kr" ide-size="1379,1134" anchor="0b0101" dock="5" ui-id="Form" ui-class="UIForm" xonload="Form_OnLoad">
<div class="ui-control ui-panel ui-container" id="ui-17400898837" style="left: 0px; top: 0px; width: 1280px; height: 1024px; right: auto; bottom: auto; z-index: 0;" anchor="0b0101" dock="0" ui-id="PN_form" ui-class="UIPanel"><div class="ui-control ui-panel ui-container ui-dock ui-dock-top" id="ui-171ab1ec0c6" style="left: 0px; top: 0px; width: auto; height: 102px; right: 0px; bottom: auto; z-index: 0; background-color: rgb(23, 107, 200);" anchor="0b0101" dock="1" ui-id="PN_Title" ui-class="UIPanel" dock-w="200" dock-h="102" dock-r="left:123px;top:-71px;width:200px;height:76px;right:auto;bottom:auto"><span class="ui-control ui-label" id="ui-171ab1ec0c7" style='left: 80px; top: 31px; width: 400px; height: 40px; right: auto; bottom: auto; color: white; font-family: "IBK iDream M"; font-size: 38px; z-index: 0;' anchor="0b0101" dock="0" ui-id="LB_title" ui-class="UILabel"><span class="ui-content">전자금융 출금계좌등록</span></span></div><div class="ui-control ui-panel ui-container ui-dock ui-dock-top" id="ui-171ab1ec0c8" style="left: 0px; top: 102px; width: auto; height: 92px; right: 0px; bottom: auto; z-index: 1; background-color: whitesmoke;" anchor="0b0101" dock="1" ui-id="PN_Subtitle" ui-class="UIPanel" dock-w="1280" dock-h="92" dock-r="left:25px;top:100px;width:1280px;height:92px;right:auto;bottom:auto"><span class="ui-control ui-label" id="ui-171a52210e5" style='left: 82px; top: 24px; width: 1120px; height: 32px; right: auto; bottom: auto; font-family: "IBK iDream M"; font-size: 28px; z-index: 0;' anchor="0b0101" dock="0" ui-id="LB_Subtitle" ui-class="UILabel"><span class="ui-content">계좌선택</span></span></div><div class="ui-control ui-panel ui-container ui-dock ui-dock-fill" id="ui-171ab1ec0ce" style="left: 0px; top: 194px; width: auto; height: auto; right: 0px; bottom: 0px; z-index: 2;" anchor="0b0101" dock="5" ui-id="PN_contents" ui-class="UIPanel" dock-w="1280" dock-h="690" dock-r="left:25px;top:192px;width:1280px;height:690px;right:auto;bottom:auto"><div class="ui-control ui-panel ui-container" id="ui-171ab1ec0d1" style="left: 78px; top: 58px; width: 1124px; height: 587px; right: auto; bottom: auto; font-size: 24px; z-index: 0;" anchor="0b0101" dock="0" ui-id="PN_account" ui-class="UIPanel"><span class="ui-control ui-label ui-hide" id="ui-17330f5493f" style='left: 226px; top: 196px; width: 672px; height: 195px; right: auto; bottom: auto; font-family: "IBK IDream M"; font-size: 36px; z-index: 0;' anchor="0b0101" dock="0" ui-id="LB_label1" ui-class="UILabel" icon-image-align="center,top" icon-image-padding="0,0,0,30"><span class="ui-content" style="left: 0px; top: 40px; right: 0px; bottom: 0px;">출금계좌 등록 가능한 추가계좌가 없습니다.</span><span class="ui-icon-image" style='background-position: top; left: 0px; top: 0px; right: 0px; bottom: 30px; background-image: url("/KRG/media/ic_search_nolist.png");'></span></span></div><span class="ui-control ui-scrollbar" id="ui-171ab1ec0d2" style="left: 1217px; top: 58px; width: 32px; height: 584px; right: auto; bottom: auto; z-index: 1;" anchor="0b0101" dock="0" ui-id="SB_scrollbar1" ui-class="UIScrollBar" scroll-control-id="PN_account"><span class="track"></span><span class="trackbutton"></span></span></div><div class="ui-control ui-panel ui-container ui-dock ui-dock-bottom" id="ui-171ab1ec0cb" style="left: 0px; top: auto; width: auto; height: 140px; right: 0px; bottom: 0px; z-index: 3; background-color: transparent;" anchor="0b0101" dock="2" ui-id="PN_btn" ui-class="UIPanel" dock-w="1280" dock-h="140" dock-r="left:25px;top:812px;width:1280px;height:140px;right:auto;bottom:auto"><span class="ui-control ui-button theme-blue" id="ui-171ab1ec0cc" style='left: 986px; top: 31px; width: 258px; height: 80px; right: auto; bottom: auto; font-family: "IBK iDream M"; font-size: 32px; z-index: 0;' anchor="0b0101" dock="0" ui-id="BT_right" ui-class="UIButton" theme="blue" xonclick="BT_right_OnClick"><span class="ui-content">확인</span></span><span class="ui-control ui-button theme-orange" id="ui-171ab1ec0cd" style='left: 36px; top: 31px; width: 258px; height: 80px; right: auto; bottom: auto; font-family: "IBK iDream M"; font-size: 32px; z-index: 1;' anchor="0b0101" dock="0" ui-id="BT_left" ui-class="UIButton" theme="orange" xonclick="BT_left_OnClick"><span class="ui-content">취소</span></span></div></div></div><xcomponent></xcomponent><xjscript><script id='xjscript' type='text/plain'>/*	include */
includeJSS("LibCommon","/KRG/0301/common.js");


var selectedAccount;
let p = parent;


function Form_OnLoad(e){
	
	BT_right.Enabled = false;
	LB_Subtitle.$.find('.ui-content').html("계좌선택 <span>|</span> <span>거래하실 계좌번호를 눌러 주십시오.</span>");
	LB_Subtitle.$.find('span:eq(1)').css({'margin':'0px 25px','color':'rgb(191, 191, 191)'});
	LB_Subtitle.$.find('span:eq(2)').css({"font-size":'21px','font-family':'"IBK IDream L"'});
/*
	let data = [
		{ accountnum:"01127876401973"},
		{ accountnum:"09197876402211"},
		{ accountnum:"01177876407139"},
		{ accountnum:"03187640836955"},
		{ accountnum:"09169654409741"},
		{ accountnum:"04167776211852"},
		{ accountnum:"07891276121109"},
		{ accountnum:"03797870431567"},
		{ accountnum:"06485816441100"},
		{ accountnum:"05764845101012"},
		{ accountnum:"01357876461101"}
	];
	accountList(data);
*/
}


//계좌목록뿌리는 함수
function accountList(data){	
	let tag = [];
	
	let rc = Math.floor( (data.length-1) / 3 ) + 1;
	let ri = rc * 3 - data.length;
		
	for(let j = 0; j < ri; j++){
		data.push({emtpy : true});
	}		

	//계좌번호가 있을때
	if(data.length != 0){
		for(let i=0;i<data.length;i++){
			let r = data[i];
			if(r.emtpy){
				tag.push(""
					+'<div class="card-item emtpy">'
					+'</div>'
				);
				continue;				
			}
			tag.push(""
		        +'<div class="card-item">'
		        +'	<div class="card_info">'
	            +'    <div class="card_num">1234-****-****-5678</div>'
	            +'	</div>'
		        +'</div>'
			);
		}
		
		let $PN_account = $("div[ui-id='PN_account']");
		
		$PN_account.html(""
			+'<div class="card-panel">'
			+tag.join("")
			+'</div>'
		);
		
		$PN_account = $("div[ui-id='PN_account'] > div.card-panel");	
			if($PN_account[0].offsetHeight <= $PN_account[0].parentElement.clientHeight){
			//$PN_account.height("100%");
		}
		
		
		PN_account.$.find(".card-panel >.card-item").css({"height":"177px","width":"354px"});	
		
		$PN_account.find("div.card-item > div.card_info > div.card_num").each(function(i){
			$(this).text(com.acct.accountHypen(data[i].accountnum));
		});
		$PN_account.css("visibility","visible");
	
		SB_scrollbar1.Invalidate();
	}
	//계좌번호가 없을때
	else{
		LB_label1.Visible = true;
		SB_scrollbar1.Visible = false;
	}
	
	
	
	///////////////////////////////////////////////////////////////////////////////////////////////////////////////////
	//
	//클릭이벤트
	//
	///////////////////////////////////////////////////////////////////////////////////////////////////////////////////		
	
	PN_account.$.find(".card-panel >.card-item").click(function(){
		PN_account.$.find("div.card-item").removeClass("select");
	    BT_right.Enabled = true;
		comSelectAnimate.call(this,$("div.card-item"));															//클릭 animate
		$(this).addClass("select");
		selectedAccount = PN_account.$.find("div.card-panel >.select >.card_info >.card_num").text();			//선택된계좌번호 저장
	    console.log("4032 selectedAccount : " + selectedAccount);
	});
	
	//위에랑 같은 내용
	/*
	PN_account.$.find(".card_info").mousedown(select);
	
	function select(e){
		PN_account.$.find("div.card_info").parent().css('border','1px solid #9c9c9c');
	    PN_account.$.find("div.card_info").removeClass("select");
	    //선택하면 확인키 Enabled true
	    BT_right.Enabled = true;
	    
	    var click = this;        
	    $(click).animate({
	        top: '+=5px',
	        opacity: '0.5',
	    }, 50, reback);
		
	    function reback() {
	        $(click).animate({
	            top: '-=5px',
	            opacity: '1',
	        }, 50);	
	        click = null;
	    }
		
		
	    $(click).parent().css({ "border": "5px solid #9e9e9e"});
	    $(click).addClass("select");        
	    selectedAccount = PN_account.$.find("div.card-item > .select").text().trim();			//선택된계좌번호 저장
	    console.log("4032 selectedAccount : " + selectedAccount);
	    chs = null;
	};
	*/
}


///////////////////////////////////////////////////////////////////////////////////////////////////////////////////
///////////////////////////////////////////////////////////////////////////////////////////////////////////////////

function BT_left_OnClick(e){
	//취소
	SCREEN.WriteJnl("[계좌 비밀번호 입력] 취소");
	ATMCOMM.BusinessEnd(ATMCOMM.RET_CAN);
}

///////////////////////////////////////////////////////////////////////////////////////////////////////////////////
///////////////////////////////////////////////////////////////////////////////////////////////////////////////////

function BT_right_OnClick(e){
	//확인	
	var account = selectedAccount;	
	console.log("selectedAccount4032 : " +account);
	SCREEN.WriteJnl("**계좌번호: "+ account);
	SCREEN.WriteJnl("[계좌 비밀번호 입력] 정상");
	p.ChangeTab("9047");	
}

///////////////////////////////////////////////////////////////////////////////////////////////////////////////////
///////////////////////////////////////////////////////////////////////////////////////////////////////////////////</script></xjscript></body>
</html>
