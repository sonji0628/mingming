<!doctype html>
<html version="1000">
<head>
	<meta charset="utf-8">
	<title>ezSmartAtm Builder Form 새문서</title>
	<meta http-equiv="cache-control" content="no-cache">
	<meta http-equiv="pragma" content="no-cache">
	<meta http-equiv="expires" content="0">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<meta name="author" content="[김윤섭][kkobiboy]">
	<link id="ui-style-core" rel="stylesheet" type="text/css" href="/core/app.controls.css">
	<script type="text/javascript" charset="utf-8" src="/HtaPlatform/Core/Form.JsApi"></script>
	<script type="text/javascript" charset="utf-8" src="/core/app.jquery.js"></script>
	<script type="text/javascript" charset="utf-8" src="/core/app.controls.js"></script>
	<style id="ui-style-user" type="text/css"></style>
	<script id="ui-script-user" type="text/javascript"></script>
</head>
<body oncontextmenu="return false;" class="ui-pre-load"><div class="ui-document ui-container" id="ui-document" lang="kr" ide-size="1280,1024" anchor="0b0101" dock="5" ui-id="Form" ui-class="UIForm">
<div class="ui-control ui-panel ui-container" id="ui-171a514f762" style="left: 0px; top: 0px; width: 1280px; height: 1024px; right: auto; bottom: auto; z-index: 0; background-color: transparent;" anchor="0b0101" dock="0" ui-id="PN_form" ui-class="UIPanel"><div class="ui-control ui-panel ui-container ui-dock ui-dock-top" id="ui-171a514f763" style="left: 0px; top: 0px; width: auto; height: 102px; right: 0px; bottom: auto; z-index: 1; background-color: rgb(23, 107, 200);" anchor="0b0101" dock="1" ui-id="PN_Title" ui-class="UIPanel" dock-w="200" dock-h="102" dock-r="left:98px;top:1px;width:200px;height:76px;right:auto;bottom:auto"><span class="ui-control ui-label" id="ui-171a514f764" style='left: 80px; top: 31px; width: 400px; height: 40px; right: auto; bottom: auto; color: white; font-family: "IBK iDream M"; font-size: 38px; z-index: 0;' anchor="0b0101" dock="0" ui-id="LB_title" ui-class="UILabel"><span class="ui-content">송금인 입력</span></span></div><div class="ui-control ui-panel ui-container ui-dock ui-dock-top" id="ui-171a514f765" style="left: 0px; top: 102px; width: auto; height: 92px; right: 0px; bottom: auto; z-index: 4; background-color: whitesmoke;" anchor="0b0101" dock="1" ui-id="PN_Subtitle" ui-class="UIPanel" dock-w="1280" dock-h="92" dock-r="left:0px;top:102px;width:1280px;height:92px;right:auto;bottom:auto"><span class="ui-control ui-label" id="ui-171a514f766" style='left: 82px; top: 30px; width: 1044px; height: 40px; right: auto; bottom: auto; font-family: "IBK iDream L"; font-size: 28px; z-index: 0;' anchor="0b0101" dock="0" ui-id="LB_Subtitle" ui-class="UILabel"><span class="ui-content">보내시는 분의 성명을 입력하여 주십시오.</span></span></div><div class="ui-control ui-panel ui-container ui-dock ui-dock-bottom" id="ui-171a514f767" style="left: 0px; top: auto; width: auto; height: 140px; right: 0px; bottom: 0px; z-index: 0;" anchor="0b0101" dock="2" ui-id="PN_btn" ui-class="UIPanel" dock-w="1280" dock-h="140" dock-r="left:0px;top:884px;width:1280px;height:140px;right:auto;bottom:auto"><span class="ui-control ui-button theme-blue" id="ui-171a514f768" style='left: 986px; top: 31px; width: 258px; height: 80px; right: auto; bottom: auto; font-family: "IBK iDream M"; font-size: 32px; z-index: 0;' anchor="0b0101" dock="0" ui-id="BT_right" ui-class="UIButton" theme="blue" xonclick="BT_right_OnClick"><span class="ui-content">확인</span></span><span class="ui-control ui-button theme-orange" id="ui-171a514f769" style='left: 36px; top: 31px; width: 258px; height: 80px; right: auto; bottom: auto; font-family: "IBK iDream M"; font-size: 32px; z-index: 1;' anchor="0b0101" dock="0" ui-id="BT_left" ui-class="UIButton" theme="orange" xonclick="BT_left_OnClick"><span class="ui-content">취소</span></span><span class="ui-control ui-button theme-mint" id="ui-1740ec2ac02" style='left: 518px; top: 31px; width: 258px; height: 80px; right: auto; bottom: auto; font-family: "IBK iDream M"; font-size: 32px; z-index: 2;' anchor="0b0101" dock="0" ui-id="BT_center" ui-class="UIButton" theme="mint" xonclick="BT_center_OnClick"><span class="ui-content">SMS보내기</span></span></div><span class="ui-control ui-textbox" id="ui-171a51ed163" style="left: 340px; top: 286px; width: 604px; height: 100px; right: auto; bottom: auto; font-size: 26px; z-index: 2;" anchor="0b0101" dock="0" ui-id="TB_textbox1" ui-class="UITextBox"><span><input class="ui-input" style="text-align: center;" type="text" maxlength="7" value=""></span></span><div class="ui-control ui-panel ui-container" id="ui-171a51dda23" style="left: 0px; top: 433px; width: 1280px; height: 469px; right: auto; bottom: auto; z-index: 3;" anchor="0b0101" dock="0" ui-id="PN_panel3" ui-class="UIPanel"><iframe class="ui-include" src="/core/keyboard.html" frameborder="0" scrolling="0"></iframe></div><span class="ui-control ui-label" id="ui-171aade7f36" style="left: 0px; top: 250px; width: 1280px; height: 20px; right: auto; bottom: auto; color: rgb(255, 66, 0); font-size: 20px; z-index: 5;" anchor="0b0101" dock="0" ui-id="LB_label17" ui-class="UILabel"><span class="ui-content" style="justify-content: center;"><span style="color: rgb(244, 84, 8);">* SMS 전송을 하시려면 송금인 입력 후<span style="color: rgb(23, 107, 200);">&nbsp;SMS보내기&nbsp;</span>를 눌러 주십시오.</span></span></span><span class="ui-control ui-label ui-hide" id="ui-174b9c15a1f" style="left: 0px; top: 400px; width: 1280px; height: 20px; right: auto; bottom: auto; color: rgb(255, 66, 0); font-size: 20px; z-index: 6;" anchor="0b0101" dock="0" ui-id="LB_textLengthLimit" ui-class="UILabel"><span class="ui-content" style="justify-content: center;">한글 최대 7자리, 영문/숫자14자리 까지 입력 가능합니다.</span></span></div><span class="ui-control ui-button" id="ui-171a1030c79" style="left: 1028px; top: 118px; width: 199px; height: 64px; right: auto; bottom: auto; z-index: 1;" anchor="0b0101" dock="0" ui-id="BT_button20" ui-class="UIButton" theme="" xonclick="BT_button20_OnClick"><span class="ui-content"></span><span class="ui-back-image" style='background-image: url("/KRG/media/btn_voice_input_nor.png");'></span></span></div><xcomponent></xcomponent><xjscript><script id='xjscript' type='text/plain'>includeJSS("LibCommon","/KRG/0301/common.js");// LibUtil import
/*
	# 2564 - 송금인 입력
*/
let p = parent;

// 입력컴포넌트 초기화
function init(){
	//keyboard
	let iwin = PN_panel3.IncludeWindow;
	iwin.txtBox = TB_textbox1;
	
	//한글 최대 7자리, 영문/숫자14자리 까지 가능
	// 텍스트박스
	TB_textbox1.$.find('.ui-input').attr("disabled","disabled");
	TB_textbox1.$.find(".ui-input")
		.attr("placeholder","한글 최대 7자리, 영문/숫자14자리 까지 가능")
		.css({'font-size':'26px'});
		
	// ie에서 placeholder에 스타일 적용하기위해 !important 사용함.
	var style = document.createElement('style');
	style.innerHTML = ".ui-input:-ms-input-placeholder{padding:0px;text-align:center !important;};"
	document.head.appendChild(style);
		
	if(p.tranType == "2"){ // 타행거래인경우 SMS송금버튼 hide
		BT_center.Visible = false;
	}
}

// 거래종료
function BT_left_OnClick(e){
	ATMCOMM.BusinessEnd(ATMCOMM.RET_CAN);
}

// SMS전송
function BT_center_OnClick(e){
	if(saveText()) p.ChangeTab("2565");
}

// 명세표 선택화면으로 이동
function BT_right_OnClick(e){
	if(saveText()) p.ChangeTab("2566");
}

// 입력한 텍스트 전역변수에 저장
function saveText(){
	if(retStringByteLength(TB_textbox1.Text) > 14){
		// 14바이트 제한
		LB_textLengthLimit.Visible = true;
		// 아이콘 깜빡임 적용
		let start = setInterval(startIconToggle,400);	
			
		// 4초후 히든 설정
	    setTimeout(function(){
			// 아이콘 깜빡임 중지
			clearInterval(start);				
	    }, 4000);
	    
		return false;
	}
	
	// 송금인 값에 추가 
	p._RMTN_RQTR_NM = TB_textbox1.Text;	
	LB_textLengthLimit.Visible = false;
	
	
	return true;
}

// 음성검색
function BT_button20_OnClick(e){
	p.ChangeTab("9052");
}

// 음성검색 결과
function DisplayMsg(msg){
	TB_textbox1.Text = msg;
}

// 바이트 체크하여 리턴
function retStringByteLength(str){
	let b = 0;
	for(let i=0; i<str.length; i++){
		// 한글 2바이트, 영문 숫자 1바이트 처리
		(str.charCodeAt(i) > 127) ? b+=2 : b++; 
	}
	return b;
}


function startIconToggle(){
	LB_textLengthLimit.$.fadeToggle();
};		
</script></xjscript></body>
</html>
