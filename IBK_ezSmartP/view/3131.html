<!doctype html>
<html version="1000">
<head>
	<meta charset="utf-8">
	<title>ezSmartAtm Builder Form 새문서</title>
	<meta http-equiv="cache-control" content="no-cache">
	<meta http-equiv="pragma" content="no-cache">
	<meta http-equiv="expires" content="0">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<meta name="author" content="[김윤섭][kkobiboy]">
	<link id="ui-style-core" rel="stylesheet" type="text/css" href="/core/app.controls.css">
	<script type="text/javascript" charset="utf-8" src="/HtaPlatform/Core/Form.JsApi"></script>
	<script type="text/javascript" charset="utf-8" src="/core/app.jquery.js"></script>
	<script type="text/javascript" charset="utf-8" src="/core/app.controls.js"></script>
	<style id="ui-style-user" type="text/css"></style>
	<script id="ui-script-user" type="text/javascript"></script>
</head>
<body oncontextmenu="return false;" class="ui-pre-load"><div class="ui-document ui-container" id="ui-document" lang="kr" ui-class="UIForm" ui-id="Form" dock="5" anchor="0b0101" ide-size="1389,1120" xonload="Form_OnLoad">
<div class="ui-control ui-panel ui-container" id="ui-171be2e0c07" style="left: 0px; top: 0px; width: 1280px; height: 1024px; right: auto; bottom: auto; z-index: 0; background-color: transparent;" ui-class="UIPanel" ui-id="PN_form" dock="0" anchor="0b0101"><div class="ui-control ui-panel ui-container ui-dock ui-dock-top" id="ui-171be2e0c08" style="left: 0px; top: 0px; width: auto; height: 102px; right: 0px; bottom: auto; z-index: 0; background-color: rgb(23, 107, 200);" ui-class="UIPanel" ui-id="PN_Title" dock="1" anchor="0b0101" dock-w="200" dock-h="102" dock-r="left:98px;top:1px;width:200px;height:76px;right:auto;bottom:auto"><span class="ui-control ui-label" id="ui-171be2e0c09" style='left: 80px; top: 31px; width: 1120px; height: 40px; right: auto; bottom: auto; color: white; font-family: "IBK iDream M"; font-size: 38px; z-index: 0;' ui-class="UILabel" ui-id="LB_title" dock="0" anchor="0b0101"><span class="ui-content">결제정보변경</span></span></div><div class="ui-control ui-panel ui-container ui-dock ui-dock-top" id="ui-171be2e0c0a" style="left: 0px; top: 102px; width: auto; height: 92px; right: 0px; bottom: auto; z-index: 1; background-color: rgb(239, 240, 242);" ui-class="UIPanel" ui-id="PN_Subtitle" dock="1" anchor="0b0101" dock-w="1280" dock-h="92" dock-r="left:0px;top:102px;width:1280px;height:92px;right:auto;bottom:auto"><div class="ui-control ui-panel ui-container" id="ui-17355fb3e22" style="left: 80px; top: 12px; width: 1150px; height: 68px; right: auto; bottom: auto; z-index: 0; background-color: rgb(239, 240, 242);" ui-class="UIPanel" ui-id="PN_Subtitle_wrap" dock="0" anchor="0b0101"><span class="ui-control ui-label" id="ui-17355fc4297" style='left: 218px; top: 40px; width: 740px; height: 22px; right: auto; bottom: auto; font-family: "IBK iDream L"; font-size: 16px; z-index: 0;' ui-class="UILabel" ui-id="LB_label8" dock="0" anchor="0b0101"><span class="ui-content">이용대금명세서를 자세히 확인해주시기 바랍니다.</span></span><span class="ui-control ui-label" id="ui-17355fc42da" style='left: 218px; top: 10px; width: 740px; height: 22px; right: auto; bottom: auto; font-family: "IBK iDream L"; font-size: 16px; z-index: 1;' ui-class="UILabel" ui-id="LB_label9" dock="0" anchor="0b0101"><span class="ui-content">결제일 변경 전 이용금액은 기존 결제일에 청구될 수 있사오니</span></span><span class="ui-control ui-label" id="ui-17355fc4308" style='left: 192px; top: 17px; width: 13px; height: 34px; right: auto; bottom: auto; font-family: "IBK iDream L"; font-size: 16px; z-index: 2;' ui-class="UILabel" ui-id="LB_label15" dock="0" anchor="0b0101" icon-image-align="left,middle"><span class="ui-content" style="justify-content: center;"> | </span></span><span class="ui-control ui-label" id="ui-17355fc432e" style='left: 0px; top: 13px; width: 180px; height: 43px; right: auto; bottom: auto; font-family: "IBK iDream L"; font-size: 30px; z-index: 3;' ui-class="UILabel" ui-id="LB_Subtitle" dock="0" anchor="0b0101"><span class="ui-content">결제일 변경</span></span></div></div><div class="ui-control ui-panel ui-container ui-dock ui-dock-bottom" id="ui-172729dbaaf" style="left: 0px; top: auto; width: auto; height: 140px; right: 0px; bottom: 0px; z-index: 2;" ui-class="UIPanel" ui-id="PN_btn" dock="2" anchor="0b0101" dock-w="1280" dock-h="140" dock-r="left:0px;top:884px;width:1280px;height:140px;right:auto;bottom:auto"><span class="ui-control ui-button theme-orange" id="ui-172729e45a9" style='left: 36px; top: 31px; width: 258px; height: 80px; right: auto; bottom: auto; font-family: "IBK iDream M"; font-size: 32px; z-index: 0;' ui-class="UIButton" ui-id="BT_left" dock="0" anchor="0b0101" theme="orange" xonclick="BT_left_OnClick"><span class="ui-content">취소</span></span><span disabled="disabled" class="ui-control ui-button theme-blue ui-disabled" id="ui-171a4b083a5" style='left: auto; top: 31px; width: 258px; height: 80px; right: 16px; bottom: auto; font-family: "IBK iDream M"; font-size: 32px; z-index: 1;' ui-class="UIButton" ui-id="BT_right" dock="0" anchor="0b1001" theme="blue" xonclick="BT_right_OnClick"><span class="ui-content">변경</span></span></div><div class="ui-control ui-panel ui-container ui-dock ui-dock-fill" id="ui-172729f3b0f" style="left: 0px; top: 194px; width: auto; height: auto; right: 0px; bottom: 140px; z-index: 3;" ui-class="UIPanel" ui-id="PN_contents" dock="5" anchor="0b0101" dock-w="1280" dock-h="100" dock-r="left:0px;top:194px;width:1280px;height:100px;right:auto;bottom:auto"><span class="ui-control ui-label" id="ui-172c00c6687" style="left: 83px; top: 31px; width: 441px; height: 42px; right: auto; bottom: auto; color: rgb(23, 107, 200); font-size: 34px; z-index: 0;" ui-class="UILabel" ui-id="LB_label1" dock="0" anchor="0b0101"><span class="ui-content">상세정보</span></span><div class="ui-control ui-panel ui-container" id="ui-172da3097e0" style="left: 83px; top: 280px; width: 1121px; height: 412px; right: auto; bottom: auto; z-index: 1; background-color: rgb(239, 240, 242);" ui-class="UIPanel" ui-id="PN_panel1" dock="0" anchor="0b0101"><span class="ui-control ui-label" id="ui-171770ca3a5" style='left: 28px; top: 20px; width: 1080px; height: 38px; right: auto; bottom: auto; font-family: "IBK iDream L"; font-size: 26px; font-weight: bold; z-index: 0;' ui-class="UILabel" ui-id="LB_text" dock="0" anchor="0b0101"><span class="ui-content" style="left: 45px; top: 0px; right: 0px; bottom: 0px;">유의사항</span><span class="ui-icon-image" style='background-position: left; background-image: url("/KRG/media/ic_note.png");'></span></span><span class="ui-control ui-label" id="ui-172bfd08218" style='left: 28px; top: 70px; width: 1080px; height: 30px; right: auto; bottom: auto; font-family: "IBK iDream L"; font-size: 19px; z-index: 1;' ui-class="UILabel" ui-id="LB_label3" dock="0" anchor="0b0101"><span class="ui-content" style="left: 0px; top: 0px; right: 0px; bottom: 0px;">현재 미결제 잔액이 존재하는 고객님의 경우 가급적 선결제 후 결제일을 변경해주시기 바랍니다.</span></span><span class="ui-control ui-label" id="ui-172c00a16b6" style='left: 28px; top: 112px; width: 1080px; height: 30px; right: auto; bottom: auto; font-family: "IBK iDream L"; font-size: 19px; z-index: 2;' ui-class="UILabel" ui-id="LB_label4" dock="0" anchor="0b0101"><span class="ui-content" style="left: 0px; top: 0px; right: 0px; bottom: 0px;">&lt;당행 계좌간 변경&gt; 결제일 변경은 09:00 ~ 16:00까지 변경 가능합니다.</span></span><span class="ui-control ui-label" id="ui-172c5cd3609" style='left: 28px; top: 154px; width: 1080px; height: 30px; right: auto; bottom: auto; font-family: "IBK iDream L"; font-size: 19px; z-index: 3;' ui-class="UILabel" ui-id="LB_label5" dock="0" anchor="0b0101"><span class="ui-content" style="left: 0px; top: 0px; right: 0px; bottom: 0px;">&lt;타행 계좌 -&gt; 당행 계좌로 변경&gt; 결제일 1영업일 전 09:00 ~ 16:00까지 변경 가능합니다.</span></span><span class="ui-control ui-label" id="ui-172c5ce1da8" style='left: 28px; top: 196px; width: 1080px; height: 30px; right: auto; bottom: auto; font-family: "IBK iDream L"; font-size: 19px; z-index: 4;' ui-class="UILabel" ui-id="LB_label6" dock="0" anchor="0b0101"><span class="ui-content" style="left: 0px; top: 0px; right: 0px; bottom: 0px;">&lt;당행,타행 계좌 -&gt; 타행 계좌로 변경&gt;</span></span><span class="ui-control ui-label" id="ui-172da3e28e8" style='left: 28px; top: 238px; width: 1080px; height: 30px; right: auto; bottom: auto; font-family: "IBK iDream L"; font-size: 19px; z-index: 5;' ui-class="UILabel" ui-id="LB_label7" dock="0" anchor="0b0101"><span class="ui-content" style="left: 0px; top: 0px; right: 0px; bottom: 0px;">(1) 결제일 1영업일 전 09:00 ~ 16:00까지 변경 가능합니다.</span></span><span class="ui-control ui-label" id="ui-172dae4386e" style='left: 28px; top: 280px; width: 1080px; height: 30px; right: auto; bottom: auto; font-family: "IBK iDream L"; font-size: 19px; z-index: 6;' ui-class="UILabel" ui-id="LB_label13" dock="0" anchor="0b0101"><span class="ui-content" style="left: 0px; top: 0px; right: 0px; bottom: 0px;">(2) 금융결제원 CMS 계좌 이용 회원님의 경우 결제일 7영업일 전 09:00 ~ 16:00까지 변경 가능합니다.</span></span><span class="ui-control ui-label" id="ui-172daead96a" style='left: 28px; top: 322px; width: 1080px; height: 30px; right: auto; bottom: auto; font-family: "IBK iDream L"; font-size: 19px; z-index: 7;' ui-class="UILabel" ui-id="LB_label14" dock="0" anchor="0b0101"><span class="ui-content" style="left: 0px; top: 0px; right: 0px; bottom: 0px;">금융결제원 CMS계좌 보유 회원님은 해당 은행의 사정에 따라 결제일을 5, 12, 23, 27일 중에서만 선택 가능합니다.</span></span><span class="ui-control ui-label" id="ui-173472fe04c" style='left: 28px; top: 364px; width: 1080px; height: 30px; right: auto; bottom: auto; font-family: "IBK iDream L"; font-size: 19px; z-index: 8;' ui-class="UILabel" ui-id="LB_label2" dock="0" anchor="0b0101"><span class="ui-content" style="left: 0px; top: 0px; right: 0px; bottom: 0px;">결제일 변경 전 이용금액은 기존 결제일에 청구될 수 있사오니 이용대금명세서를 확인해 주시기 바랍니다.</span></span></div><div class="ui-control ui-table" id="ui-172daa2e81f" style="border-width: 2px; border-color: rgb(194, 194, 194); left: 83px; top: 84px; width: 1121px; height: 180px; right: auto; bottom: auto; z-index: 2;" ui-class="UITable" ui-id="TL_table_payday" dock="0" anchor="0b0101"><table border="0" cellspacing="0" cellpadding="0"><thead><tr><td width="270" type="1" align-h="align-left" align-v="align-middle"></td><td type="1" align-h="align-left" align-v="align-middle"></td></tr></thead><tbody><tr height="33%"><td><div class="ui-table-cell align-left align-middle ui-container" id="ui-172dad5e94a" style="padding: 0px 0px 0px 20px; font-size: 21px; background-color: rgb(242, 242, 242);"><span class="cell-control-label">고객명</span></div></td><td><div class="ui-table-cell align-left align-middle ui-container" id="ui-172dad5e94b" style="padding: 0px 20px; font-size: 22px; justify-content: flex-start;"></div></td></tr><tr height="33%"><td><div class="ui-table-cell align-left align-middle ui-container" id="ui-172dad5e94c" style="padding: 0px 0px 0px 20px; font-size: 21px; background-color: rgb(242, 242, 242);"><span class="cell-control-label">기존 결제일</span></div></td><td><div class="ui-table-cell align-left align-middle ui-container" id="ui-172dad5e94d" style="padding: 0px 20px; font-size: 22px; justify-content: flex-start;"></div></td></tr><tr height="34%"><td><div class="ui-table-cell align-left align-middle ui-container" id="ui-172dad5e94e" style="padding: 0px 0px 0px 20px; font-size: 21px; background-color: rgb(242, 242, 242);"><span class="cell-control-label">변경 결제일</span></div></td><td><div class="ui-table-cell align-left align-middle ui-container" id="ui-172dad5e94f" style="padding: 0px 20px; font-size: 22px; justify-content: flex-start;"><span class="ui-control ui-combobox" id="ui-172db1254ab" style="left: 20px; top: 10px; width: 320px; height: 36px; right: auto; bottom: auto; z-index: 0;" ui-class="UIComboBox" ui-id="DL_combobox_day" dock="0" anchor="0b0101" xonselecteditemchanged="DL_combobox_day_OnSelectedItemChanged"><span class="ui-content"></span><span class="ui-icon-image" fontsize="16">▼ </span><select><option selected="selected"></option></select></span></div></td></tr></tbody></table></div></div></div></div><xcomponent></xcomponent><xjscript><script id='xjscript' type='text/plain'>
var p = parent;

function Form_OnLoad(e){

}

// 결제일 상세정보
function setPaymentDayInfo(){
    // 고객명 셋팅
    TL_table_payday.DataCell(0,1,"text",p.G_custInfoM2Step1.KRN_CSM);
    
    // 기존결제일 셋팅
    TL_table_payday.DataCell(1,1,"text",p.G_paydayValidInfoM2Step1.STLM_DD+"일");
	
	if(p.G_paydayValidInfoM2Step1.CMSAC_YN == "Y") {
		// CMS계좌 결제일 초기화
		setPaymentDayCMS();
	} else {
		// 기본계좌 결제일 초기화
		setPaymentDay();            	
	}
}


// 기본계좌 결제일
function setPaymentDay(){

	const optList = [];
		
	for(let i = 1; i < 28; i++){
		const opt = {};
	    opt.Text  = ""+p.com.util.generateZero(i)+"일";
	    opt.Value = ""+p.com.util.generateZero(i);    

		optList.push(opt);
	}  // end for 

	// 변경 결제일 셋팅
	DL_combobox_day.setItemList(optList);

}


// CMS계좌 결제일
function setPaymentDayCMS(){

    const optList = [];

	const opt1 = {};
    opt1.Text  = "05일";
    opt1.Value = "05";
	optList.push(opt1);
	
	const opt2 = {};
    opt2.Text  = "12일";
    opt2.Value = "12";
	optList.push(opt2);

	const opt3 = {};
    opt3.Text  = "23일";
    opt3.Value = "23";
	optList.push(opt3);

	const opt4 = {};
    opt4.Text  = "27일";
    opt4.Value = "27";
	optList.push(opt4);

	// 변경 결제일 셋팅
	DL_combobox_day.setItemList(optList);

}

function DL_combobox_day_OnSelectedItemChanged(e){
    console.log(" e " + e);	
	console.log(e.after.index);
	console.log(e.after.value);
	console.log(e.after.text);

    var currentDay = e.after.value;        
	
    if(currentDay !== "" && currentDay !== p.G_paydayValidInfoM2Step1.STLM_DD) {
        BT_right.Enabled = true;
    } else {
        BT_right.Enabled = false;
    }	    
}

function BT_left_OnClick(e){
	SCREEN.WriteJnl("[결제일 변경] 취소");
   	ATMCOMM.BusinessEnd(ATMCOMM.RET_CAN);
}

function BT_right_OnClick(e){
   // 전역변수 - 신규 결제일 셋팅
   p.G_paydayValidInfoM2Step1.newPayDay = DL_combobox_day.Value;
   console.log(" p.G_paydayValidInfoM2Step1.newPayDay >>> " + p.G_paydayValidInfoM2Step1.newPayDay);
   SCREEN.WriteJnl("결제일: " + p.G_paydayValidInfoM2Step1.newPayDay);
   SCREEN.WriteJnl("[결제일 변경] 정상");
   // 결제일 변경 안내 화면 조회
   p.sendRequest("m2_step2_payday_guide");
}

</script></xjscript></body>
</html>
