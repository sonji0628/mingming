<!doctype html>
<html version="1000">
<head>
	<meta charset="utf-8">
	<title>ezSmartAtm Builder Form 새문서</title>
	<meta http-equiv="cache-control" content="no-cache">
	<meta http-equiv="pragma" content="no-cache">
	<meta http-equiv="expires" content="0">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<meta name="author" content="[김윤섭][kkobiboy]">
	<link id="ui-style-core" rel="stylesheet" type="text/css" href="/core/app.controls.css">
	<script type="text/javascript" charset="utf-8" src="/HtaPlatform/Core/Form.JsApi"></script>
	<script type="text/javascript" charset="utf-8" src="/core/app.jquery.js"></script>
	<script type="text/javascript" charset="utf-8" src="/core/app.controls.js"></script>
	<style id="ui-style-user" type="text/css"></style>
	<script id="ui-script-user" type="text/javascript"></script>
</head>
<body oncontextmenu="return false;" class="ui-pre-load"><div class="ui-document ui-container" id="ui-document" lang="kr" ui-class="UIForm" ui-id="Form" dock="5" anchor="0b0101" ide-size="1389,1120" xonload="Form_OnLoad">
<div class="ui-control ui-panel ui-container" id="ui-171be2e0c07" style="left: 0px; top: 0px; width: 1280px; height: 1024px; right: auto; bottom: auto; z-index: 0; background-color: transparent;" ui-class="UIPanel" ui-id="PN_form" dock="0" anchor="0b0101"><div class="ui-control ui-panel ui-container ui-dock ui-dock-top" id="ui-171be2e0c08" style="left: 0px; top: 0px; width: auto; height: 102px; right: 0px; bottom: auto; z-index: 0; background-color: rgb(23, 107, 200);" ui-class="UIPanel" ui-id="PN_Title" dock="1" anchor="0b0101" dock-w="200" dock-h="102" dock-r="left:98px;top:1px;width:200px;height:76px;right:auto;bottom:auto"><span class="ui-control ui-label" id="ui-171be2e0c09" style='left: 80px; top: 31px; width: 1120px; height: 40px; right: auto; bottom: auto; color: white; font-family: "IBK iDream M"; font-size: 38px; z-index: 0;' ui-class="UILabel" ui-id="LB_title" dock="0" anchor="0b0101"><span class="ui-content">선결제</span></span></div><div class="ui-control ui-panel ui-container ui-dock ui-dock-top" id="ui-171be2e0c0a" style="left: 0px; top: 102px; width: auto; height: 92px; right: 0px; bottom: auto; z-index: 1; background-color: rgb(239, 240, 242);" ui-class="UIPanel" ui-id="PN_Subtitle" dock="1" anchor="0b0101" dock-w="1280" dock-h="92" dock-r="left:0px;top:102px;width:1280px;height:92px;right:auto;bottom:auto"><span class="ui-control ui-label" id="ui-171be2e0c0b" style='left: 82px; top: 30px; width: 235px; height: 43px; right: auto; bottom: auto; font-family: "IBK iDream L"; font-size: 32px; z-index: 0;' ui-class="UILabel" ui-id="LB_Subtitle" dock="0" anchor="0b0101"><span class="ui-content">결제청구건 조회</span></span></div><div class="ui-control ui-panel ui-container ui-dock ui-dock-bottom" id="ui-172729dbaaf" style="left: 0px; top: auto; width: auto; height: 140px; right: 0px; bottom: 0px; z-index: 2;" ui-class="UIPanel" ui-id="PN_btn" dock="2" anchor="0b0101" dock-w="1280" dock-h="140" dock-r="left:0px;top:884px;width:1280px;height:140px;right:auto;bottom:auto"><span class="ui-control ui-button theme-blue" id="ui-172729ea59d" style='left: auto; top: 31px; width: 258px; height: 80px; right: 36px; bottom: auto; font-family: "IBK iDream M"; font-size: 32px; z-index: 0;' ui-class="UIButton" ui-id="BT_right" dock="0" anchor="0b1001" xonclick="BT_right_OnClick" theme="blue"><span class="ui-content">확인</span></span></div><div class="ui-control ui-panel ui-container ui-dock ui-dock-fill" id="ui-172729f3b0f" style="left: 0px; top: 194px; width: auto; height: auto; right: 0px; bottom: 140px; z-index: 3;" ui-class="UIPanel" ui-id="PN_contents" dock="5" anchor="0b0101" dock-w="1280" dock-h="100" dock-r="left:0px;top:194px;width:1280px;height:100px;right:auto;bottom:auto"><span class="ui-control ui-scrollbar" id="ui-172980bda14" style="left: 1205px; top: 84px; width: 32px; height: 560px; right: auto; bottom: auto; z-index: 0;" ui-class="UIScrollBar" ui-id="SB_scrollbar_payinfo" dock="0" anchor="0b0101" scroll-control-id="PN_panel_payinfo"><span class="track"></span><span class="trackbutton" style="top: 460px;"></span></span><div class="ui-control ui-panel ui-container" id="ui-172e8e859a4" style="left: 83px; top: 21px; width: 1100px; height: 620px; right: auto; bottom: auto; z-index: 1;" ui-class="UIPanel" ui-id="PN_panel_payinfo" dock="0" anchor="0b0101"><span class="ui-control ui-label" id="ui-172e8e90051" style="left: 4px; top: 28px; width: 403px; height: 42px; right: auto; bottom: auto; color: rgb(23, 107, 200); font-size: 34px; z-index: 0;" ui-class="UILabel" ui-id="LB_label1" dock="0" anchor="0b0101"><span class="ui-content">상세조회</span></span><div class="ui-control ui-table" id="ui-172e8e95d12" style="border-width: 2px; border-color: rgb(194, 194, 194); left: 4px; top: 76px; width: 1075px; height: 660px; right: auto; bottom: auto; z-index: 1;" ui-class="UITable" ui-id="TL_table_payinfo" dock="0" anchor="0b0101"><table border="0" cellspacing="0" cellpadding="0"><thead><tr><td width="270" type="1" align-h="align-left" align-v="align-middle"></td><td type="1" align-h="align-left" align-v="align-middle"></td></tr></thead><tbody><tr height="9%"><td><div class="ui-table-cell align-left align-middle ui-container" id="ui-172e8e95d13" style="padding: 0px 0px 0px 20px; font-size: 21px; background-color: rgb(242, 242, 242);"><span class="cell-control-label">전표매입년월일</span></div></td><td><div class="ui-table-cell align-left align-middle ui-container" id="ui-172e8e95d14" style="padding: 0px 20px; font-size: 22px; justify-content: flex-start;"></div></td></tr><tr height="9%"><td><div class="ui-table-cell align-left align-middle ui-container" id="ui-172e8e95d15" style="padding: 0px 0px 0px 20px; font-size: 21px; background-color: rgb(242, 242, 242);"><span class="cell-control-label">매출전표번호</span></div></td><td><div class="ui-table-cell align-left align-middle ui-container" id="ui-172e8e95d16" style="padding: 0px 20px; font-size: 22px; justify-content: flex-start;"></div></td></tr><tr height="9%"><td><div class="ui-table-cell align-left align-middle ui-container" id="ui-172e8e95d17" style="padding: 0px 0px 0px 20px; font-size: 21px; background-color: rgb(242, 242, 242);"><span class="cell-control-label">이용구분</span></div></td><td><div class="ui-table-cell align-left align-middle ui-container" id="ui-172e8e95d18" style="padding: 0px 20px; font-size: 22px; justify-content: flex-start;"></div></td></tr><tr height="9%"><td><div class="ui-table-cell align-left align-middle ui-container" id="ui-172e8e95d19" style="padding: 0px 0px 0px 20px; font-size: 21px; background-color: rgb(242, 242, 242);"><span class="cell-control-label">이용일자</span></div></td><td><div class="ui-table-cell align-left align-middle ui-container" id="ui-172e8e95d1a" style="padding: 0px 20px; font-size: 22px;"></div></td></tr><tr height="9%"><td><div class="ui-table-cell align-left align-middle ui-container" id="ui-172e8e95d1b" style="padding: 0px 0px 0px 20px; font-size: 21px; background-color: rgb(242, 242, 242);"><span class="cell-control-label">가맹점명</span></div></td><td><div class="ui-table-cell align-left align-middle ui-container" id="ui-172e8e95d1c" style="padding: 0px 20px; font-size: 22px;"></div></td></tr><tr height="9%"><td><div class="ui-table-cell align-left align-middle ui-container" id="ui-172e8e95d1d" style="padding: 0px 0px 0px 20px; font-size: 21px; background-color: rgb(242, 242, 242);"><span class="cell-control-label">이용카드</span></div></td><td><div class="ui-table-cell align-left align-middle ui-container" id="ui-172e8e95d1e" style="padding: 0px 20px; font-size: 22px;"></div></td></tr><tr height="9%"><td><div class="ui-table-cell align-left align-middle ui-container" id="ui-172e8e95d1f" style="padding: 0px 0px 0px 20px; font-size: 21px; background-color: rgb(242, 242, 242);"><span class="cell-control-label">이용원금</span></div></td><td><div class="ui-table-cell align-left align-middle ui-container" id="ui-172e8e95d20" style="padding: 0px 20px; font-size: 22px;"></div></td></tr><tr height="9%"><td><div class="ui-table-cell align-left align-middle ui-container" id="ui-172e8e95d27" style="padding: 0px 0px 0px 20px; font-size: 21px; background-color: rgb(242, 242, 242);"><span class="cell-control-label">이용수수료</span></div></td><td><div class="ui-table-cell align-left align-middle ui-container" id="ui-172e8e95d28" style="padding: 0px 20px; font-size: 22px;"></div></td></tr><tr height="9%"><td><div class="ui-table-cell align-left align-middle ui-container" id="ui-172e8e95d29" style="padding: 0px 0px 0px 20px; font-size: 21px; background-color: rgb(242, 242, 242);"><span class="cell-control-label">미결제원금</span></div></td><td><div class="ui-table-cell align-left align-middle ui-container" id="ui-172e8e95d2a" style="padding: 0px 20px; font-size: 22px;"></div></td></tr><tr height="9%"><td><div class="ui-table-cell align-left align-middle ui-container" id="ui-17394907a7e" style="padding: 0px 0px 0px 20px; font-size: 21px; background-color: rgb(242, 242, 242);"><span class="cell-control-label">미결제수수료</span></div></td><td><div class="ui-table-cell align-left align-middle ui-container" id="ui-17394907a7f" style="padding: 0px 20px; font-size: 22px;"></div></td></tr><tr height="10%"><td><div class="ui-table-cell align-left align-middle ui-container" id="ui-173949076e4" style="padding: 0px 0px 0px 20px; font-size: 21px; background-color: rgb(242, 242, 242);"><span class="cell-control-label">청구일자</span></div></td><td><div class="ui-table-cell align-left align-middle ui-container" id="ui-173949076e6" style="padding: 0px 20px; font-size: 22px;"></div></td></tr></tbody></table></div></div></div></div></div><xcomponent></xcomponent><xjscript><script id='xjscript' type='text/plain'>// 3180.css import
importCSS("3180"     ,"3180.css");

// common.js import
includeJSS("common","/KRG/0301/common.js");


var payinfo,records;

function Form_OnLoad(e){
  
   // 팝업을 호출한 opener에 팝업 window 저장 (opener에서 close 가능)
   if (host.form.opener){
	   host.form.opener.xpopup = window;
   }

   com.screen.setTimeoutEx(30000, onScreenTimeout);

   payinfo = com.ss.getItem("3283_payinfo");
	    
   if(payinfo != null){
	  records = jQuery.parseJSON(payinfo);
   }

   // 선결제처리구분코드 셋팅
   var PCSN_DCD = com.ss.getItem("3283_AHST_PCSN_DCD");  
   
   fnInfomationSetting(records);
      
}


// parent 화면의 타임아웃에 종속되어 주석처리함
function onScreenTimeout(){
	console.log("[popup] Screen Timeout!!!");
	
	com.screen.clearTimeoutEx();

	com.screen.closePopup(function(opendlg){
		opendlg.OnCloseCallback3282("timeout");
	});	
}


// 결제청구건 데이터 셋팅
function fnInfomationSetting(gridData) {

  console.log(" fnInfomationSetting >>> gridData ::: " + gridData);
  
  // 결제청구 데이터 가져오기
  if(gridData != null && gridData.length > 0){
    let record = gridData[0];
    TL_table_payinfo.DataCell(0,1,"text",com.date.fnGetFormatDate(record.SLIP_BNG_YMD));
	TL_table_payinfo.DataCell(1,1,"text",record.CARD_AMSL_SLN);
	TL_table_payinfo.DataCell(2,1,"text",com.acct.cardProductCodes(record.CRD_PDCD));
	TL_table_payinfo.DataCell(3,1,"text",com.util.isNull($.trim(record.AMSL_YMD)) ? "" : com.date.fnGetFormatDate(record.AMSL_YMD));		
	TL_table_payinfo.DataCell(4,1,"text",record.AFST_NM);
	TL_table_payinfo.DataCell(5,1,"text",record.CDN.substr(0,4) + "-****-****-" + record.CDN.substr(12));
	TL_table_payinfo.DataCell(6,1,"text",com.util.fnGetFormatMoney(record.CARD_AMSL_AMT));
	TL_table_payinfo.DataCell(7,1,"text","0"); // 이용수수료 필드없음
	TL_table_payinfo.DataCell(8,1,"text",com.util.fnGetFormatMoney(record.CRD_OTST_PRNC_AMT));
	TL_table_payinfo.DataCell(9,1,"text",com.util.fnGetFormatMoney(record.CRD_OTST_FEE));
    TL_table_payinfo.DataCell(10,1,"text",com.date.fnGetFormatDate(record.STLM_YMD));
	
    const $payinfo_tbody = TL_table_payinfo.$.find("> table > tbody");
	$payinfo_tbody.find("> tr:eq(6) > td:eq(1) > div.ui-table-cell > span.cell-control-label").append('<span class="table-won"> 원</span>');
	$payinfo_tbody.find("> tr:eq(7) > td:eq(1) > div.ui-table-cell > span.cell-control-label").append('<span class="table-won"> 원</span>');
	$payinfo_tbody.find("> tr:eq(8) > td:eq(1) > div.ui-table-cell > span.cell-control-label").append('<span class="table-won"> 원</span>');
	$payinfo_tbody.find("> tr:eq(9) > td:eq(1) > div.ui-table-cell > span.cell-control-label").append('<span class="table-won"> 원</span>');
  }
  
   // 화면 스크롤 위치 초기화
   SB_scrollbar_payinfo.$.find("> span.trackbutton").css({"top":"0px"});  
  
   // Invalidate 스크롤 체크(생성)
   SB_scrollbar_payinfo.Invalidate();		  
   
}


function BT_right_OnClick(e){
	setTimeout(function(){		
		com.screen.closePopup(function(opendlg){
			opendlg.OnCloseCallback3282(true);
		}	
	}, 200);
}
</script></xjscript></body>
</html>
