<!doctype html>
<html version="1000">
<head>
	<meta charset="utf-8">
	<title>ezSmartAtm Builder Form 새문서</title>
	<meta http-equiv="cache-control" content="no-cache">
	<meta http-equiv="pragma" content="no-cache">
	<meta http-equiv="expires" content="0">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<meta name="author" content="[김윤섭][kkobiboy]">
	<link id="ui-style-core" rel="stylesheet" type="text/css" href="/core/app.controls.css">
	<script type="text/javascript" charset="utf-8" src="/HtaPlatform/Core/Form.JsApi"></script>
	<script type="text/javascript" charset="utf-8" src="/core/app.jquery.js"></script>
	<script type="text/javascript" charset="utf-8" src="/core/app.controls.js"></script>
	<style id="ui-style-user" type="text/css"></style>
	<script id="ui-script-user" type="text/javascript"></script>
</head>
<body oncontextmenu="return false;" class="ui-pre-load"><div class="ui-document ui-container ide-hide-outline" id="ui-document" lang="kr" ui-class="UIForm" ui-id="Form" dock="5" anchor="0b0101" ide-size="1389,1120" xonload="Form_OnLoad">
<div class="ui-control ui-panel ui-container" id="ui-171be2e0c07" style="left: 0px; top: 0px; width: 1280px; height: 1024px; right: auto; bottom: auto; z-index: 0; background-color: transparent;" ui-class="UIPanel" ui-id="PN_form" dock="0" anchor="0b0101"><div class="ui-control ui-panel ui-container ui-dock ui-dock-top" id="ui-171be2e0c08" style="left: 0px; top: 0px; width: auto; height: 102px; right: 0px; bottom: auto; z-index: 0; background-color: rgb(23, 107, 200);" ui-class="UIPanel" ui-id="PN_Title" dock="1" anchor="0b0101" dock-w="200" dock-h="102" dock-r="left:98px;top:1px;width:200px;height:76px;right:auto;bottom:auto"><span class="ui-control ui-label" id="ui-171be2e0c09" style='left: 80px; top: 31px; width: 1120px; height: 46px; right: auto; bottom: auto; color: white; font-family: "IBK iDream M"; font-size: 38px; z-index: 0;' ui-class="UILabel" ui-id="LB_title" dock="0" anchor="0b0101"><span class="ui-content" style="align-items: center;">선결제</span></span></div><div class="ui-control ui-panel ui-container ui-dock ui-dock-top" id="ui-171be2e0c0a" style="left: 0px; top: 102px; width: auto; height: 92px; right: 0px; bottom: auto; z-index: 1; background-color: rgb(239, 240, 242);" ui-class="UIPanel" ui-id="PN_Subtitle" dock="1" anchor="0b0101" dock-w="1280" dock-h="92" dock-r="left:0px;top:102px;width:1280px;height:92px;right:auto;bottom:auto"><span class="ui-control ui-label" id="ui-171be2e0c0b" style='left: 82px; top: 30px; width: 235px; height: 43px; right: auto; bottom: auto; font-family: "IBK iDream L"; font-size: 32px; z-index: 0;' ui-class="UILabel" ui-id="LB_Subtitle" dock="0" anchor="0b0101"><span class="ui-content">선결제 신청</span></span></div><div class="ui-control ui-panel ui-container ui-dock ui-dock-bottom" id="ui-172729dbaaf" style="left: 0px; top: auto; width: auto; height: 140px; right: 0px; bottom: 0px; z-index: 2;" ui-class="UIPanel" ui-id="PN_btn" dock="2" anchor="0b0101" dock-w="1280" dock-h="140" dock-r="left:0px;top:884px;width:1280px;height:140px;right:auto;bottom:auto"><span class="ui-control ui-button theme-orange" id="ui-172729e45a9" style='left: 36px; top: 31px; width: 258px; height: 80px; right: auto; bottom: auto; font-family: "IBK iDream M"; font-size: 32px; z-index: 0;' ui-class="UIButton" ui-id="BT_left" dock="0" anchor="0b0101" xonclick="BT_left_OnClick" theme="orange"><span class="ui-content">취소</span></span><span class="ui-control ui-button theme-blue" id="ui-171a4b083a5" style='left: auto; top: 31px; width: 258px; height: 80px; right: 36px; bottom: auto; font-family: "IBK iDream M"; font-size: 32px; z-index: 1;' ui-class="UIButton" ui-id="BT_right" dock="0" anchor="0b1001" xonclick="BT_right_OnClick" theme="blue"><span class="ui-content">선결제 신청</span></span></div><div class="ui-control ui-panel ui-container ui-dock ui-dock-fill" id="ui-172729f3b0f" style="left: 0px; top: 194px; width: auto; height: auto; right: 0px; bottom: 140px; z-index: 3;" ui-class="UIPanel" ui-id="PN_contents" dock="5" anchor="0b0101" dock-w="1280" dock-h="100" dock-r="left:0px;top:194px;width:1280px;height:100px;right:auto;bottom:auto"><span class="ui-control ui-label" id="ui-172d9e841ad" style='left: 83px; top: 385px; width: 441px; height: 30px; right: auto; bottom: auto; color: rgb(23, 107, 200); font-family: "IBK iDream M"; font-size: 24px; z-index: 1;' ui-class="UILabel" ui-id="LB_label2" dock="0" anchor="0b0101"><span class="ui-content" style="justify-content: flex-start; align-items: center;">선결제 신청 조건 선택</span></span><div class="ui-control ui-panel ui-container" id="ui-172da3097e0" style="left: 83px; top: 26px; width: 1120px; height: 352px; right: auto; bottom: auto; z-index: 0; background-color: transparent;" ui-class="UIPanel" ui-id="PN_panel1" dock="0" anchor="0b0101"><span class="ui-control ui-label" id="ui-171770ca3a5" style='left: 0px; top: 0px; width: 33px; height: 33px; right: auto; bottom: auto; font-family: "Noto sans CJK KR", "맑은 고딕", "Arial", "IBK IDream L", "IBK IDream M", "IBK IDream B", "IBK IDream EB", "IBK IDream Symbol", "IBK IWishR"; font-size: 22px; font-weight: bold; z-index: 1;' ui-class="UILabel" ui-id="LB_text" dock="0" anchor="0b0101"><span class="ui-content" style="left: 45px; top: 0px; right: 0px; bottom: 0px;"></span><span class="ui-icon-image" style='background-position: left; background-image: url("/KRG/media/ic_note.png");'></span></span><span class="ui-control ui-label" id="ui-172bfd08218" style='left: 2px; top: 29px; width: 1080px; height: 30px; right: auto; bottom: auto; font-family: "Noto sans CJK KR", "맑은 고딕", "Arial", "IBK IDream L", "IBK IDream M", "IBK IDream B", "IBK IDream EB", "IBK IDream Symbol", "IBK IWishR"; font-size: 18px; z-index: 2;' ui-class="UILabel" ui-id="LB_label3" dock="0" anchor="0b0101"><span class="ui-content" style="left: 45px; top: 0px; right: 0px; bottom: 0px;">서비스 이용가능 시간은 당행결제계좌 고객님의 경우 09:00~22:00(주말 공휴일 포함) 타행은 09:00~22:00입니다.(주말 공휴일 이용불가)</span></span><span class="ui-control ui-label" id="ui-172c5cd3609" style='left: 2px; top: 56px; width: 1080px; height: 30px; right: auto; bottom: auto; font-family: "Noto sans CJK KR", "맑은 고딕", "Arial", "IBK IDream L", "IBK IDream M", "IBK IDream B", "IBK IDream EB", "IBK IDream Symbol", "IBK IWishR"; font-size: 18px; z-index: 3;' ui-class="UILabel" ui-id="LB_label5" dock="0" anchor="0b0101"><span class="ui-content" style="left: 45px; top: 0px; right: 0px; bottom: 0px;">결제일 전일에는 09:00 ~18:00 까지 가능하며, 결제일 당일 선결제는 불가합니다.</span></span><span class="ui-control ui-label" id="ui-172c5ce1da8" style='left: 2px; top: 83px; width: 1080px; height: 30px; right: auto; bottom: auto; font-family: "Noto sans CJK KR", "맑은 고딕", "Arial", "IBK IDream L", "IBK IDream M", "IBK IDream B", "IBK IDream EB", "IBK IDream Symbol", "IBK IWishR"; font-size: 18px; z-index: 4;' ui-class="UILabel" ui-id="LB_label6" dock="0" anchor="0b0101"><span class="ui-content" style="left: 45px; top: 0px; right: 0px; bottom: 0px;">개인사업자는 타행 선결제 서비스가 제공되지 않습니다.</span></span><span class="ui-control ui-label" id="ui-172da3e28e8" style='left: 2px; top: 216px; width: 1080px; height: 30px; right: auto; bottom: auto; font-family: "Noto sans CJK KR", "맑은 고딕", "Arial", "IBK IDream L", "IBK IDream M", "IBK IDream B", "IBK IDream EB", "IBK IDream Symbol", "IBK IWishR"; font-size: 18px; font-weight: bold; z-index: 5;' ui-class="UILabel" ui-id="LB_label7" dock="0" anchor="0b0101"><span class="ui-content" style="left: 45px; top: 0px; right: 0px; bottom: 0px;">[타행결제계좌 사용가능은행]</span></span><span class="ui-control ui-label" id="ui-172df6f2b70" style='left: 2px; top: 246px; width: 1080px; height: 30px; right: auto; bottom: auto; font-family: "Noto sans CJK KR", "맑은 고딕", "Arial", "IBK IDream L", "IBK IDream M", "IBK IDream B", "IBK IDream EB", "IBK IDream Symbol", "IBK IWishR"; font-size: 18px; font-weight: normal; z-index: 6;' ui-class="UILabel" ui-id="LB_label1" dock="0" anchor="0b0101"><span class="ui-content" style="left: 45px; top: 0px; right: 0px; bottom: 0px;">산업(002), 국민(004), 외환(005), 농협(011), 단위농협(012), 우리(020), SC제일(023), 한국씨티(027),</span></span><span class="ui-control ui-label" id="ui-172df72bc09" style='left: 2px; top: 276px; width: 1080px; height: 30px; right: auto; bottom: auto; font-family: "Noto sans CJK KR", "맑은 고딕", "Arial", "IBK IDream L", "IBK IDream M", "IBK IDream B", "IBK IDream EB", "IBK IDream Symbol", "IBK IWishR"; font-size: 18px; font-weight: normal; z-index: 7;' ui-class="UILabel" ui-id="LB_label8" dock="0" anchor="0b0101"><span class="ui-content" style="left: 45px; top: 0px; right: 0px; bottom: 0px;">대구(031), 부산(032), 광주(034), 제주(035), 전북(037), 경남(039), 새마을금고(045), 신협(048), 우체국(071),</span></span><span class="ui-control ui-label" id="ui-172df759d70" style='left: 2px; top: 306px; width: 1080px; height: 30px; right: auto; bottom: auto; font-family: "Noto sans CJK KR", "맑은 고딕", "Arial", "IBK IDream L", "IBK IDream M", "IBK IDream B", "IBK IDream EB", "IBK IDream Symbol", "IBK IWishR"; font-size: 18px; font-weight: normal; z-index: 8;' ui-class="UILabel" ui-id="LB_label9" dock="0" anchor="0b0101"><span class="ui-content" style="left: 45px; top: 0px; right: 0px; bottom: 0px;">하나(081), 신한(088), 케이뱅크(089), 카카오뱅크(090)</span></span><span class="ui-control ui-label" id="ui-1749997930b" style='left: 2px; top: 2px; width: 1080px; height: 30px; right: auto; bottom: auto; color: red; font-family: "Noto sans CJK KR", "맑은 고딕", "Arial", "IBK IDream L", "IBK IDream M", "IBK IDream B", "IBK IDream EB", "IBK IDream Symbol", "IBK IWishR"; font-size: 18px; z-index: 0;' ui-class="UILabel" ui-id="LB_label12" dock="0" anchor="0b0101"><span class="ui-content" style="left: 45px; top: 0px; right: 0px; bottom: 0px;">선결제 취소는 불가합니다.</span></span><div class="ui-control ui-panel ui-container" id="ui-17231f8c257" style="left: 0px; top: 342px; width: 1120px; height: 1px; right: auto; bottom: auto; z-index: 9; background-color: rgb(178, 178, 178);" ui-class="UIPanel" ui-id="PN_panel4" dock="0" anchor="0b0101"></div><span class="ui-control ui-label" id="ui-177474bfba3" style='left: 1px; top: 123px; width: 1080px; height: 30px; right: auto; bottom: auto; color: red; font-family: "Noto sans CJK KR", "맑은 고딕", "Arial", "IBK IDream L", "IBK IDream M", "IBK IDream B", "IBK IDream EB", "IBK IDream Symbol", "IBK IWishR"; font-size: 18px; z-index: 10;' ui-class="UILabel" ui-id="LB_label4" dock="0" anchor="0b0101"><span class="ui-content" style="left: 45px; top: 0px; right: 0px; bottom: 0px;">장기카드대출 실행 후 14일 이내에 전액 상환하는 경우 대출철회신청이 가능합니다.</span></span><span class="ui-control ui-label" id="ui-177474bfbbc" style='left: 1px; top: 150px; width: 1080px; height: 30px; right: auto; bottom: auto; font-family: "Noto sans CJK KR", "맑은 고딕", "Arial", "IBK IDream L", "IBK IDream M", "IBK IDream B", "IBK IDream EB", "IBK IDream Symbol", "IBK IWishR"; font-size: 18px; z-index: 11;' ui-class="UILabel" ui-id="LB_label13" dock="0" anchor="0b0101"><span class="ui-content" style="left: 45px; top: 0px; right: 0px; bottom: 0px;">(중도상환과 대출철회 모두 상환금액은 동일하나, 대출철회시 한국신용정보원 및 신용평가사의 대출기록은 삭제됨)</span></span><span class="ui-control ui-label" id="ui-177474bfbcd" style='left: 1px; top: 177px; width: 1080px; height: 30px; right: auto; bottom: auto; font-family: "Noto sans CJK KR", "맑은 고딕", "Arial", "IBK IDream L", "IBK IDream M", "IBK IDream B", "IBK IDream EB", "IBK IDream Symbol", "IBK IWishR"; font-size: 18px; z-index: 12;' ui-class="UILabel" ui-id="LB_label14" dock="0" anchor="0b0101"><span class="ui-content" style="left: 45px; top: 0px; right: 0px; bottom: 0px;">* 신청방법 : 인터넷뱅킹(카드 &gt; i-ONE장기카드대출 &gt; 대출계약철회신청), 고객센터(1566-2566), 영업점</span></span><span class="ui-control ui-label" id="ui-177474c5055" style='left: 0px; top: 121px; width: 33px; height: 33px; right: auto; bottom: auto; font-family: "Noto sans CJK KR", "맑은 고딕", "Arial", "IBK IDream L", "IBK IDream M", "IBK IDream B", "IBK IDream EB", "IBK IDream Symbol", "IBK IWishR"; font-size: 22px; font-weight: bold; z-index: 13;' ui-class="UILabel" ui-id="LB_label15" dock="0" anchor="0b0101"><span class="ui-content" style="left: 45px; top: 0px; right: 0px; bottom: 0px;"></span><span class="ui-icon-image" style='background-position: left; background-image: url("/KRG/media/ic_note.png");'></span></span></div><span class="ui-control ui-label" id="ui-172cae891ce" style="left: 83px; top: 424px; width: 150px; height: 30px; right: auto; bottom: auto; font-size: 18px; z-index: 2;" ui-class="UILabel" ui-id="LB_label10" dock="0" anchor="0b0101"><span class="ui-content" style="align-items: flex-start;">선결제구분</span></span><span class="ui-control ui-label" id="ui-172df80543a" style="left: 709px; top: 424px; width: 140px; height: 30px; right: auto; bottom: auto; font-size: 18px; z-index: 3;" ui-class="UILabel" ui-id="LB_label11" dock="0" anchor="0b0101"><span class="ui-content" style="align-items: flex-start;">결제구분</span></span><span class="ui-control ui-combobox" id="ui-172df820154" style="left: 83px; top: 453px; width: 494px; height: 54px; right: auto; bottom: auto; z-index: 4;" ui-class="UIComboBox" ui-id="DL_combobox_type1" dock="0" anchor="0b0101" xonselecteditemchanged="DL_combobox_type1_OnSelectedItemChanged"><span class="ui-content"></span><span class="ui-icon-image" fontsize="16">▼ </span><select><option selected="selected"></option></select></span><span class="ui-control ui-combobox" id="ui-172df821a84" style="left: 709px; top: 453px; width: 494px; height: 54px; right: auto; bottom: auto; z-index: 5;" ui-class="UIComboBox" ui-id="DL_combobox_type2" dock="0" anchor="0b0101"><span class="ui-content"></span><span class="ui-icon-image" fontsize="16">▼ </span><select><option selected="selected"></option></select></span></div></div></div><xcomponent></xcomponent><xjscript><script id='xjscript' type='text/plain'>var p = parent;   
   
function Form_OnLoad(e){
  setComboInitBak();
}


function setComboInitBak(){
    const optList = [];

	const opt2 = {};
    opt2.Text  = "일시불결제";
    opt2.Value = "P";
	optList.push(opt2);

	const opt6 = {};
    opt6.Text  = "일부결제금액이월일시불";
    opt6.Value = "4";
	optList.push(opt6);

	const opt7 = {};
    opt7.Text  = "일부결제금액이월단기카드대출";
    opt7.Value = "5";
	optList.push(opt7);
	
	const opt4 = {};
    opt4.Text  = "단기카드대출";
    opt4.Value = "3";
	optList.push(opt4);

	const opt5 = {};
    opt5.Text  = "장기카드대출";
    opt5.Value = "7";
	optList.push(opt5);

	const opt1 = {};
    opt1.Text  = "청구금액/미청구금액";
    opt1.Value = "R";
	optList.push(opt1);
	
	const opt3 = {};
    opt3.Text  = "할부결제";
    opt3.Value = "2";
	optList.push(opt3);


	// 선결제구분
	DL_combobox_type1.setItemList(optList);
    DL_combobox_type1.SelectedIndex = 0;


    const s_optList = [];

	const s_opt3 = {};
    s_opt3.Text  = "금액결제(A)";
    s_opt3.Value = "ATYPE";
	s_optList.push(s_opt3);
	
	const s_opt1 = {};
    s_opt1.Text  = "건별결제";
    s_opt1.Value = "LIST";
	s_optList.push(s_opt1);
	
	const s_opt2 = {};
    s_opt2.Text  = "금액결제(B)";
    s_opt2.Value = "BTYPE";
	s_optList.push(s_opt2);
	
	const s_opt = {};
    s_opt.Text  = "전체결제";
    s_opt.Value = "ALL";
	s_optList.push(s_opt);


	// 결제구분
	DL_combobox_type2.setItemList(s_optList);
    DL_combobox_type2.SelectedIndex = 0;

}


function setComboInit(){
    
    const optList = [];
    
	const opt1 = {};
    opt1.Text  = "청구금액/미청구금액";
    opt1.Value = "R";
	optList.push(opt1);
	
	const opt2 = {};
    opt2.Text  = "일시불결제";
    opt2.Value = "P";
	optList.push(opt2);

	const opt3 = {};
    opt3.Text  = "할부결제";
    opt3.Value = "2";
	optList.push(opt3);

	const opt4 = {};
    opt4.Text  = "단기카드대출";
    opt4.Value = "3";
	optList.push(opt4);

	const opt5 = {};
    opt5.Text  = "장기카드대출";
    opt5.Value = "7";
	optList.push(opt5);

	const opt6 = {};
    opt6.Text  = "일부결제금액이월일시불";
    opt6.Value = "4";
	optList.push(opt6);

	const opt7 = {};
    opt7.Text  = "일부결제금액이월단기카드대출";
    opt7.Value = "5";
	optList.push(opt7);

	// 선결제구분
	DL_combobox_type1.setItemList(optList);
    DL_combobox_type1.SelectedIndex = 0;


    const s_optList = [];

	const s_opt = {};
    s_opt.Text  = "전체결제";
    s_opt.Value = "ALL";
	s_optList.push(s_opt);

	// 결제구분
	DL_combobox_type2.setItemList(s_optList);
    DL_combobox_type2.SelectedIndex = 0;

}


function DL_combobox_type1_OnSelectedItemChanged(e){
  	console.log(">>>>>>>>");
  	console.log(e);
	console.log(e.after.index);
	console.log(e.after.value);
	console.log(e.after.text);	
	
    var type  = e.after.value,
        items = [{ "Value" : "LIST", "Text" : "건별결제" }];
    if(type == "R") {
        items = [{ "Value" : "ALL", "Text" : "전체결제" }];
    } else if(type == "P") {
        items.push({"Value" : "ATYPE", "Text" : "금액결제(A)"});
    } else if(["2","3","4","5","7"].indexOf(type) > -1) {
        items.push({"Value" : "BTYPE", "Text" : "금액결제(B)"});
    }	
    
	// 결제구분
	DL_combobox_type2.setItemList(items);
    DL_combobox_type2.SelectedIndex = 0;   
    
}


function BT_left_OnClick(e){
	SCREEN.WriteJnl("[선결제 신청조건 선택] 취소");
  	ATMCOMM.BusinessEnd(ATMCOMM.RET_CAN);
}


function BT_right_OnClick(e){

    // 화면로딩 탭 뷰
    p.ChangeTab(p.loadScreenNo);

	console.log(" DL_combobox_type2.SelectedIndex >>>> ");
	console.log(DL_combobox_type2);
	console.log(DL_combobox_type2.SelectedIndex);
	console.log(DL_combobox_type2.Value );
	console.log(DL_combobox_type2.Text );

    const comType1     = DL_combobox_type1.Value,
          comTypeNm1   = DL_combobox_type1.Text,
		  comType2     = DL_combobox_type2.Value,
		  comTypeNm2   = DL_combobox_type2.Text;
   
    var AHST_PCSN_DCD = (comType2 == "LIST" && comType1 == "P") ? "C"  : comType1;
    
    // 선결제처리구분코드
    p.G_payInfo.AHST_PCSN_DCD = AHST_PCSN_DCD;

    // 선결제처리구분명
    p.G_payInfo.AHST_PCSN_DNM = comTypeNm1;

    // 선결제처리구분 - 결제구분
    p.G_payInfo.PAMENT_CD = comType2;

    // 선결제처리구분 - 결제명
    p.G_payInfo.PAMENT_NM = comTypeNm2;


	console.log("G_payInfo.AHST_PCSN_DCD  :  "+p.G_payInfo.AHST_PCSN_DCD);
	console.log("G_payInfo.AHST_PCSN_DNM  :  "+p.G_payInfo.AHST_PCSN_DNM);
	console.log("G_payInfo.PAMENT_CD  :  "+p.G_payInfo.PAMENT_CD);
	console.log("G_payInfo.PAMENT_NM  :  "+p.G_payInfo.PAMENT_NM);

   	// 선결제 입금 대상 조회
   	SCREEN.WriteJnl("**선결제 구분: " + comTypeNm1);
   	SCREEN.WriteJnl("**결제 구분: " + comTypeNm2);
   	SCREEN.WriteJnl("[선결제 신청조건 선택] 정상");
   	p.sendRequest("step3_pay_select");    

}</script></xjscript></body>
</html>
