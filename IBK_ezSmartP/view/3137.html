<!doctype html>
<html version="1000">
<head>
	<meta charset="utf-8">
	<title>ezSmartAtm Builder Form 새문서</title>
	<meta http-equiv="cache-control" content="no-cache">
	<meta http-equiv="pragma" content="no-cache">
	<meta http-equiv="expires" content="0">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<meta name="author" content="[김윤섭][kkobiboy]">
	<link id="ui-style-core" rel="stylesheet" type="text/css" href="/core/app.controls.css">
	<script type="text/javascript" charset="utf-8" src="/HtaPlatform/Core/Form.JsApi"></script>
	<script type="text/javascript" charset="utf-8" src="/core/app.jquery.js"></script>
	<script type="text/javascript" charset="utf-8" src="/core/app.controls.js"></script>
	<style id="ui-style-user" type="text/css"></style>
	<script id="ui-script-user" type="text/javascript"></script>
</head>
<body oncontextmenu="return false;" class="ui-pre-load"><div class="ui-document ui-container" id="ui-document" lang="kr" xonload="Form_OnLoad" ui-class="UIForm" ui-id="Form" dock="5" anchor="0b0101" ide-size="1506,1225"><div class="ui-control ui-panel ui-container" id="ui-171be2e0c07" style="left: 0px; top: 0px; width: 1280px; height: 1024px; right: auto; bottom: auto; z-index: 0; background-color: transparent;" ui-class="UIPanel" ui-id="PN_form" dock="0" anchor="0b0101"><div class="ui-control ui-panel ui-container ui-dock ui-dock-top" id="ui-171be2e0c08" style="left: 0px; top: 0px; width: auto; height: 102px; right: 0px; bottom: auto; z-index: 0; background-color: rgb(23, 107, 200);" ui-class="UIPanel" ui-id="PN_Title" dock="1" anchor="0b0101" dock-r="left:98px;top:1px;width:200px;height:76px;right:auto;bottom:auto" dock-h="102" dock-w="200"><span class="ui-control ui-label" id="ui-171be2e0c09" style='left: 80px; top: 31px; width: 1120px; height: 40px; right: auto; bottom: auto; color: white; font-family: "IBK iDream M"; font-size: 38px; z-index: 0;' ui-class="UILabel" ui-id="LB_title" dock="0" anchor="0b0101"><span class="ui-content">결제정보변경</span></span></div><div class="ui-control ui-panel ui-container ui-dock ui-dock-top" id="ui-171a52210e4" style="left: 0px; top: 102px; width: auto; height: 92px; right: 0px; bottom: auto; z-index: 1; background-color: whitesmoke;" ui-class="UIPanel" ui-id="PN_Subtitle" dock="1" anchor="0b0101" dock-r="left:0px;top:92px;width:1280px;height:112px;right:auto;bottom:auto" dock-h="92" dock-w="1280"><div class="ui-control ui-panel ui-container" id="ui-17355fb3e22" style="left: 80px; top: 12px; width: 1150px; height: 68px; right: auto; bottom: auto; z-index: 0; background-color: rgb(239, 240, 242);" ui-class="UIPanel" ui-id="PN_Subtitle_wrap" dock="0" anchor="0b0101"><span class="ui-control ui-label" id="ui-17355fc4297" style='left: 348px; top: 40px; width: 740px; height: 22px; right: auto; bottom: auto; font-family: "IBK iDream L"; font-size: 16px; z-index: 0;' ui-class="UILabel" ui-id="LB_label1" dock="0" anchor="0b0101"><span class="ui-content">계좌를 등록/해지하는 서비스입니다. 당행계좌에 한하여, 한 계좌만 등록할 수 있습니다.</span></span><span class="ui-control ui-label" id="ui-17355fc42da" style='left: 348px; top: 10px; width: 740px; height: 22px; right: auto; bottom: auto; font-family: "IBK iDream L"; font-size: 16px; z-index: 1;' ui-class="UILabel" ui-id="LB_label2" dock="0" anchor="0b0101"><span class="ui-content">신용카드 결제계좌에 결제금액이 부족한 경우, 부족한 금액만큼 자동으로 출금되는</span></span><span class="ui-control ui-label" id="ui-17355fc4308" style='left: 320px; top: 17px; width: 13px; height: 34px; right: auto; bottom: auto; font-family: "IBK iDream L"; font-size: 16px; z-index: 2;' ui-class="UILabel" ui-id="LB_label7" dock="0" anchor="0b0101" icon-image-align="left,middle"><span class="ui-content" style="justify-content: center;"> | </span></span><span class="ui-control ui-label" id="ui-17355fc432e" style='left: 0px; top: 13px; width: 307px; height: 43px; right: auto; bottom: auto; font-family: "IBK iDream L"; font-size: 30px; z-index: 3;' ui-class="UILabel" ui-id="LB_Subtitle" dock="0" anchor="0b0101"><span class="ui-content">추가결제계좌 변경/해지</span></span></div></div><div class="ui-control ui-panel ui-container ui-dock ui-dock-bottom" id="ui-171a4b083a4" style="left: 0px; top: auto; width: auto; height: 140px; right: 0px; bottom: 0px; z-index: 2; background-color: transparent;" ui-class="UIPanel" ui-id="PN_btn" dock="2" anchor="0b0101" dock-r="left:0px;top:884px;width:1280px;height:140px;right:auto;bottom:auto" dock-h="140" dock-w="1280"><span class="ui-control ui-button theme-blue" id="ui-171a4b083a5" style='left: auto; top: 31px; width: 258px; height: 80px; right: 36px; bottom: auto; font-family: "IBK iDream M"; font-size: 32px; z-index: 0;' ui-class="UIButton" ui-id="BT_right" dock="0" anchor="0b1001" theme="blue" xonclick="BT_right_OnClick"><span class="ui-content">해지</span></span><span class="ui-control ui-button theme-orange" id="ui-171a4b083a6" style='left: 36px; top: 31px; width: 258px; height: 80px; right: auto; bottom: auto; font-family: "IBK iDream M"; font-size: 32px; z-index: 1;' ui-class="UIButton" ui-id="BT_left" dock="0" anchor="0b0101" theme="orange" xonclick="BT_left_OnClick"><span class="ui-content">취소</span></span></div><div class="ui-control ui-panel ui-container ui-dock ui-dock-fill" id="ui-170cd1a2b22" style="left: 0px; top: 194px; width: auto; height: auto; right: 0px; bottom: 140px; z-index: 3;" ui-class="UIPanel" ui-id="PN_contents" dock="5" anchor="0b0101" dock-r="left:0px;top:194px;width:1280px;height:689px;right:auto;bottom:auto" dock-h="689" dock-w="1280"><span class="ui-control ui-scrollbar" id="ui-172980bda14" style="left: 1185px; top: 28px; width: 32px; height: 130px; right: auto; bottom: auto; z-index: 0;" ui-class="UIScrollBar" ui-id="SB_scrollbar_acct" dock="0" anchor="0b0101" scroll-control-id="PN_account"><span class="track"></span><span class="trackbutton"></span></span><div class="ui-control ui-panel ui-container" id="ui-170ec4084d5" style="left: 83px; top: 28px; width: 1076px; height: 130px; right: auto; bottom: auto; z-index: 1;" ui-class="UIPanel" ui-id="PN_account" dock="0" anchor="0b0101"></div><div class="ui-control ui-panel ui-container" id="ui-172da3097e0" style="left: 83px; top: 180px; width: 1121px; height: 310px; right: auto; bottom: auto; z-index: 2; background-color: rgb(239, 240, 242);" ui-class="UIPanel" ui-id="PN_panel1" dock="0" anchor="0b0101"><span class="ui-control ui-label" id="ui-171770ca3a5" style='left: 28px; top: 20px; width: 1080px; height: 38px; right: auto; bottom: auto; font-family: "IBK iDream L"; font-size: 26px; font-weight: bold; z-index: 0;' ui-class="UILabel" ui-id="LB_text" dock="0" anchor="0b0101"><span class="ui-content" style="left: 45px; top: 0px; right: 0px; bottom: 0px;">유의사항</span><span class="ui-icon-image" style='background-position: left; background-image: url("/KRG/media/ic_note.png");'></span></span><span class="ui-control ui-label" id="ui-172bfd08218" style='left: 28px; top: 70px; width: 1080px; height: 30px; right: auto; bottom: auto; font-family: "IBK iDream L"; font-size: 19px; z-index: 1;' ui-class="UILabel" ui-id="LB_label3" dock="0" anchor="0b0101"><span class="ui-content" style="left: 0px; top: 0px; right: 0px; bottom: 0px;">신용카드 결제계좌가 타행계좌인 경우에는 추가 결제계좌 등록이 불가합니다.</span></span><span class="ui-control ui-label" id="ui-172c00a16b6" style='left: 28px; top: 116px; width: 1080px; height: 30px; right: auto; bottom: auto; font-family: "IBK iDream L"; font-size: 19px; z-index: 2;' ui-class="UILabel" ui-id="LB_label4" dock="0" anchor="0b0101"><span class="ui-content" style="left: 0px; top: 0px; right: 0px; bottom: 0px;">추가 결제계좌는 신용카드에 한해 운영됩니다.</span></span><span class="ui-control ui-label" id="ui-172c5cd3609" style='left: 28px; top: 162px; width: 1080px; height: 30px; right: auto; bottom: auto; font-family: "IBK iDream L"; font-size: 19px; z-index: 3;' ui-class="UILabel" ui-id="LB_label5" dock="0" anchor="0b0101"><span class="ui-content" style="left: 0px; top: 0px; right: 0px; bottom: 0px;">IBK고객센터 및 영업점에서 결제계좌를 당행계좌에서 타행계좌로 변경할 경우, 추가 결제 계좌 등록은 자동으로 해지됩니다.</span></span><span class="ui-control ui-label" id="ui-172c5ce1da8" style='left: 28px; top: 208px; width: 1080px; height: 30px; right: auto; bottom: auto; font-family: "IBK iDream L"; font-size: 19px; z-index: 4;' ui-class="UILabel" ui-id="LB_label6" dock="0" anchor="0b0101"><span class="ui-content" style="left: 0px; top: 0px; right: 0px; bottom: 0px;">결제계좌가 대출약정(마이너스통장)계좌일 경우, 결제금액은 영업시간 이후 자동이체됩니다.</span></span><span class="ui-control ui-label" id="ui-172dae4386e" style='left: 28px; top: 254px; width: 1080px; height: 30px; right: auto; bottom: auto; font-family: "IBK iDream L"; font-size: 19px; z-index: 5;' ui-class="UILabel" ui-id="LB_label13" dock="0" anchor="0b0101"><span class="ui-content" style="left: 0px; top: 0px; right: 0px; bottom: 0px;">연체중에도 추가 결제정보변경이 가능하며, 변경 즉시 적용됩니다.</span></span></div></div></div>
</div><xcomponent></xcomponent><xjscript><script id='xjscript' type='text/plain'>// common.js import
importJSS("common", "common.js");

var p = parent;

function Form_OnLoad(e) {

}

// 추가결제계좌 리스트
function accountList() {

    if(p.G_regClsM3Step1 == "reg"){
       LB_Subtitle.Text = "추가결제계좌 등록";
    }
				
	let $PN_account = $("div[ui-id='PN_account']");
	// 리스트 초기화
    $PN_account.html("");	
	
	let tag = [], spaceBar="&nbsp;";

	// 추가결제계좌 등록(변경/해지) 계좌번호
	const acctNo = p.G_addAcctM3Step1.acctNo; 
            
    //기존결제계좌를 추가결제계좌로 등록 가능
    const patAcctNo = com.acct.fnGetAccountPattern(acctNo);
                        
	tag.push(""
		+'<div class="list_info" onclick="acctSelectM3Step2(\'0\',\''+acctNo+'\');">'
        +'	<div class="text_area">'
        +'    <div class="main_text">' + patAcctNo + '</div>'
        +'	</div>'
        +'  <div class="next_img"></div>'
        +'</div>'	
	);
          					
	$PN_account.append(""
					  +'<div class="list-panel">'
				 	  +tag.join("")
					  +'</div>'
					 );		
					 
	$PN_account.find("> div.list-panel > div.list_info").each(function(i){
		let $this = $(this);
		$this.css({'border': '1px solid #9c9c9c'});
		$this.mousedown(function(){
		    comSelectAnimate.call(this,$("div[ui-id='PN_account'] > div.list-panel > div.list_info"));
		});
	});	
	$PN_account.find("> div.list-panel > div.list_info").css("visibility","visible");					 
					 
    const type = {
        "reg" : "등록",
        "cls" : "해지",
        "modify" : "변경"
    }[p.G_regClsM3Step1];

	console.log("regclsGuideMessageM3Step2 type : " + type);

	// 버튼명 셋팅
	BT_right.Text = type;

}

// 추가결제계좌 등록 리스트 클릭 이벤트
function acctSelectM3Step2(idx,acctNo) {
	console.log(">>>>>>>>>>>>>>>>> acctSelectM3Step2 === idx === " + idx );		

  	let $PN_account = $("div[ui-id='PN_account']");
  
  	// 리스트 박스 계좌번호 초기화
  	$PN_account.find("> div.list-panel > div.list_info").removeAttr('acctNo');    
    
  	// 선택한 박스 계좌번호 셋팅
  	$PN_account.find("> div.list-panel > div.list_info:eq("+idx+")").attr('acctNo',acctNo);       
  
}

function BT_left_OnClick(e){
	SCREEN.WriteJnl("[추가결제계좌 변경/해지] 취소");
   	ATMCOMM.BusinessEnd(ATMCOMM.RET_CAN);
}

function BT_right_OnClick(e){
  // 추가인증 화면 탭 뷰
  //p.ChangeTab("9041");
  
  SCREEN.WriteJnl("[추가결제계좌 변경/해지] 정상");
  //변경정보 확인
  p.ChangeTab("3138");
  p.sendRequest("m3_step3_regcls_confirm");
}</script></xjscript></body>
</html>
