<!doctype html>
<html version="1000">
<head>
	<meta charset="utf-8">
	<title>ezSmartAtm Builder Form 새문서</title>
	<meta http-equiv="cache-control" content="no-cache">
	<meta http-equiv="pragma" content="no-cache">
	<meta http-equiv="expires" content="0">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<meta name="author" content="[김윤섭][kkobiboy]">
	<link id="ui-style-core" rel="stylesheet" type="text/css" href="/core/app.controls.css">
	<script type="text/javascript" charset="utf-8" src="/HtaPlatform/Core/Form.JsApi"></script>
	<script type="text/javascript" charset="utf-8" src="/core/app.jquery.js"></script>
	<script type="text/javascript" charset="utf-8" src="/core/app.controls.js"></script>
	<style id="ui-style-user" type="text/css"></style>
	<script id="ui-script-user" type="text/javascript"></script>
</head>
<body oncontextmenu="return false;" class="ui-pre-load"><div class="ui-document ui-container" id="ui-document" lang="kr" ide-size="1280,1024" anchor="0b0101" dock="5" ui-id="Form" ui-class="UIForm">
<div class="ui-control ui-panel ui-container" id="ui-171be2e0c07" style="left: 0px; top: 0px; width: 1280px; height: 1024px; right: auto; bottom: auto; z-index: 0; background-color: transparent;" anchor="0b0101" dock="0" ui-id="PN_panel_4503" ui-class="UIPanel"><div class="ui-control ui-panel ui-container ui-dock ui-dock-top" id="ui-171be2e0c08" style="left: 0px; top: 0px; width: auto; height: 101.97px; right: 0px; bottom: auto; z-index: 0; background-color: rgb(23, 107, 200);" anchor="0b0101" dock="1" ui-id="PN_Title" ui-class="UIPanel" dock-w="200" dock-h="102" dock-r="left:98px;top:1px;width:200px;height:76px;right:auto;bottom:auto"><span class="ui-control ui-label" id="ui-171be2e0c09" style='left: 80px; top: 31px; width: 1120px; height: 40px; right: auto; bottom: auto; color: white; font-family: "IBK iDream M"; font-size: 38px; z-index: 0;' anchor="0b0101" dock="0" ui-id="LB_title" ui-class="UILabel"><span class="ui-content">대출</span></span></div><div class="ui-control ui-panel ui-container" id="ui-171be2e0c0e" style="left: 0px; top: 194px; width: 1280px; height: 690px; right: auto; bottom: auto; z-index: 1;" anchor="0b0101" dock="0" ui-id="PN_panel1" ui-class="UIPanel"><span class="ui-control ui-label" id="ui-1721784f6b1" style='left: 82px; top: 59px; width: 494px; height: 24px; right: auto; bottom: auto; color: rgb(0, 104, 196); font-family: "Noto Sans CJK KR Medium", "NotoSansCJKKRMedium", sans-serif; font-size: 24px; z-index: 0;' anchor="0b0101" dock="0" ui-id="LB_label1" ui-class="UILabel"><span class="ui-content">정보입력</span></span><span class="ui-control ui-label" id="ui-17225645899" style="left: 82px; top: 108px; width: 471px; height: 18px; right: auto; bottom: auto; font-size: 18px; z-index: 1;" anchor="0b0101" dock="0" ui-id="LB_label2" ui-class="UILabel"><span class="ui-content" style="justify-content: flex-start;">대출계좌정보</span></span><div class="ui-control ui-panel ui-container" id="ui-17398f29cdf" style="border-width: 1px; border-color: rgb(213, 213, 213); left: 82px; top: 136px; width: 1107px; height: 115px; right: auto; bottom: auto; z-index: 2;" anchor="0b0101" dock="0" ui-id="PN_panel2" ui-class="UIPanel"><span class="ui-control ui-label" id="ui-17398f48228" style="left: 60px; top: 25px; width: 580px; height: 21px; right: auto; bottom: auto; font-size: 21px; z-index: 0;" anchor="0b0101" dock="0" ui-id="LB_accountName" ui-class="UILabel"><span class="ui-content"></span></span><span class="ui-control ui-label" id="ui-17398f5419e" style="left: 60px; top: 64px; width: 580px; height: 24px; right: auto; bottom: auto; font-size: 24px; z-index: 1;" anchor="0b0101" dock="0" ui-id="LB_accountNumber" ui-class="UILabel"><span class="ui-content"></span></span><span class="ui-control ui-label" id="ui-17398f67c29" style="left: 847px; top: 28px; width: 200px; height: 21px; right: auto; bottom: auto; font-size: 21px; z-index: 2;" anchor="0b0101" dock="0" ui-id="LB_label3" ui-class="UILabel"><span class="ui-content" style="justify-content: flex-end;">대출잔액</span></span><span class="ui-control ui-label" id="ui-17398f790e2" style="left: 647px; top: 64px; width: 400px; height: 24px; right: auto; bottom: auto; font-size: 24px; z-index: 3;" anchor="0b0101" dock="0" ui-id="LB_rentAmt" ui-class="UILabel"><span class="ui-content" style="justify-content: flex-end;"></span></span></div><span class="ui-control ui-label" id="ui-17398fb5c14" style="left: 82px; top: 280px; width: 471px; height: 18px; right: auto; bottom: auto; font-size: 18px; z-index: 3;" anchor="0b0101" dock="0" ui-id="LB_label4" ui-class="UILabel"><span class="ui-content" style="justify-content: flex-start;">출금계좌정보</span></span><div class="ui-control ui-panel ui-container" id="ui-17398fb5c51" style="border-width: 1px; border-color: rgb(213, 213, 213); left: 82px; top: 308px; width: 1107px; height: 115px; right: auto; bottom: auto; z-index: 4;" anchor="0b0101" dock="0" ui-id="PN_selectAccount" ui-class="UIPanel" xonclick="PN_selectAccount_OnClick"><span class="ui-control ui-label" id="ui-17398fb5c53" style="left: 60px; top: 43px; width: 580px; height: 21px; right: auto; bottom: auto; font-size: 21px; z-index: 0;" anchor="0b0101" dock="0" ui-id="LB_label5" ui-class="UILabel"><span class="ui-content">출금계좌를 선택해주세요</span></span><div class="ui-control ui-panel ui-container" id="ui-1739900d817" style="left: 1037px; top: 45px; width: 10px; height: 18px; right: auto; bottom: auto; z-index: 1;" anchor="0b0101" dock="0" ui-id="PN_panel5" ui-class="UIPanel"><span class="ui-back-image" style='background-image: url("/KRG/media/list_ic_next.png");'></span></div><span class="ui-control ui-label ui-hide" id="ui-17399042b92" style="left: 822px; top: 28px; width: 200px; height: 21px; right: auto; bottom: auto; font-size: 21px; z-index: 2;" anchor="0b0101" dock="0" ui-id="LB_info1" ui-class="UILabel"><span class="ui-content" style="justify-content: flex-end;">출금가능금액</span></span><span class="ui-control ui-label ui-hide" id="ui-17399042bc5" style="left: 622px; top: 64px; width: 400px; height: 22px; right: auto; bottom: auto; font-size: 22px; z-index: 3;" anchor="0b0101" dock="0" ui-id="LB_info2" ui-class="UILabel"><span class="ui-content" style="justify-content: flex-end;">123,123원</span></span><span class="ui-control ui-label ui-hide" id="ui-173b3651f9b" style="left: 60px; top: 64px; width: 580px; height: 24px; right: auto; bottom: auto; font-size: 24px; z-index: 4;" anchor="0b0101" dock="0" ui-id="LB_selectedAccount" ui-class="UILabel"><span class="ui-content"></span></span><span class="ui-control ui-label ui-hide" id="ui-173b368021d" style="left: 60px; top: 25px; width: 580px; height: 21px; right: auto; bottom: auto; font-size: 21px; z-index: 5;" anchor="0b0101" dock="0" ui-id="LB_selectedAccName" ui-class="UILabel"><span class="ui-content"></span></span></div><span class="ui-control ui-label" id="ui-17398fdbea2" style="left: 82px; top: 452px; width: 471px; height: 18px; right: auto; bottom: auto; font-size: 18px; z-index: 5;" anchor="0b0101" dock="0" ui-id="LB_label11" ui-class="UILabel"><span class="ui-content" style="justify-content: flex-start;">대출이자정보</span></span><div class="ui-control ui-panel ui-container" id="ui-17398fdbed6" style="border-width: 1px; border-color: rgb(213, 213, 213); left: 82px; top: 480px; width: 1107px; height: 115px; right: auto; bottom: auto; z-index: 6;" anchor="0b0101" dock="0" ui-id="PN_panel4" ui-class="UIPanel"><span class="ui-control ui-label" id="ui-17398fdbed8" style="left: 60px; top: 25px; width: 580px; height: 21px; right: auto; bottom: auto; font-size: 21px; z-index: 0;" anchor="0b0101" dock="0" ui-id="LB_label12" ui-class="UILabel"><span class="ui-content">이자납입금액</span></span><span class="ui-control ui-label" id="ui-17398fdbed9" style="left: 60px; top: 64px; width: 580px; height: 24px; right: auto; bottom: auto; font-size: 24px; z-index: 1;" anchor="0b0101" dock="0" ui-id="LB_calAmt" ui-class="UILabel"><span class="ui-content">123,456,789원</span></span><span class="ui-control ui-label" id="ui-17398fdbeda" style="left: 847px; top: 28px; width: 200px; height: 21px; right: auto; bottom: auto; font-size: 21px; z-index: 2;" anchor="0b0101" dock="0" ui-id="LB_label6" ui-class="UILabel"><span class="ui-content" style="justify-content: flex-end;">이자계산기간</span></span><span class="ui-control ui-label" id="ui-17398fdbedb" style="left: 647px; top: 64px; width: 400px; height: 21px; right: auto; bottom: auto; font-size: 21px; z-index: 3;" anchor="0b0101" dock="0" ui-id="LB_calPeriod" ui-class="UILabel"><span class="ui-content" style="justify-content: flex-end;"></span></span></div><span class="ui-control ui-label ui-hide" id="ui-1739d375dea" style="left: 82px; top: 606px; width: 471px; height: 18px; right: auto; bottom: auto; color: rgb(255, 66, 0); font-size: 18px; z-index: 7;" anchor="0b0101" dock="0" ui-id="LB_moneyMsg" ui-class="UILabel"><span class="ui-content" style="justify-content: flex-start;"></span></span></div><div class="ui-control ui-panel ui-container ui-dock ui-dock-top" id="ui-171a52210e4" style="left: 0px; top: 101.97px; width: auto; height: 92px; right: 0px; bottom: auto; z-index: 2; background-color: whitesmoke;" anchor="0b0101" dock="1" ui-id="PN_Subtitle" ui-class="UIPanel" dock-w="1280" dock-h="92" dock-r="left:0px;top:92px;width:1280px;height:112px;right:auto;bottom:auto"><span class="ui-control ui-label" id="ui-171be2e0c0b" style='left: 82px; top: 30px; width: 1120px; height: 32px; right: auto; bottom: auto; font-family: "IBK iDream L"; font-size: 28px; z-index: 0;' anchor="0b0101" dock="0" ui-id="LB_subTitle" ui-class="UILabel"><span class="ui-content">대출이자납입</span></span></div><div class="ui-control ui-panel ui-container ui-dock ui-dock-bottom" id="ui-171a4b083a4" style="left: 0px; top: auto; width: auto; height: 140px; right: 0px; bottom: 0px; z-index: 3; background-color: transparent;" anchor="0b0101" dock="2" ui-id="PN_btn" ui-class="UIPanel" dock-w="1280" dock-h="140" dock-r="left:0px;top:884px;width:1280px;height:140px;right:auto;bottom:auto"><span disabled="disabled" class="ui-control ui-button theme-blue ui-disabled" id="ui-171a4b083a5" style='left: auto; top: 31px; width: 258px; height: 80px; right: 36px; bottom: auto; font-family: "IBK iDream M"; font-size: 32px; z-index: 0;' anchor="0b1001" dock="0" ui-id="BT_right" ui-class="UIButton" theme="blue"><span class="ui-content">다음</span></span><span class="ui-control ui-button theme-orange" id="ui-171a4b083a6" style='left: 36px; top: 31px; width: 258px; height: 80px; right: auto; bottom: auto; font-family: "IBK iDream M"; font-size: 32px; z-index: 1;' anchor="0b0101" dock="0" ui-id="BT_left" ui-class="UIButton" xonclick="BT_left_OnClick" theme="orange"><span class="ui-content">닫기</span></span></div></div></div><xcomponent></xcomponent><xjscript><script id='xjscript' type='text/plain'>includeJSS("LibCommon","/KRG/0301/common.js"); // LibUtil import
/*
	#4504 대출 - 이자납입
	
	# Case 
	1. 계좌조회(2511) -> 대출탭 이자납입버튼
	2. 계좌조회(2511) -> 대출탭 대출정보(4502) -> 바이오 활성화되어있을경우 이자납입 버튼 (팝업)
	3. 대출이자납부 계좌조회(4501) -> 이자납입버튼
	4. 대출이자납부 계좌조회(4501) -> 대출정보(4502) -> 바이오 활성화되어있을경우 이자납입 버튼 (팝업)
*/
let p = parent;
let sendDataObj = {};												// 다음화면으로 리턴시킬 데이터 객체
let prevScreen;

// 닫기버튼
function BT_left_OnClick(e){
	console.log("prevScreen : " + prevScreen);
	SCREEN.WriteJnl("[출금계좌 선택] 취소");
	if(prevScreen == 2511){
		SCREEN.WriteJnl("[계좌조회(대출)] 이동");
		p.ChangeTab("2511");
	} else if(prevScreen == 4501) {
		SCREEN.WriteJnl("[대출이자납입 - 계좌조회] 이동");
		p.ChangeTab("4501");
	} else if(prevScreen == 4502){
		SCREEN.WriteJnl("[대출계좌 상세정보] 이동");
		p.ChangeTab("4502");
	}
}

// 출금계좌선택 
function PN_selectAccount_OnClick(e){
	p.PlayDing();
	// CBKARR108D10 고객보유계좌목록조회 이후 출금계좌선택(4505)팝업
	//SCREEN.WriteJnl("**계좌번호: " + p.gData.CUS_ACN);
	SCREEN.WriteJnl("[출금계좌 선택] 정상");
	p.sendRequest("searchAcountList");
}


// 초기화
function init(){
	// 출금계좌 선택정보 hide
	LB_info1.Visible = false;
	LB_info2.Visible = false;
	LB_selectedAccount.Visible = false; 
	LB_selectedAccName.Visible = false;
	
	LB_label5.Visible = true;								// 출금계좌를 선택해주세요 라벨 show
	BT_right.Enabled = false; 								// 다음버튼 비활성화
}


// 수신 데이터 처리
function ReceiveTran(obj){
	prevScreen = obj.prevScreen;

	let accountInfo = p.gData;
	
	console.log("상품명 : " + accountInfo.PDM);
	console.log("고객계좌번호 : " + accountInfo.CUS_ACN);
	console.log("대출잔액 : " + accountInfo.TLBZ_BAL);
	console.log("산출이자 : " + obj.CMTN_INT);
	console.log("전최종이자수입년월일 : " + obj.WLST_ITRV_YMD);
	console.log("전이자납입예정년월일 : " + obj.WHL_ITPM_SCDL_YMD);
	
	p.gData.LOANNM = accountInfo.PDM;
	
	// 데이터출력
	LB_accountName.setText(accountInfo.PDM);																// 상품명
	LB_accountNumber.setText(p.ReturnFormatAccount(accountInfo.CUS_ACN.trim()));							// 고객계좌번호
	LB_rentAmt.setText(parseInt(accountInfo.TLBZ_BAL).toLocaleString() + ' <span class="won">원</span>');	// 대출잔액
	LB_calAmt.setText(parseInt(obj.CMTN_INT).toLocaleString() + ' <span class="won">원</span>');				// 산출이자
	
	
	// 산출이자가 0일 경우 화면 하단에 안내문구출력
	if(parseInt(obj.CMTN_INT) == 0){
		LB_moneyMsg.setText("* 납입 할 이자가 없습니다.");
		LB_moneyMsg.Visible = true;
	}
	
	let fromDate;
	let toDate;
	if(!com.util.isNull2(obj.WLST_ITRV_YMD)) fromDate = com.date.fnGetFormatDate(obj.WLST_ITRV_YMD);		// 전최종이자수입년월일
	if(!com.util.isNull2(obj.WHL_ITPM_SCDL_YMD)) toDate = com.date.fnGetFormatDate(obj.WHL_ITPM_SCDL_YMD);		// 전이자납입예정년월일
	
	LB_calPeriod.setText(fromDate + " ~ " + toDate);
	
	// 4506(정보입력확인)화면에서 사용할 데이터 저장
	p.gData.INTAMT = obj.CMTN_INT;
	p.gData.FDATE = obj.WLST_ITRV_YMD;
	p.gData.TDATE = obj.WHL_ITPM_SCDL_YMD;
	
	// css
	LB_rentAmt.$.find(".won").css({'font-size':'21px','margin-left':'5px'});
	LB_calAmt.$.find(".won").css({'font-size':'21px','margin-left':'5px'});
}</script></xjscript></body>
</html>
