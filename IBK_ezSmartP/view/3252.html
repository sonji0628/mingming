<!doctype html>
<html version="1000">
<head>
	<meta charset="utf-8">
	<title>ezSmartAtm Builder Form 새문서</title>
	<meta http-equiv="cache-control" content="no-cache">
	<meta http-equiv="pragma" content="no-cache">
	<meta http-equiv="expires" content="0">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<meta name="author" content="[김윤섭][kkobiboy]">
	<link id="ui-style-core" rel="stylesheet" type="text/css" href="/core/app.controls.css">
	<script type="text/javascript" charset="utf-8" src="/HtaPlatform/Core/Form.JsApi"></script>
	<script type="text/javascript" charset="utf-8" src="/core/app.jquery.js"></script>
	<script type="text/javascript" charset="utf-8" src="/core/app.controls.js"></script>
	<style id="ui-style-user" type="text/css"></style>
	<script id="ui-script-user" type="text/javascript"></script>
</head>
<body oncontextmenu="return false;" class="ui-pre-load"><div class="ui-document ui-container" id="ui-document" lang="kr" xonload="Form_OnLoad" ide-size="1389,1120" anchor="0b0101" dock="5" ui-id="Form" ui-class="UIForm">
<div class="ui-control ui-panel ui-container" id="ui-171be2e0c07" style="left: 0px; top: 0px; width: 1280px; height: 1024px; right: auto; bottom: auto; z-index: 0; background-color: transparent;" anchor="0b0101" dock="0" ui-id="PN_form" ui-class="UIPanel"><div class="ui-control ui-panel ui-container ui-dock ui-dock-top" id="ui-171be2e0c08" style="left: 0px; top: 0px; width: auto; height: 102px; right: 0px; bottom: auto; z-index: 0; background-color: rgb(23, 107, 200);" anchor="0b0101" dock="1" ui-id="PN_Title" ui-class="UIPanel" dock-r="left:98px;top:1px;width:200px;height:76px;right:auto;bottom:auto" dock-h="102" dock-w="200"><span class="ui-control ui-label" id="ui-171be2e0c09" style='left: 80px; top: 31px; width: 1120px; height: 40px; right: auto; bottom: auto; color: white; font-family: "IBK iDream M"; font-size: 38px; z-index: 0;' anchor="0b0101" dock="0" ui-id="LB_title" ui-class="UILabel"><span class="ui-content">선결제</span></span></div><div class="ui-control ui-panel ui-container ui-dock ui-dock-top" id="ui-171be2e0c0a" style="left: 0px; top: 102px; width: auto; height: 92px; right: 0px; bottom: auto; z-index: 1; background-color: rgb(239, 240, 242);" anchor="0b0101" dock="1" ui-id="PN_Subtitle" ui-class="UIPanel" dock-r="left:0px;top:102px;width:1280px;height:92px;right:auto;bottom:auto" dock-h="92" dock-w="1280"><span class="ui-control ui-label" id="ui-171be2e0c0b" style='left: 82px; top: 30px; width: 235px; height: 43px; right: auto; bottom: auto; font-family: "IBK iDream L"; font-size: 32px; z-index: 0;' anchor="0b0101" dock="0" ui-id="LB_Subtitle" ui-class="UILabel"><span class="ui-content">선결제 상세정보</span></span></div><div class="ui-control ui-panel ui-container ui-dock ui-dock-bottom" id="ui-172729dbaaf" style="left: 0px; top: auto; width: auto; height: 140px; right: 0px; bottom: 0px; z-index: 2;" anchor="0b0101" dock="2" ui-id="PN_btn" ui-class="UIPanel" dock-r="left:0px;top:884px;width:1280px;height:140px;right:auto;bottom:auto" dock-h="140" dock-w="1280"><span class="ui-control ui-button theme-blue" id="ui-172729ea59d" style='left: auto; top: 31px; width: 258px; height: 80px; right: 36px; bottom: auto; font-family: "IBK iDream M"; font-size: 32px; z-index: 0;' anchor="0b1001" dock="0" ui-id="BT_right" ui-class="UIButton" theme="blue" xonclick="BT_right_OnClick"><span class="ui-content">확인</span></span></div><div class="ui-control ui-panel ui-container ui-dock ui-dock-fill" id="ui-172729f3b0f" style="left: 0px; top: 194px; width: auto; height: auto; right: 0px; bottom: 140px; z-index: 3;" anchor="0b0101" dock="5" ui-id="PN_contents" ui-class="UIPanel" dock-r="left:0px;top:194px;width:1280px;height:100px;right:auto;bottom:auto" dock-h="100" dock-w="1280"><span class="ui-control ui-scrollbar" id="ui-172980bda14" style="left: 1205px; top: 84px; width: 32px; height: 492px; right: auto; bottom: auto; z-index: 0;" anchor="0b0101" dock="0" ui-id="SB_scrollbar_payinfo" ui-class="UIScrollBar" scroll-control-id="PN_panel_payinfo"><span class="track"></span><span class="trackbutton" style="top: 387.29px;"></span></span><div class="ui-control ui-panel ui-container" id="ui-172e8e859a4" style="left: 83px; top: 21px; width: 1100px; height: 554px; right: auto; bottom: auto; z-index: 1;" anchor="0b0101" dock="0" ui-id="PN_panel_payinfo" ui-class="UIPanel"><span class="ui-control ui-label" id="ui-172e8e90051" style="left: 4px; top: 28px; width: 403px; height: 42px; right: auto; bottom: auto; color: rgb(23, 107, 200); font-size: 34px; z-index: 0;" anchor="0b0101" dock="0" ui-id="LB_label1" ui-class="UILabel"><span class="ui-content">상세조회</span></span><div class="ui-control ui-table" id="ui-172e8e95d12" style="border-width: 2px; border-color: rgb(194, 194, 194); left: 4px; top: 76px; width: 1075px; height: 660px; right: auto; bottom: auto; z-index: 1;" anchor="0b0101" dock="0" ui-id="TL_table_payinfo" ui-class="UITable"><table border="0" cellspacing="0" cellpadding="0"><thead><tr><td width="270" type="1" align-v="align-middle" align-h="align-left"></td><td type="1" align-v="align-middle" align-h="align-left"></td></tr></thead><tbody><tr height="9%"><td><div class="ui-table-cell align-left align-middle ui-container" id="ui-172e8e95d13" style="padding: 0px 0px 0px 20px; font-size: 21px; background-color: rgb(242, 242, 242);"><span class="cell-control-label">이용구분</span></div></td><td><div class="ui-table-cell align-left align-middle ui-container" id="ui-172e8e95d14" style="padding: 0px 20px; font-size: 22px; justify-content: flex-start;"></div></td></tr><tr height="9%"><td><div class="ui-table-cell align-left align-middle ui-container" id="ui-172e8e95d15" style="padding: 0px 0px 0px 20px; font-size: 21px; background-color: rgb(242, 242, 242);"><span class="cell-control-label">거래일</span></div></td><td><div class="ui-table-cell align-left align-middle ui-container" id="ui-172e8e95d16" style="padding: 0px 20px; font-size: 22px; justify-content: flex-start;"></div></td></tr><tr height="9%"><td><div class="ui-table-cell align-left align-middle ui-container" id="ui-172e8e95d17" style="padding: 0px 0px 0px 20px; font-size: 21px; background-color: rgb(242, 242, 242);"><span class="cell-control-label">선결제일</span></div></td><td><div class="ui-table-cell align-left align-middle ui-container" id="ui-172e8e95d18" style="padding: 0px 20px; font-size: 22px; justify-content: flex-start;"></div></td></tr><tr height="9%"><td><div class="ui-table-cell align-left align-middle ui-container" id="ui-172e8e95d19" style="padding: 0px 0px 0px 20px; font-size: 21px; background-color: rgb(242, 242, 242);"><span class="cell-control-label">카드번호</span></div></td><td><div class="ui-table-cell align-left align-middle ui-container" id="ui-172e8e95d1a" style="padding: 0px 20px; font-size: 22px;"></div></td></tr><tr height="9%"><td><div class="ui-table-cell align-left align-middle ui-container" id="ui-172e8e95d1b" style="padding: 0px 0px 0px 20px; font-size: 21px; background-color: rgb(242, 242, 242);"><span class="cell-control-label">가맹점명</span></div></td><td><div class="ui-table-cell align-left align-middle ui-container" id="ui-172e8e95d1c" style="padding: 0px 20px; font-size: 22px;"></div></td></tr><tr height="9%"><td><div class="ui-table-cell align-left align-middle ui-container" id="ui-172e8e95d1d" style="padding: 0px 0px 0px 20px; font-size: 21px; background-color: rgb(242, 242, 242);"><span class="cell-control-label">이용금액</span></div></td><td><div class="ui-table-cell align-left align-middle ui-container" id="ui-172e8e95d1e" style="padding: 0px 20px; font-size: 22px;"><span class="cell-control-label">원</span></div></td></tr><tr height="9%"><td><div class="ui-table-cell align-left align-middle ui-container" id="ui-172e8e95d1f" style="padding: 0px 0px 0px 20px; font-size: 21px; background-color: rgb(242, 242, 242);"><span class="cell-control-label">입금원금</span></div></td><td><div class="ui-table-cell align-left align-middle ui-container" id="ui-172e8e95d20" style="padding: 0px 20px; font-size: 22px;"><span class="cell-control-label">원</span></div></td></tr><tr height="9%"><td><div class="ui-table-cell align-left align-middle ui-container" id="ui-172e8e95d27" style="padding: 0px 0px 0px 20px; font-size: 21px; background-color: rgb(242, 242, 242);"><span class="cell-control-label">입금수수료</span></div></td><td><div class="ui-table-cell align-left align-middle ui-container" id="ui-172e8e95d28" style="padding: 0px 20px; font-size: 22px;"><span class="cell-control-label">원</span></div></td></tr><tr height="9%"><td><div class="ui-table-cell align-left align-middle ui-container" id="ui-172e8e95d29" style="padding: 0px 0px 0px 20px; font-size: 21px; background-color: rgb(242, 242, 242);"><span class="cell-control-label">청구일</span></div></td><td><div class="ui-table-cell align-left align-middle ui-container" id="ui-172e8e95d2a" style="padding: 0px 20px; font-size: 22px;"></div></td></tr><tr height="9%"><td><div class="ui-table-cell align-left align-middle ui-container" id="ui-17394907a7e" style="padding: 0px 0px 0px 20px; font-size: 21px; background-color: rgb(242, 242, 242);"><span class="cell-control-label">정상여부</span></div></td><td><div class="ui-table-cell align-left align-middle ui-container" id="ui-17394907a7f" style="padding: 0px 20px; font-size: 22px;"></div></td></tr><tr height="10%"><td><div class="ui-table-cell align-left align-middle ui-container" id="ui-173949076e4" style="padding: 0px 0px 0px 20px; font-size: 21px; background-color: rgb(242, 242, 242);"><span class="cell-control-label">취급점</span></div></td><td><div class="ui-table-cell align-left align-middle ui-container" id="ui-173949076e6" style="padding: 0px 20px; font-size: 22px;"></div></td></tr></tbody></table></div></div><div class="ui-control ui-panel ui-container ui-dock ui-dock-bottom" id="ui-173dc9c86ab" style="left: 0px; top: auto; width: auto; height: 93.99px; right: 0px; bottom: 0px; z-index: 2; background-color: rgb(239, 240, 242);" anchor="0b0101" dock="2" ui-id="PN_panel4" ui-class="UIPanel" dock-r="left:0px;top:594px;width:1280px;height:94px;right:auto;bottom:auto" dock-h="94" dock-w="1280"><span class="ui-control ui-label" id="ui-173dc9df1eb" style='left: 86px; top: 59px; width: 715px; height: 22px; right: auto; bottom: auto; font-family: "Noto Sans CJK KR Medium", "NotoSansCJKkrMedium", sans-serif !important; font-size: 19px; z-index: 0;' anchor="0b0101" dock="0" ui-id="LB_label5" ui-class="UILabel"><span class="ui-content">일부 가맹점정보는 제공되지 않을 수 있습니다.</span></span><span class="ui-control ui-label" id="ui-171770ca3a5" style='left: 86px; top: 13px; width: 200px; height: 35px; right: auto; bottom: auto; font-family: "Noto Sans CJK KR Medium", "NotoSansCJKkrMedium", sans-serif !important; font-size: 24px; z-index: 1;' anchor="0b0101" dock="0" ui-id="LB_text" ui-class="UILabel"><span class="ui-content" style="left: 45px; top: 0px; right: 0px; bottom: 0px;">유의사항</span><span class="ui-icon-image" style='background-position: left; background-image: url("/KRG/media/ic_note.png");'></span></span></div></div></div></div><xcomponent></xcomponent><xjscript><script id='xjscript' type='text/plain'>// 3180.css import
importCSS("3180"     ,"3180.css");

// common.js import
includeJSS("common","/KRG/0301/common.js");

function Form_OnLoad(e){
  
   // 팝업을 호출한 opener에 팝업 window 저장 (opener에서 close 가능)
   if (host.form.opener){
	   host.form.opener.xpopup = window;
   }
	
   com.screen.setTimeoutEx(30000, onScreenTimeout);
  
   fnInfomationSetting();
}

// parent 화면의 타임아웃에 종속되어 주석처리함
function onScreenTimeout(){
	console.log("[popup] Screen Timeout!!!");
	
	com.screen.clearTimeoutEx();

	com.screen.closePopup(function(opendlg){
		opendlg.OnCloseCallback3252("timeout");
	});	
}

// 결제청구건 데이터 셋팅
function fnInfomationSetting() {

  let payinfo,records;
  
  payinfo = com.ss.getItem("3252_payinfo");
    
  if(payinfo != null){
	 records = jQuery.parseJSON(payinfo);
  }

  console.log(" fnInfomationSetting >>> payinfo ::: " + payinfo);
  console.log(" fnInfomationSetting >>> records ::: " + records);
  console.log(" fnInfomationSetting >>> records.length ::: " + records.length);
  
  // 결제청구 데이터 가져오기
  if(records != null && records.length > 0){
    let record = records[0];
    TL_table_payinfo.DataCell(0,1,"text",record.CRD_PDCD_NM);
	TL_table_payinfo.DataCell(1,1,"text",com.util.isNull($.trim(record.AMSL_YMD)) ? "" : com.date.fnGetFormatDate(record.AMSL_YMD));
	TL_table_payinfo.DataCell(2,1,"text",com.util.isNull($.trim(record.RCPT_YMD)) ? "" : com.date.fnGetFormatDate(record.RCPT_YMD));
	TL_table_payinfo.DataCell(3,1,"text",record.CDN);		
	TL_table_payinfo.DataCell(4,1,"text",record.AFST_NM);
	TL_table_payinfo.DataCell(5,1,"text",com.util.fnGetFormatMoney(record.CARD_AMSL_AMT));
	TL_table_payinfo.DataCell(6,1,"text",com.util.fnGetFormatMoney(record.MNRC_PRNC_AMT));
	TL_table_payinfo.DataCell(7,1,"text",com.util.fnGetFormatMoney(record.MNRC_FEE));
	TL_table_payinfo.DataCell(8,1,"text",com.date.fnGetFormatDate(record.STLM_YMD));
    TL_table_payinfo.DataCell(9,1,"text",$.trim(record.AHST_CNCL_DSNC_NM)+" / "+$.trim(record.AHST_MNRC_DCD_NM));
	TL_table_payinfo.DataCell(10,1,"text",record.AHST_PCSN_MDIA_NM);
	
    const $payinfo_tbody = TL_table_payinfo.$.find("> table > tbody");
	$payinfo_tbody.find("> tr:eq(5) > td:eq(1) > div.ui-table-cell > span.cell-control-label").append('<span class="table-won"> 원</span>');
	$payinfo_tbody.find("> tr:eq(6) > td:eq(1) > div.ui-table-cell > span.cell-control-label").append('<span class="table-won"> 원</span>');
	$payinfo_tbody.find("> tr:eq(7) > td:eq(1) > div.ui-table-cell > span.cell-control-label").append('<span class="table-won"> 원</span>');
  } // end if - records
  
   // 화면 스크롤 위치 초기화
   SB_scrollbar_payinfo.$.find("> span.trackbutton").css({"top":"0px"});  
  
   // Invalidate 스크롤 체크(생성)
   SB_scrollbar_payinfo.Invalidate();		  

}


function BT_right_OnClick(e)
{
	setTimeout(function()
	{
		com.screen.closePopup(function(opendlg)
		{
	    	opendlg.OnCloseCallback3252(true);
		});
	}, 200);
}
</script></xjscript></body>
</html>
