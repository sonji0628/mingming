<!doctype html>
<html version="1000">
<head>
	<meta charset="utf-8">
	<title>ezSmartAtm Builder Form 새문서</title>
	<meta http-equiv="cache-control" content="no-cache">
	<meta http-equiv="pragma" content="no-cache">
	<meta http-equiv="expires" content="0">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<meta name="author" content="[김윤섭][kkobiboy]">
	<link id="ui-style-core" rel="stylesheet" type="text/css" href="/core/app.controls.css">
	<script type="text/javascript" charset="utf-8" src="/HtaPlatform/Core/Form.JsApi"></script>
	<script type="text/javascript" charset="utf-8" src="/core/app.jquery.js"></script>
	<script type="text/javascript" charset="utf-8" src="/core/app.controls.js"></script>
	<style id="ui-style-user" type="text/css"></style>
	<script id="ui-script-user" type="text/javascript"></script>
</head>
<body oncontextmenu="return false;" class="ui-pre-load"><div class="ui-document ui-container" id="ui-document" lang="kr" ui-class="UIForm" ui-id="Form" dock="5" anchor="0b0101" ide-size="1389,1120" xonload="Form_OnLoad">
<div class="ui-control ui-panel ui-container" id="ui-171be2e0c07" style="left: 0px; top: 0px; width: 1280px; height: 1024px; right: auto; bottom: auto; z-index: 0; background-color: transparent;" ui-class="UIPanel" ui-id="PN_form" dock="0" anchor="0b0101"><div class="ui-control ui-panel ui-container ui-dock ui-dock-top" id="ui-171be2e0c08" style="left: 0px; top: 0px; width: auto; height: 102px; right: 0px; bottom: auto; z-index: 0; background-color: rgb(23, 107, 200);" ui-class="UIPanel" ui-id="PN_Title" dock="1" anchor="0b0101" dock-w="200" dock-h="102" dock-r="left:98px;top:1px;width:200px;height:76px;right:auto;bottom:auto"><span class="ui-control ui-label" id="ui-171be2e0c09" style='left: 80px; top: 31px; width: 1120px; height: 40px; right: auto; bottom: auto; color: white; font-family: "IBK iDream M"; font-size: 38px; z-index: 0;' ui-class="UILabel" ui-id="LB_title" dock="0" anchor="0b0101"><span class="ui-content">선결제</span></span></div><div class="ui-control ui-panel ui-container ui-dock ui-dock-top" id="ui-171be2e0c0a" style="left: 0px; top: 102px; width: auto; height: 92px; right: 0px; bottom: auto; z-index: 1; background-color: rgb(239, 240, 242);" ui-class="UIPanel" ui-id="PN_Subtitle" dock="1" anchor="0b0101" dock-w="1280" dock-h="92" dock-r="left:0px;top:102px;width:1280px;height:92px;right:auto;bottom:auto"><div class="ui-control ui-panel ui-container" id="ui-17355fb3e22" style="left: 80px; top: 12px; width: 1150px; height: 68px; right: auto; bottom: auto; z-index: 0; background-color: rgb(239, 240, 242);" ui-class="UIPanel" ui-id="PN_Subtitle_wrap" dock="0" anchor="0b0101"><span class="ui-control ui-label" id="ui-172bff56e8d" style='left: 240px; top: 19px; width: 780px; height: 30px; right: auto; bottom: auto; font-family: "IBK iDream L"; font-size: 20px; z-index: 2;' ui-class="UILabel" ui-id="LB_Subtitle_guide" dock="0" anchor="0b0101"><span class="ui-content">선결제 신청 후 취소가 되지 않습니다. 진행하시겠습니까?</span></span><span class="ui-control ui-label" id="ui-172bfef05a8" style='left: 208px; top: 19px; width: 13px; height: 34px; right: auto; bottom: auto; font-family: "IBK iDream L"; font-size: 20px; z-index: 1;' ui-class="UILabel" ui-id="LB_label10" dock="0" anchor="0b0101" icon-image-align="left,middle"><span class="ui-content" style="justify-content: center;"> | </span></span><span class="ui-control ui-label" id="ui-1739d1bc8ca" style='left: 4px; top: 13px; width: 184px; height: 43px; right: auto; bottom: auto; font-family: "IBK iDream L"; font-size: 32px; z-index: 0;' ui-class="UILabel" ui-id="LB_label2" dock="0" anchor="0b0101"><span class="ui-content">상세정보확인</span></span></div></div><div class="ui-control ui-panel ui-container ui-dock ui-dock-bottom" id="ui-172729dbaaf" style="left: 0px; top: auto; width: auto; height: 140px; right: 0px; bottom: 0px; z-index: 2;" ui-class="UIPanel" ui-id="PN_btn" dock="2" anchor="0b0101" dock-w="1280" dock-h="140" dock-r="left:0px;top:884px;width:1280px;height:140px;right:auto;bottom:auto"><span class="ui-control ui-button theme-blue" id="ui-172729ea59d" style='left: auto; top: 31px; width: 258px; height: 80px; right: 36px; bottom: auto; font-family: "IBK iDream M"; font-size: 32px; z-index: 0;' ui-class="UIButton" ui-id="BT_right" dock="0" anchor="0b1001" xonclick="BT_right_OnClick" theme="blue"><span class="ui-content">확인</span></span><span class="ui-control ui-button theme-orange" id="ui-171a52210ea" style='left: 36px; top: 31px; width: 258px; height: 80px; right: auto; bottom: auto; font-family: "IBK iDream M"; font-size: 32px; z-index: 1;' ui-class="UIButton" ui-id="BT_left" dock="0" anchor="0b0101" xonclick="BT_left_OnClick" theme="orange"><span class="ui-content">취소</span></span></div><div class="ui-control ui-panel ui-container ui-dock ui-dock-fill" id="ui-172729f3b0f" style="left: 0px; top: 194px; width: auto; height: auto; right: 0px; bottom: 140px; z-index: 3;" ui-class="UIPanel" ui-id="PN_contents" dock="5" anchor="0b0101" dock-w="1280" dock-h="100" dock-r="left:0px;top:194px;width:1280px;height:100px;right:auto;bottom:auto"><span class="ui-control ui-scrollbar" id="ui-172980bda14" style="left: 1205px; top: 21px; width: 32px; height: 620px; right: auto; bottom: auto; z-index: 0;" ui-class="UIScrollBar" ui-id="SB_scrollbar_payinfo" dock="0" anchor="0b0101" scroll-control-id="PN_panel_payinfo"><span class="track"></span><span class="trackbutton" style="top: 0px;"></span></span><div class="ui-control ui-panel ui-container" id="ui-172e8e859a4" style="left: 83px; top: 21px; width: 1100px; height: 620px; right: auto; bottom: auto; z-index: 1;" ui-class="UIPanel" ui-id="PN_panel_payinfo" dock="0" anchor="0b0101"><span class="ui-control ui-label" id="ui-172e8e90051" style='left: 4px; top: 28px; width: 403px; height: 42px; right: auto; bottom: auto; color: rgb(23, 107, 200); font-family: "IBK iDream M"; font-size: 24px; z-index: 0;' ui-class="UILabel" ui-id="LB_label1" dock="0" anchor="0b0101"><span class="ui-content">선결제 상세정보</span></span><div class="ui-control ui-table" id="ui-172e8e95d12" style="border-width: 2px; border-color: rgb(194, 194, 194); left: 4px; top: 76px; width: 1075px; height: 420px; right: auto; bottom: auto; z-index: 1;" ui-class="UITable" ui-id="TL_table_payinfo" dock="0" anchor="0b0101"><table border="0" cellspacing="0" cellpadding="0"><thead><tr><td width="270" type="1" align-h="align-left" align-v="align-middle"></td><td type="1" align-h="align-left" align-v="align-middle"></td></tr></thead><tbody><tr height="14%"><td><div class="ui-table-cell align-left align-middle ui-container" id="ui-1739d879098" style="padding: 0px 0px 0px 20px; font-size: 21px; background-color: rgb(242, 242, 242);"><span class="cell-control-label">결제원금</span></div></td><td><div class="ui-table-cell align-left align-middle ui-container" id="ui-1739d879099" style="padding: 0px 20px; font-size: 22px;"></div></td></tr><tr height="14%"><td><div class="ui-table-cell align-left align-middle ui-container" id="ui-172e8e95d13" style="padding: 0px 0px 0px 20px; font-size: 21px; background-color: rgb(242, 242, 242);"><span class="cell-control-label">결제금액</span></div></td><td><div class="ui-table-cell align-left align-middle ui-container" id="ui-172e8e95d14" style="padding: 0px 20px; font-size: 22px; justify-content: flex-start;"></div></td></tr><tr height="14%"><td><div class="ui-table-cell align-left align-middle ui-container" id="ui-172e8e95d15" style="padding: 0px 0px 0px 20px; font-size: 21px; background-color: rgb(242, 242, 242);"><span class="cell-control-label">결제은행</span></div></td><td><div class="ui-table-cell align-left align-middle ui-container" id="ui-172e8e95d16" style="padding: 0px 20px; font-size: 22px; justify-content: flex-start;"></div></td></tr><tr height="14%"><td><div class="ui-table-cell align-left align-middle ui-container" id="ui-172e8e95d17" style="padding: 0px 0px 0px 20px; font-size: 21px; background-color: rgb(242, 242, 242);"><span class="cell-control-label">결제계좌</span></div></td><td><div class="ui-table-cell align-left align-middle ui-container" id="ui-172e8e95d18" style="padding: 0px 20px; font-size: 22px; justify-content: flex-start;"></div></td></tr><tr height="14%"><td><div class="ui-table-cell align-left align-middle ui-container" id="ui-172e8e95d19" style="padding: 0px 0px 0px 20px; font-size: 21px; background-color: rgb(242, 242, 242);"><span class="cell-control-label">선결제구분</span></div></td><td><div class="ui-table-cell align-left align-middle ui-container" id="ui-172e8e95d1a" style="padding: 0px 20px; font-size: 22px;"></div></td></tr><tr height="14%"><td><div class="ui-table-cell align-left align-middle ui-container" id="ui-172e8e95d1b" style="padding: 0px 0px 0px 20px; font-size: 21px; background-color: rgb(242, 242, 242);"><span class="cell-control-label">결제구분</span></div></td><td><div class="ui-table-cell align-left align-middle ui-container" id="ui-172e8e95d1c" style="padding: 0px 20px; font-size: 22px;"></div></td></tr><tr height="16%"><td><div class="ui-table-cell align-left align-middle ui-container" id="ui-172e8e95d1d" style="padding: 0px 0px 0px 20px; font-size: 21px; background-color: rgb(242, 242, 242);"><span class="cell-control-label">최종청구일</span></div></td><td><div class="ui-table-cell align-left align-middle ui-container" id="ui-172e8e95d1e" style="padding: 0px 20px; font-size: 22px;"></div></td></tr></tbody></table></div></div></div></div></div><xcomponent></xcomponent><xjscript><script id='xjscript' type='text/plain'>// 3180.css import
importCSS("3180"     ,"3180.css");

// common.js import
includeJSS("common","/KRG/0301/common.js");

var p = parent;

function Form_OnLoad(e){
}

// 선결제 상세정보 셋팅
function setPayInfoDtl() {

  	// 결제금액
    const CRD_MNRC_TTAL_AMT = com.util.fnGetFormatMoney(com.ss.getItem("3183_CRD_MNRC_TTAL_AMT"));  
	TL_table_payinfo.DataCell(1,1,"text",CRD_MNRC_TTAL_AMT);
	
	// 결제은행
    const BankName = com.acct.convertBankName2(p.G_CRDRCP301021Step3.STLM_BNCD);
    TL_table_payinfo.DataCell(2,1,"text",BankName);
    
    // 결제계좌
    const STLM_ACN = p.G_isOthers ? p.G_CRDRCP301021Step3.STLM_ACN : com.acct.fnGetAccountPattern(p.G_CRDRCP301021Step3.STLM_ACN);
	TL_table_payinfo.DataCell(3,1,"text",STLM_ACN);

    // 선결제처리구분명
    const AHST_PCSN_DNM = p.G_payInfo.AHST_PCSN_DNM;
	TL_table_payinfo.DataCell(4,1,"text",AHST_PCSN_DNM);
	
    // 선결제처리구분 - 결제명
    const PAMENT_NM = p.G_payInfo.PAMENT_NM;
	TL_table_payinfo.DataCell(5,1,"text",PAMENT_NM);
    
    // 최종청구일
    const LAST_BILG_YMD =  p.com.date.fnGetFormatDate(p.G_CRDRCP301021Step3.LAST_BILG_YMD);
	TL_table_payinfo.DataCell(6,1,"text",LAST_BILG_YMD);
    
    const $payinfo_tbody = TL_table_payinfo.$.find("> table > tbody");
	$payinfo_tbody.find("> tr:eq(0) > td:eq(1) > div.ui-table-cell > span.cell-control-label").append('<span class="table-won"> 원</span>');
	$payinfo_tbody.find("> tr:eq(1) > td:eq(1) > div.ui-table-cell > span.cell-control-label").append('<span class="table-won"> 원</span>');
	
    // 선결제처리구분코드
    var AHST_PCSN_DCD = p.G_payInfo.AHST_PCSN_DCD;    
	if(AHST_PCSN_DCD !== "3") { // 3-(단기카드대출) 에 해당되지 않는다면....!!!!
	
	   // 결제원금 숨기기
	   $payinfo_tbody.find("> tr:eq(0)").css({"display":"none"});
	   $payinfo_tbody.find("> tr:eq(1)").css({"height":"16.7%"});
	   $payinfo_tbody.find("> tr:eq(2)").css({"height":"16.7%"});
	   $payinfo_tbody.find("> tr:eq(3)").css({"height":"16.7%"});
	   $payinfo_tbody.find("> tr:eq(4)").css({"height":"16.7%"});
	   $payinfo_tbody.find("> tr:eq(5)").css({"height":"16.7%"});
	   $payinfo_tbody.find("> tr:eq(6)").css({"height":"auto"});

	   // 선결제 상세정보확인 화면 탭 뷰
	   p.ChangeTab("3189");

	} else { // 3-(단기카드대출) 에 해당된다면....!!!!
	
       // 화면로딩 탭 뷰
       p.ChangeTab(p.loadScreenNo);
       
	   // 단기카드(현금서비스) 수수료 조회
   	   p.sendRequest("step7_1_short_card_loan");
   	   
	}

}


// 단기카드(현금서비스) 결제정보 셋팅
function setPayInfoShortCardLoan(xioOutput){    

    var CRD_MNRC_TTAL_AMT = 0,
        MNRC_PRNC_AMT  = 0,
        temp = [];
        
    var rows = xioOutput.Grid1;
    
    for(var i=0, leng = rows.length; i < leng; i++) {
        var row = rows[i];
        
        temp.push({
            "SLIP_BNG_YMD" : row.SLIP_BNG_YMD,
            "CARD_AMSL_SLN" : row.CARD_AMSL_SLN,
            "CRD_PDCD" : row.CRD_PDCD,
            "MNRC_RQST_AMT" : com.util.fnPaddingData(row.MNRC_RQST_AMT, '0', 15, true ), 
            "MNRC_PRNC_AMT" : com.util.fnPaddingData(row.MNRC_PRNC_AMT, '0', 15, true ),
            "MNRC_FEE" : com.util.fnPaddingData(row.MNRC_FEE, '0', 15, true )
        });
        
        MNRC_PRNC_AMT+= parseInt(row.MNRC_PRNC_AMT, 10);
        CRD_MNRC_TTAL_AMT+=parseInt(row.MNRC_RQST_AMT, 10);
    }
    
    // 세션스토리지 재셋팅
    com.ss.setItem("3183_Grid1",JSON.stringify(temp));                
    com.ss.setItem("3183_CRD_MNRC_TTAL_AMT",CRD_MNRC_TTAL_AMT);
    
   // 단기카드 수수료 합산 금액.
   // 결제원금
   TL_table_payinfo.DataCell(0,1,"text",com.util.fnGetFormatMoney(MNRC_PRNC_AMT));
   // 결제금액
   TL_table_payinfo.DataCell(1,1,"text",com.util.fnGetFormatMoney(CRD_MNRC_TTAL_AMT));
			   
   const $payinfo_tbody = TL_table_payinfo.$.find("> table > tbody");
   $payinfo_tbody.find("> tr:eq(0) > td:eq(1) > div.ui-table-cell > span.cell-control-label").append('<span class="table-won"> 원</span>');
   $payinfo_tbody.find("> tr:eq(1) > td:eq(1) > div.ui-table-cell > span.cell-control-label").append('<span class="table-won"> 원</span>');
			   
   // 선결제 상세정보확인 화면 탭 뷰
   p.ChangeTab("3189");

}


function BT_left_OnClick(e){
	SCREEN.WriteJnl("[상세정보 확인] 취소");
  	ATMCOMM.BusinessEnd(ATMCOMM.RET_CAN);
}


function BT_right_OnClick(e){
	// 추가인증 화면 탭 뷰
   	SCREEN.WriteJnl("[상세정보 확인] 정상");
   	p.ChangeTab("9041");  
}
</script></xjscript></body>
</html>
