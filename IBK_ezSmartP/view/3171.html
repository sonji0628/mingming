<!doctype html>
<html version="1000">
<head>
	<meta charset="utf-8">
	<title>ezSmartAtm Builder Form 새문서</title>
	<meta http-equiv="cache-control" content="no-cache">
	<meta http-equiv="pragma" content="no-cache">
	<meta http-equiv="expires" content="0">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<meta name="author" content="[김윤섭][kkobiboy]">
	<link id="ui-style-core" rel="stylesheet" type="text/css" href="/core/app.controls.css">
	<script type="text/javascript" charset="utf-8" src="/HtaPlatform/Core/Form.JsApi"></script>
	<script type="text/javascript" charset="utf-8" src="/core/app.jquery.js"></script>
	<script type="text/javascript" charset="utf-8" src="/core/app.controls.js"></script>
	<style id="ui-style-user" type="text/css"></style>
	<script id="ui-script-user" type="text/javascript"></script>
</head>
<body oncontextmenu="return false;" class="ui-pre-load"><div class="ui-document ui-container" id="ui-document" lang="kr" xonload="Form_OnLoad" ide-size="1389,1120" anchor="0b0101" dock="5" ui-id="Form" ui-class="UIForm">
<div class="ui-control ui-panel ui-container" id="ui-171be2e0c07" style="left: 0px; top: 0px; width: 1280px; height: 1024px; right: auto; bottom: auto; z-index: 0; background-color: transparent;" anchor="0b0101" dock="0" ui-id="PN_form" ui-class="UIPanel"><div class="ui-control ui-panel ui-container ui-dock ui-dock-top" id="ui-171be2e0c08" style="left: 0px; top: 0px; width: auto; height: 102px; right: 0px; bottom: auto; z-index: 0; background-color: rgb(23, 107, 200);" anchor="0b0101" dock="1" ui-id="PN_Title" ui-class="UIPanel" dock-r="left:98px;top:1px;width:200px;height:76px;right:auto;bottom:auto" dock-h="102" dock-w="200"><span class="ui-control ui-label" id="ui-171be2e0c09" style='left: 80px; top: 31px; width: 1120px; height: 40px; right: auto; bottom: auto; color: white; font-family: "IBK iDream M"; font-size: 38px; z-index: 0;' anchor="0b0101" dock="0" ui-id="LB_title" ui-class="UILabel"><span class="ui-content">포인트조회/사용신청</span></span></div><div class="ui-control ui-panel ui-container ui-dock ui-dock-top" id="ui-171be2e0c0a" style="left: 0px; top: 102px; width: auto; height: 92px; right: 0px; bottom: auto; z-index: 1; background-color: rgb(239, 240, 242);" anchor="0b0101" dock="1" ui-id="PN_Subtitle" ui-class="UIPanel" dock-r="left:0px;top:102px;width:1280px;height:92px;right:auto;bottom:auto" dock-h="92" dock-w="1280"><span class="ui-control ui-label" id="ui-171be2e0c0b" style='left: 82px; top: 30px; width: 320px; height: 43px; right: auto; bottom: auto; font-family: "IBK iDream L"; font-size: 32px; z-index: 0;' anchor="0b0101" dock="0" ui-id="LB_Subtitle" ui-class="UILabel"><span class="ui-content">포인트 사용내역 조회 </span></span></div><div class="ui-control ui-panel ui-container ui-dock ui-dock-bottom" id="ui-172729dbaaf" style="left: 0px; top: auto; width: auto; height: 140px; right: 0px; bottom: 0px; z-index: 2;" anchor="0b0101" dock="2" ui-id="PN_btn" ui-class="UIPanel" dock-r="left:0px;top:884px;width:1280px;height:140px;right:auto;bottom:auto" dock-h="140" dock-w="1280"><span class="ui-control ui-button theme-orange" id="ui-172729e45a9" style='left: 36px; top: 31px; width: 258px; height: 80px; right: auto; bottom: auto; font-family: "IBK iDream M"; font-size: 32px; z-index: 0;' anchor="0b0101" dock="0" ui-id="BT_left" ui-class="UIButton" theme="orange" xonclick="BT_left_OnClick"><span class="ui-content">취소</span></span><span class="ui-control ui-button theme-blue" id="ui-172729ea59d" style='left: auto; top: 31px; width: 258px; height: 80px; right: 36px; bottom: auto; font-family: "IBK iDream M"; font-size: 32px; z-index: 1;' anchor="0b1001" dock="0" ui-id="BT_right" ui-class="UIButton" theme="blue" xonclick="BT_right_OnClick"><span class="ui-content">조회</span></span></div><div class="ui-control ui-panel ui-container ui-dock ui-dock-fill" id="ui-172729f3b0f" style="left: 0px; top: 194px; width: auto; height: auto; right: 0px; bottom: 140px; z-index: 3;" anchor="0b0101" dock="5" ui-id="PN_contents" ui-class="UIPanel" dock-r="left:0px;top:194px;width:1280px;height:100px;right:auto;bottom:auto" dock-h="100" dock-w="1280"><span class="ui-control ui-label" id="ui-171ab4a94c0" style="left: 83px; top: 33px; width: 441px; height: 32px; right: auto; bottom: auto; color: rgb(23, 107, 200); font-size: 26px; z-index: 0;" anchor="0b0101" dock="0" ui-id="LB_label44" ui-class="UILabel"><span class="ui-content">조회기간</span></span><div class="ui-control ui-panel ui-container" id="ui-170ec4084d5" style="left: 83px; top: 195px; width: 1076px; height: 460px; right: auto; bottom: auto; z-index: 1;" anchor="0b0101" dock="0" ui-id="PN_panel_pt" ui-class="UIPanel"></div><span class="ui-control ui-scrollbar" id="ui-172980bda14" style="left: 1200px; top: 195px; width: 32px; height: 460px; right: auto; bottom: auto; z-index: 2;" anchor="0b0101" dock="0" ui-id="SB_scrollbar_pt" ui-class="UIScrollBar" scroll-control-id="PN_panel_pt"><span class="track"></span><span class="trackbutton"></span></span><span class="ui-control ui-datepicker" id="ui-172c9f4d016" style="left: 766px; top: 73px; width: 200px; height: 48px; right: auto; bottom: auto; z-index: 3;" anchor="0b0101" dock="0" ui-id="DP_datepicker_st" ui-class="UIDatePicker" xonselecteddate="DP_datepicker_st_OnSelectedDate" tick="1592492400000"><span class="ui-content">2020-06-19</span><span class="ui-icon-image"></span></span><span class="ui-control ui-datepicker" id="ui-172c9f980b5" style="left: 1018px; top: 73px; width: 200px; height: 48px; right: auto; bottom: auto; z-index: 4;" anchor="0b0101" dock="0" ui-id="DP_datepicker_ed" ui-class="UIDatePicker" xonselecteddate="DP_datepicker_ed_OnSelectedDate" tick="1592492400000"><span class="ui-content">2020-06-19</span><span class="ui-icon-image"></span></span><span class="ui-control ui-label" id="ui-171a517878e" style='left: 970px; top: 81px; width: 44px; height: 32px; right: auto; bottom: auto; font-family: "IBK iDream L"; font-size: 28px; z-index: 5;' anchor="0b0101" dock="0" ui-id="LB_label141" ui-class="UILabel"><span class="ui-content" style="justify-content: center;">~</span></span><span class="ui-control ui-label" id="ui-171aae96369" style="left: 885px; top: 153px; width: 119px; height: 24px; right: auto; bottom: auto; font-size: 21px; z-index: 6;" anchor="0b0101" dock="0" ui-id="LB_label23" ui-class="UILabel"><span class="ui-content">조회기준일시</span></span><span class="ui-control ui-label" id="ui-171aae96368" style="left: 1012px; top: 154px; width: 210px; height: 24px; right: auto; bottom: auto; font-size: 21px; z-index: 7;" anchor="0b0101" dock="0" ui-id="LB_label_date" ui-class="UILabel"><span class="ui-content"></span></span><span class="ui-control ui-label" id="ui-172cae891ce" style="left: 83px; top: 147px; width: 140px; height: 30px; right: auto; bottom: auto; font-size: 28px; z-index: 8;" anchor="0b0101" dock="0" ui-id="LB_label1" ui-class="UILabel"><span class="ui-content">조회결과</span></span><span class="ui-control ui-button" id="ui-172caf9636a" style="border-radius: 30px; border: 2px solid rgb(158, 158, 158); border-image: none; left: 432px; top: 73px; width: 92px; height: 52px; right: auto; bottom: auto; color: black; font-size: 20px; font-weight: bold; z-index: 9;" anchor="0b0101" dock="0" ui-id="BT_button_12mm" ui-class="UIButton" theme="" xonclick="BT_button_12mm_OnClick"><span class="ui-content">1년</span></span><span class="ui-control ui-button" id="ui-172cb0f1970" style="border-radius: 30px; border: 2px solid rgb(158, 158, 158); border-image: none; left: 322px; top: 73px; width: 92px; height: 52px; right: auto; bottom: auto; color: black; font-size: 20px; font-weight: bold; z-index: 10;" anchor="0b0101" dock="0" ui-id="BT_button_6mm" ui-class="UIButton" theme="" xonclick="BT_button_6mm_OnClick"><span class="ui-content">6개월</span></span><span class="ui-control ui-button" id="ui-172cb0f1e13" style="border-radius: 30px; border: 2px solid rgb(158, 158, 158); border-image: none; left: 210px; top: 73px; width: 92px; height: 52px; right: auto; bottom: auto; color: black; font-size: 20px; font-weight: bold; z-index: 11;" anchor="0b0101" dock="0" ui-id="BT_button_3mm" ui-class="UIButton" theme="" xonclick="BT_button_3mm_OnClick"><span class="ui-content">3개월</span></span><span class="ui-control ui-button" id="ui-172cb0f1fd4" style="border-radius: 30px; border: 2px solid rgb(1, 118, 188); border-image: none; left: 98px; top: 73px; width: 92px; height: 52px; right: auto; bottom: auto; color: rgb(23, 107, 200); font-size: 20px; font-weight: bold; z-index: 12;" anchor="0b0101" dock="0" ui-id="BT_button_1mm" ui-class="UIButton" theme="" xonclick="BT_button_1mm_OnClick"><span class="ui-content">1개월</span></span><span class="ui-control ui-label ui-hide" id="ui-171c36a6928" style="left: 257px; top: 319px; width: 760px; height: 32px; right: auto; bottom: auto; color: rgb(255, 113, 69); font-size: 32px; z-index: 13;" anchor="0b0101" dock="0" ui-id="LB_label_msg" ui-class="UILabel"><span class="ui-content" style="justify-content: center;">거래내역이 없습니다.</span></span></div></div></div><xcomponent></xcomponent><xjscript><script id='xjscript' type='text/plain'>// 3170.css import
importCSS("3170"     ,"3170.css");

// common.js import
//importJSS("common", "common.js");
includeJSS("common","/KRG/0301/common.js");


var p = parent;

function Form_OnLoad(e){
   BT_button_1mm.$.css({'border':'2px solid #9e9e9e','color':'#000000'});
   BT_button_3mm.$.css({'border':'2px solid #9e9e9e','color':'#000000'});
   BT_button_6mm.$.css({'border':'2px solid #9e9e9e','color':'#000000'});
   BT_button_12mm.$.css({'border':'2px solid #9e9e9e','color':'#000000'});   
}

function drawPoint(records) {

	let tag = [];
	
    for(let i = 0, Len = records.length; i < Len; i++){
       let record = records[i];
	   let PNT_USE_CLSF_NM = record.PNT_USE_CLSF_NM;
	   let title_style = "";
	   let icon_class  = "use";					   
	   if ($.trim(record.CNCL_YMD) != "" ) {
	      PNT_USE_CLSF_NM = PNT_USE_CLSF_NM + "(취소)";
	      title_style = "color:#f45408;";
	      icon_class  = "cancel";
	   }
	   
	   let rgsn_ymd = "";				    
	   if(record.RGSN_YMD != "" && record.RGSN_YMD.length >= 8){
	   		rgsn_ymd = record.RGSN_YMD.substring(0,4) +"-"+ record.RGSN_YMD.substring(4,6) +"-"+ record.RGSN_YMD.substring(6,8);
	   }
	   
	   // next_img css 삭제
	   tag.push(""
			+'<div class="list_info">'
	        +'	<div class="text_area">'
	        +'    <div class="main_text posLT"><strong style="'+title_style+'">'+PNT_USE_CLSF_NM+'</strong></div>'
	        +'    <div class="sub_text posLB">'+rgsn_ymd+'</div>'
	        +'    <div class="ic_point"><span class="'+icon_class+'"></span></div>'
	        +'    <div class="posRT">(포인트)</div>'
	        +'    <div class="posRB"><strong>'+com.util.Comma(""+record.USE_PNT)+'</strong> 원</div>'
	        +'	</div>'
	        +'  <div class=""></div>'
	        +'</div>'					        
		);
				
    }  // end for - records

	let $PN_panel_pt = $("div[ui-id='PN_panel_pt']");
	$PN_panel_pt.append(""
						+'<div class="list-panel">'
						+tag.join("")
						+'</div>'
					    );	
	$PN_panel_pt.css("visibility","visible");
	
}  // end func - drawPoint
    
    
function BT_button_init(){
   BT_button_1mm.$.css({'border':'2px solid #9e9e9e','color':'#000000'});
   BT_button_3mm.$.css({'border':'2px solid #9e9e9e','color':'#000000'});
   BT_button_6mm.$.css({'border':'2px solid #9e9e9e','color':'#000000'});
   BT_button_12mm.$.css({'border':'2px solid #9e9e9e','color':'#000000'});
}

function BT_button_1mm_OnClick(e){

    // 버튼 초기화
    BT_button_init();

    // 버튼 on
    BT_button_1mm.$.css({'border':'2px solid #176bc8','color':'#176bc8'});

	// 현재일자 구하기
	let edNow  = new Date();
	let edyyyy = edNow.getFullYear();
	let edmm   = com.util.generateZero(edNow.getMonth() + 1);
	let eddd   = com.util.generateZero(edNow.getDate());

	// 시작일자는 디폴트 1일로 셋팅 
	let stDate = new Date(edyyyy, edmm, 1);
	
	// 1개월전으로 셋팅
	stDate.setMonth(stDate.getMonth() - 1);
	
	// 시작달의 마지막날로 셋팅
	stDate.setDate(0);  
	
	let styyyy = stDate.getFullYear();
	let stmm   = com.util.generateZero(stDate.getMonth() + 1);
	let stdd   = com.util.generateZero(stDate.getDate());
	
    // 시작달의 요일보다 종료달의 요일이 작다면 종료달의 요일로 셋팅
    if(eddd < stdd){
       stdd = eddd;
    }
    
	DP_datepicker_st.Text = styyyy + '-' + stmm + '-' + stdd;
	DP_datepicker_ed.Text = edyyyy + '-' + edmm + '-' + eddd;
	
// 신규 조회 -> 조회 버튼으로 검색
//	p.initPointHistory();

}

function BT_button_3mm_OnClick(e){

    // 버튼 초기화
    BT_button_init();

    // 버튼 on
    BT_button_3mm.$.css({'border':'2px solid #176bc8','color':'#176bc8'});
    
	// 현재일자 구하기
	let edNow  = new Date();
	let edyyyy = edNow.getFullYear();
	let edmm   = com.util.generateZero(edNow.getMonth() + 1);
	let eddd   = com.util.generateZero(edNow.getDate());

	// 시작일자는 디폴트 1일로 셋팅
	let stDate = new Date(edyyyy, edmm, 1);
	
	// 3개월전으로 셋팅
	stDate.setMonth(stDate.getMonth() - 3);
	
	// 시작달의 마지막날로 셋팅
	stDate.setDate(0);	
	
	let styyyy = stDate.getFullYear();
	let stmm   = com.util.generateZero(stDate.getMonth() + 1);
	let stdd   = com.util.generateZero(stDate.getDate());
	
    // 시작달의 요일보다 종료달의 요일이 작다면 종료달의 요일로 셋팅
    if(eddd < stdd){
       stdd = eddd;
    }
    
	DP_datepicker_st.Text = styyyy + '-' + stmm + '-' + stdd;
	DP_datepicker_ed.Text = edyyyy + '-' + edmm + '-' + eddd;
	
// 신규 조회 -> 조회 버튼으로 검색
//	p.initPointHistory();
	
}

function BT_button_6mm_OnClick(e){

    // 버튼 초기화
    BT_button_init();

    // 버튼 on
    BT_button_6mm.$.css({'border':'2px solid #176bc8','color':'#176bc8'});
    
	// 현재일자 구하기
	let edNow  = new Date();
	let edyyyy = edNow.getFullYear();
	let edmm   = com.util.generateZero(edNow.getMonth() + 1);
	let eddd   = com.util.generateZero(edNow.getDate());

	// 시작일자는 디폴트 1일로 셋팅
	let stDate = new Date(edyyyy, edmm, 1);
	
	// 6개월전으로 셋팅
	stDate.setMonth(stDate.getMonth() - 6);
	
	// 시작달의 마지막날로 셋팅
	stDate.setDate(0);	
	
	let styyyy = stDate.getFullYear();
	let stmm   = com.util.generateZero(stDate.getMonth() + 1);
	let stdd   = com.util.generateZero(stDate.getDate());
	
    // 시작달의 요일보다 종료달의 요일이 작다면 종료달의 요일로 셋팅
    if(eddd < stdd){
       stdd = eddd;
    }
    
	DP_datepicker_st.Text = styyyy + '-' + stmm + '-' + stdd;
	DP_datepicker_ed.Text = edyyyy + '-' + edmm + '-' + eddd;
	
// 신규 조회 -> 조회 버튼으로 검색
//	p.initPointHistory();
	
}

function BT_button_12mm_OnClick(e){

    // 버튼 초기화
    BT_button_init();

    // 버튼 on
    BT_button_12mm.$.css({'border':'2px solid #176bc8','color':'#176bc8'});
    
	// 현재일자 구하기
	let edNow  = new Date();
	let edyyyy = edNow.getFullYear();
	let edmm   = com.util.generateZero(edNow.getMonth() + 1);
	let eddd   = com.util.generateZero(edNow.getDate());

	// 시작일자는 디폴트 1일로 셋팅
	let stDate = new Date(edyyyy, edmm, 1);
	
	// 12개월(1년)전으로 셋팅
	stDate.setMonth(stDate.getMonth() - 12);
	
	// 시작달의 마지막날로 셋팅
	stDate.setDate(0);	
	
	let styyyy = stDate.getFullYear();
	let stmm   = com.util.generateZero(stDate.getMonth() + 1);
	let stdd   = com.util.generateZero(stDate.getDate());
	
    // 시작달의 요일보다 종료달의 요일이 작다면 종료달의 요일로 셋팅
    if(eddd < stdd){
       stdd = eddd;
    }
    
	DP_datepicker_st.Text = styyyy + '-' + stmm + '-' + stdd;
	DP_datepicker_ed.Text = edyyyy + '-' + edmm + '-' + eddd;
	
// 신규 조회 -> 조회 버튼으로 검색
//	p.initPointHistory();
	
}

function BT_left_OnClick(e){
   ATMCOMM.BusinessEnd(ATMCOMM.RET_OK);
}

function BT_right_OnClick(e){	
	// 신규 조회
	p.initPointHistory();   
}


function DP_datepicker_st_OnSelectedDate(e){
   BT_button_1mm.$.css({'border':'2px solid #9e9e9e','color':'#000000'});
   BT_button_3mm.$.css({'border':'2px solid #9e9e9e','color':'#000000'});
   BT_button_6mm.$.css({'border':'2px solid #9e9e9e','color':'#000000'});
   BT_button_12mm.$.css({'border':'2px solid #9e9e9e','color':'#000000'});   
}



function DP_datepicker_ed_OnSelectedDate(e){
   BT_button_1mm.$.css({'border':'2px solid #9e9e9e','color':'#000000'});
   BT_button_3mm.$.css({'border':'2px solid #9e9e9e','color':'#000000'});
   BT_button_6mm.$.css({'border':'2px solid #9e9e9e','color':'#000000'});
   BT_button_12mm.$.css({'border':'2px solid #9e9e9e','color':'#000000'});
}</script></xjscript></body>
</html>
